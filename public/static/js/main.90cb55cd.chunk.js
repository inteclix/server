(this["webpackJsonpgest-park"]=this["webpackJsonpgest-park"]||[]).push([[0],{323:function(e,t,a){},513:function(e,t,a){"use strict";a.r(t);var i=a(2),c=a(1),n=a.n(c),r=a(44),l=a.n(r),s=a(9),o=a(284),d=a.n(o),u=(a(321),a(322),a(323),a(15)),b=a(98),j=a(10),h=Object(c.createContext)(null);function m(e){var t=e.children,a=e.value;return Object(i.jsx)(h.Provider,{value:Object(j.a)({},a),children:t})}var O=function(){return Object(c.useContext)(h)},p=a(56),x=a(36),f=a(517),g=a(524),v=a(133),y=a(54),I=a(88),E=a(86),S=a(55),_=a(525),C=a(526),T=a(527),R=a(141),A=a(249),k=a.n(A),N=function(){var e=Object(c.useState)(localStorage.getItem("token")),t=Object(u.a)(e,2),a=t[0],i=t[1],n=function(e){localStorage.setItem("token",e),i(e)};return Object(c.useMemo)((function(){var e=k.a.create({baseURL:"/api",headers:{"x-access-token":a,Authorization:"Bearer ".concat(a),"Content-Type":"application/json",accept:"application/json"}});return e.interceptors.response.use((function(e){return e}),(function(e){var t,a,i,c,n=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?null===e||void 0===e||null===(i=e.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message:e.message;return R.b.error(n),setTimeout((function(){401===e.response.status&&e.response.data.message,401===e.response.status&&e.response.data.message,401===e.response.status&&"Provided token is expired."===e.response.data.message&&function(){var e=localStorage.getItem("token");localStorage.setItem("token",""),""!==e&&window.location.reload()}()}),3e3),Promise.reject(e)})),{api:e,token:a,setToken:n}}),[a])},L=function(){var e=O(),t=e.user,a=e.setToken,n=e.setUser,r=N().api,l=Object(c.useState)([]),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(p.useHistory)(),j=function(){r.get("/notifications").then((function(e){d(e.data.data)}))};Object(c.useEffect)((function(){j();var e=setInterval(j,3e4);return function(){return clearInterval(e)}}),[]);function h(e){"1"===e.key&&(a(null),n(null))}for(var m=0,x=0;x<o.length;x++)0==o[x].is_read&&m++;return Object(i.jsxs)(f.a.Header,{style:{height:48,backgroundColor:"white",position:"fixed",zIndex:2,width:"calc(100% - 280px)",boxShadow:"0 1px 4px rgba(0,21,41,.08)",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(i.jsx)(v.a,{trigger:"click",title:"Notifications",content:function(){return Object(i.jsx)(g.b,{style:{width:300},itemLayout:"horizontal",dataSource:o,renderItem:function(e){return Object(i.jsx)(g.b.Item,{children:Object(i.jsx)(g.b.Item.Meta,{title:Object(i.jsx)("a",{onClick:function(){r.post("/notifications/"+e.id).then((function(){b.push(e.url)}))},children:e.title}),description:e.sub_title})})}})},children:Object(i.jsx)(y.a,{icon:Object(i.jsx)(_.a,{}),style:{marginRight:10},children:Object(i.jsx)(I.a,{count:m})})}),Object(i.jsx)(E.a,{trigger:"click",placement:"bottomRight",overlay:function(){return Object(i.jsx)(S.a,{children:Object(i.jsx)(S.a.Item,{onClick:h,icon:Object(i.jsx)(C.a,{style:{color:"red"}}),children:"Se d\xe9connecter"},"1")})},children:Object(i.jsxs)(y.a,{children:[t.username," ",Object(i.jsx)(T.a,{})]})})]})},D=a(536),U=a(537),M=a(57),H=a(283),P=a(288),V=a(528),w="Champ obligatoire",B=function(e){var t=e.title,a=e.withBack,n=e.loading,r=e.selectedSiderKey,l=e.children,s=Object(p.useHistory)(),o=O().setSelectedSiderKey;return Object(c.useEffect)((function(){o(r||"")}),[]),Object(c.useEffect)((function(){document.title=t?t+" - "+nt.appName:nt.appName}),[t]),n&&a?Object(i.jsxs)("div",{style:{padding:15},children:[Object(i.jsx)(y.a,{icon:Object(i.jsx)(V.a,{}),onClick:function(){return s.goBack()}}),Object(i.jsx)("hr",{}),Object(i.jsx)(P.a,{})]}):n?Object(i.jsx)("div",{style:{padding:15},children:Object(i.jsx)(P.a,{})}):Object(i.jsxs)("div",{style:{padding:15},children:[a&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[Object(i.jsx)(y.a,{icon:Object(i.jsx)(V.a,{}),onClick:function(){return s.goBack()}}),Object(i.jsx)("h1",{style:{marginLeft:20},children:t})]}),Object(i.jsx)("hr",{})]}),!a&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:t}),Object(i.jsx)("hr",{})]}),l]})},G=(a(387),a(116)),F=a(260),q=a(74),Y=a(214),K=a(522),z=function(e){var t=e.value,a=e.title,c=e.icon,n=e.suffix,r=e.color,l=void 0===r?"#000":r;return Object(i.jsx)(q.a,{span:8,children:Object(i.jsx)(Y.a,{children:Object(i.jsx)(K.a,{title:a,value:t,precision:0,valueStyle:{color:l},prefix:c,suffix:n})})})};function W(){var e=O().api,t=Object(c.useState)({capacity_logistics_vl:1,operationel_vl:0,non_exploite_vl:0,affecte_vl:0,en_panne_vl:0,accedente_vl:0}),a=Object(u.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(!0),s=Object(u.a)(l,2),o=s[0],d=s[1],j=function(){e.get("/dashboard_vl").then((function(e){r(e.data.data),d(!1)}))};if(Object(c.useEffect)((function(){j();var e=setInterval(j,3e4);return function(){return clearInterval(e)}}),[]),o||!n)return Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})});var h=n.non_exploite_vl,m=n.affecte_vl,p=n.en_panne_vl,x=n.accedente_v,f=n.capacity_logistics_vl,g=n.operationel_vl,v=n.non_exploite_vl/n.capacity_logistics_vl;n.affecte_vl,n.capacity_logistics_vl,n.en_panne_vl,n.capacity_logistics_vl,n.accedente_v,n.capacity_logistics_vl;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(G.a,{children:[Object(i.jsx)(z,{value:f,icon:Object(i.jsx)(M.b,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Capacit\xe9",color:"#000"}),Object(i.jsx)(z,{value:g,icon:Object(i.jsx)(M.b,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Op\xe9rationel",color:"green"}),Object(i.jsx)(z,{value:m,icon:Object(i.jsx)(M.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Affect\xe9",color:"blue"}),Object(i.jsx)(z,{value:h,icon:Object(i.jsx)(M.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Non exploit\xe9",color:"#9c27b0"}),Object(i.jsx)(z,{value:p,icon:Object(i.jsx)(M.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"En panne",color:"#faad14"}),Object(i.jsx)(z,{value:x,icon:Object(i.jsx)(M.c,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Accedent\xe9",color:"red"})]})})}for(var J=function(){var e=O().api,t=(Object(c.useRef)(null),Object(c.useState)({capacity_logistics_vl:0,operationel_vl:0,non_exploite_vl:0,affecte_vl:0,en_panne_vl:0,accedente_vl:0})),a=Object(u.a)(t,2),n=(a[0],a[1]);return Object(c.useEffect)((function(){e.get("/dashboard_vl").then((function(e){n(e.data.data)}))}),[]),Object(i.jsxs)(B,{title:"Dashboard",children:[Object(i.jsx)(F.a,{orientation:"left",children:Object(i.jsxs)("h1",{children:["V\xe9hicules",Object(i.jsx)("b",{children:" GROUPE LEGER"})]})}),Object(i.jsx)(W,{})]})},X=a(17),Z=a.n(X),Q=a(53),$=a(78),ee=a(68),te=a(61),ae=a(72),ie=a(91),ce=a(213),ne=(a(164),a(520)),re=function(e){var t=e.url,a=e.mapOptionToString,n=e.placeholder,r=e.onSelect,l=e.onChange,s=e.style,o=e.defaultOption,d=O().api,b=Object(c.useState)(""),h=Object(u.a)(b,2),m=(h[0],h[1],Object(c.useState)([])),p=Object(u.a)(m,2),x=p[0],f=p[1];return Object(i.jsx)(ne.a,{options:x,defaultValue:function(){if(o)return a(o)},style:s,onSelect:r,onSearch:function(e){d.get("".concat(t,"?data=").concat(e)).then((function(e){var t=e.data.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:a(e)})}));f(t)}))},onChange:l,placeholder:n})},le=a(189),se=a(530),oe=a(531),de=function(e){var t=e.defaultValue,a=e.onChange,n=Object(c.useState)(0),r=Object(u.a)(n,2),l=r[0],s=r[1];Object(c.useEffect)((function(){t&&s(t)}),[]),Object(c.useEffect)((function(){a(l)}),[l]);return Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(i.jsx)(le.a,{type:"circle",percent:l}),Object(i.jsxs)(y.a.Group,{style:{marginTop:5},children:[Object(i.jsx)(y.a,{onClick:function(){var e=l-10;e<0&&(e=0),s(e)},icon:Object(i.jsx)(se.a,{})}),Object(i.jsx)(y.a,{onClick:function(){var e=l+10;e>100&&(e=100),s(e)},icon:Object(i.jsx)(oe.a,{})})]})]})},ue=$.a.Option,be=ee.a.TextArea,je=te.a.Item,he=function(e){var t=e.formItems,a=e.initialValues,c=void 0===a?[]:a,n=e.onFinish,r=e.onFinishFailed,l=e.extra,s=void 0===l?function(){}:l,o=e.loading,d=te.a.useForm(),b=Object(u.a)(d,1)[0];window.form=b;return Object(i.jsxs)(te.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",form:b,layout:"vertical",initialValues:c,onFinish:n,onFinishFailed:r,children:[t.map((function(e,t){if("progress"===e.type)return Object(i.jsx)(je,{name:e.name,label:e.label,hasFeedback:!0,rules:e.rules,children:Object(i.jsx)(de,{defaultValue:c[e.name],onChange:function(t){b.setFieldsValue(e.name,t)}})});if("search"===e.type){e.renderValue;return Object(i.jsx)(je,{name:e.name,label:e.label,hasFeedback:!0,rules:e.rules,children:Object(i.jsx)(re,{url:e.url,defaultOption:c[e.defaultOptionName],mapOptionToString:e.mapOptionToString,onSelect:function(t,a){var i={};i[e.name]=a.id,b.setFieldsValue(i)},onChange:function(t,a){if(!a){var i={};i[e.name]=null,b.setFieldsValue(i)}},placeholder:e.label})})}return"select"===e.type?Object(i.jsx)(je,{name:e.name,label:e.label,hasFeedback:!0,initialValue:e.initialValue,rules:e.rules,children:Object(i.jsx)($.a,{placeholder:"Selection\xe9",children:e.selects.map((function(e,t){return Object(i.jsxs)(ue,{value:e.value,children:[" ",e.label," "]},t)}))})}):"text"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,rules:e.rules,children:Object(i.jsx)(ee.a,Object(j.a)({},e.inputProp))}):"textarea"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,rules:e.rules,children:Object(i.jsx)(be,{})}):"password"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,rules:e.rules,children:Object(i.jsx)(ee.a.Password,{})}):"checkbox"===e.type?Object(i.jsx)(je,{name:e.name,valuePropName:"checked",children:Object(i.jsxs)(ae.a,{children:[" ",e.label," "]})}):"date"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,children:Object(i.jsx)(ie.a,{format:"DD/MM/YYYY",disabledDate:function(t){if(e.disabledDate)return e.disabledDate(t,b)},onChange:function(t){return b.setFieldsValue(e.name,t)},style:{width:"100%"}})}):"rate"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,children:Object(i.jsx)(ce.a,{style:{backgroundColor:"white"},defaultValue:c[e.name]})}):"integer"===e.type?Object(i.jsx)(je,{label:e.label,name:e.name,children:Object(i.jsx)(ee.a,Object(j.a)({type:"number",pattern:"[0-9]*",defaultValue:c[e.name],onChange:function(e){return console.log(e.target.value)}},e.inputProp))}):void 0})),Object(i.jsx)(je,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(y.a,{loading:o,type:"primary",htmlType:"submit",children:"Envoyer"})})),s(b)]}))},me=[{name:"username",label:"Nom d'utilisateur",rules:[{required:!0,message:w}],type:"text"},{name:"firstname",label:"Nom",rules:[{required:!0,message:w}],type:"text"},{name:"lastname",label:"Prenom",rules:[{required:!0,message:w}],type:"text"},{name:"mail",label:"Email",rules:[{required:!0,message:w}],type:"text"},{name:"password",label:"Mot de pass",rules:[{required:!0,message:w}],type:"password"},{name:"poste",label:"Poste",rules:[{required:!0,message:w}],type:"text",selects:[{value:"admin",label:"Administarateur"},{value:"ga",label:"Gestionnaire administaratif"},{value:"gm",label:"Gestionnaire mat\xe9riel"},{value:"com",label:"Commercial"}]},{name:"tel",label:"TEL",rules:[{required:!0,message:w}],type:"text"}],Oe=[{name:"name",label:"Designation",rules:[{required:!0,message:w}],type:"text"}],pe=a(287),xe=a(47),fe=a(532),ge=a(533),ve=a(534),ye=a(204),Ie=function(e,t){if("admin"===e.username)return!0;var a=!1;return e.roles.map((function(e,i){t===e.name&&(a=!0)})),a},Ee=function(e){var t=e.row,a=O(),n=a.api,r=(a.user,c.useState(!1)),l=Object(u.a)(r,2),s=l[0],o=l[1],d=c.useState(null),j=Object(u.a)(d,2),h=j[0],m=j[1];return Object(i.jsx)(v.a,{content:function(){return Object(i.jsxs)(i.Fragment,{children:[h&&Object(i.jsxs)(g.b,{children:[Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[PROPRI\xc9TAIRE]"})," ",h.prop]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[ANCIEN MATRICULE]"})," ",h.old_matricule]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[GENRE]"})," ",h.genre]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[TYPE]"})," ",h.type]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[PUISSANCE]"})," ",h.puissance]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[ENERGIE]"})," ",h.energie]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[CARROSSERIE]"})," ",h.carrosserie]}),Object(i.jsxs)(g.b.Item,{children:[Object(i.jsx)(pe.a.Text,{mark:!0,children:"[COULEUR]"})," ",h.color?h.color:"/"]})]}),!h&&Object(i.jsx)(b.a,{})]})},title:h?h.code_gps+" | "+h.matricule:"",trigger:"click",visible:s,onVisibleChange:function(e){return o(e)},children:Object(i.jsx)(y.a,{onClick:function(){n.get("/cars/"+t.id).then((function(e){m(e.data.data)}))},shape:"circle",icon:Object(i.jsx)(M.g,{})})})},Se=[{name:"matricule",label:"Matricule",rules:[{required:!0,message:w}],type:"text"},{name:"prop",label:"prop",rules:[{required:!0,message:w}],type:"select",selects:[{value:"CONDOR LOGISTICS",label:"CONDOR LOGISTICS"},{value:"CONDOR ELECTRONICS",label:"CONDOR ELECTRONICS"},{value:"TRAVOCOVIA",label:"TRAVOCOVIA"}]},{name:"old_matricule",label:"old_matricule",rules:[{required:!0,message:w}],type:"text"},{name:"code_gps",label:"code_gps",rules:[{required:!0,message:w}],type:"text"},{name:"genre",label:"genre",rules:[{required:!0,message:w}],type:"select",selects:[{label:"V P",value:"V P"},{label:"CAMION",value:"CAMION"},{label:"TRACTEUR",value:"TRACTEUR"},{label:"REMORQUE",value:"REMORQUE"},{label:"BUS",value:"BUS"},{label:"UTILITAIRE",value:"UTILITAIRE"},{label:"MICRO BUS",value:"MICRO BUS"},{label:"V H",value:"V H"},{label:"MOTO",value:"MOTO"},{label:"AMBULANCE",value:"AMBULANCE"},{label:"MOTOCYCLE",value:"MOTOCYCLE"},{label:"RETRO CHARGEUR",value:"RETRO CHARGEUR"},{label:"CHARIOT ELEVATEUR",value:"CHARIOT ELEVATEUR"},{label:"CHARIOT ELEVATEUR  1.6T-MAL",value:"CHARIOT ELEVATEUR  1.6T-MAL"},{label:"CHARIOT ELEVATEUR  2.5T",value:"CHARIOT ELEVATEUR  2.5T"},{label:"CHARIOT ELEVATEUR  2T-MAL",value:"CHARIOT ELEVATEUR  2T-MAL"},{label:"CHARIOT ELEVATEUR 03T",value:"CHARIOT ELEVATEUR 03T"},{label:"CHARIOT ELEVATEUR 5T-MAL",value:"CHARIOT ELEVATEUR 5T-MAL"},{label:"CHARIOT ELEVATEUR -MAL",value:"CHARIOT ELEVATEUR -MAL"},{label:"EXCAVATRICE",value:"EXCAVATRICE"},{label:"STAKAR",value:"STAKAR"},{label:"STATION D'EPURATION",value:"STATION D'EPURATION"},{label:"TANDEM VIBRATOIR",value:"TANDEM VIBRATOIR"},{label:"TRANSPALETTE ELECTRIQUE  1.6T ",value:"TRANSPALETTE ELECTRIQUE  1.6T "},{label:"TRANSPALETTE GERBEUR  1.4T-MAL",value:"TRANSPALETTE GERBEUR  1.4T-MAL"}]},{name:"marque",label:"marque",rules:[{required:!0,message:w}],type:"select",selects:[{label:"RENAULT CLIO",value:"RENAULT CLIO"},{label:"DACIA SENDERO",value:"DACIA SENDERO"},{label:"CHEVROLET AVIO",value:"CHEVROLET AVIO"},{label:"CHEVROLET BREAK",value:"CHEVROLET BREAK"},{label:"OPEL",value:"OPEL"},{label:"CHEVROLET SAIL",value:"CHEVROLET SAIL"},{label:"RENAULT SYMBOL",value:"RENAULT SYMBOL"},{label:"FOTON",value:"FOTON"},{label:"DACIA LOGAN",value:"DACIA LOGAN"},{label:"DFSK",value:"DFSK"},{label:"CHEVROLET CRUZE",value:"CHEVROLET CRUZE"},{label:"PEUGEOT PARTNER",value:"PEUGEOT PARTNER"},{label:"SUSUKI SWIFT",value:"SUSUKI SWIFT"},{label:"CHEVROLET TRAX",value:"CHEVROLET TRAX"},{label:"CHEVROLET AVIO ",value:"CHEVROLET AVIO "},{label:"PEUGEOT 207",value:"PEUGEOT 207"},{label:"CHANGHE",value:"CHANGHE"},{label:"NISSAN SUNNY",value:"NISSAN SUNNY"},{label:"HONDA ODYSSEY",value:"HONDA ODYSSEY"},{label:"MITSUBISHI MIRAGE STAR",value:"MITSUBISHI MIRAGE STAR"},{label:"NISSAN NEW SUNNY ",value:"NISSAN NEW SUNNY "},{label:"HYUNDAI VERNA",value:"HYUNDAI VERNA"},{label:"MERCEDES-Benz",value:"MERCEDES-Benz"},{label:"CHEVROLET SPARK",value:"CHEVROLET SPARK"},{label:"KIA PICANTO",value:"KIA PICANTO"},{label:"TOYOTA COROLLA",value:"TOYOTA COROLLA"},{label:"BENTLIY",value:"BENTLIY"},{label:"PAOLETTI RACING",value:"PAOLETTI RACING"},{label:"CHEVROLET SONIC",value:"CHEVROLET SONIC"},{label:"TOYOTA YARIS",value:"TOYOTA YARIS"},{label:"AUDI",value:"AUDI"},{label:"HYUNDAI GENESIS",value:"HYUNDAI GENESIS"},{label:"KIA SPORTAGE",value:"KIA SPORTAGE"},{label:"PEUGEOT 301",value:"PEUGEOT 301"},{label:"SEAT / IBIZA",value:"SEAT / IBIZA"},{label:"VOLKSWAGEN POLO",value:"VOLKSWAGEN POLO"},{label:"CITROEN CI-ELYSSE",value:"CITROEN CI-ELYSSE"},{label:"VMS",value:"VMS"},{label:"SKODA RAPIDE",value:"SKODA RAPIDE"},{label:"RENAULT FLUENCE",value:"RENAULT FLUENCE"},{label:"RENAULT GLR",value:"RENAULT GLR"},{label:"RENAULT",value:"RENAULT"},{label:"VOLKWAGEN",value:"VOLKWAGEN"},{label:"IVECO",value:"IVECO"},{label:"MERCEDES ACTROS",value:"MERCEDES ACTROS"},{label:"DAIHATSU",value:"DAIHATSU"},{label:"NISSAN PIK-UP",value:"NISSAN PIK-UP"},{label:"DAIMER,BENZ",value:"DAIMER,BENZ"},{label:"ISUZU",value:"ISUZU"},{label:"RENAULT KANGO",value:"RENAULT KANGO"},{label:"FAW",value:"FAW"},{label:"CHENG LONG",value:"CHENG LONG"},{label:"DONGFENG",value:"DONGFENG"},{label:"HYUNDAI HD17",value:"HYUNDAI HD17"},{label:"HENG TONG",value:"HENG TONG"},{label:"KIA",value:"KIA"},{label:"KIA 2700",value:"KIA 2700"},{label:"PEUGEOT EXPERT",value:"PEUGEOT EXPERT"},{label:"MERCEDES AXOR",value:"MERCEDES AXOR"},{label:"MITSUBISHI",value:"MITSUBISHI"},{label:"NISSAN",value:"NISSAN"},{label:"NISSAN TIDA",value:"NISSAN TIDA"},{label:"RENAULT MEGANE",value:"RENAULT MEGANE"},{label:"JAC",value:"JAC"},{label:"HYUNDAI HD 65",value:"HYUNDAI HD 65"},{label:"TOYOTA HIACE",value:"TOYOTA HIACE"},{label:"YOUNGMAN",value:"YOUNGMAN"},{label:"TOYOTA HILUX",value:"TOYOTA HILUX"},{label:"TOYOTA",value:"TOYOTA"},{label:"SSANG YONG",value:"SSANG YONG"},{label:"CITROEN BERLINGO",value:"CITROEN BERLINGO"},{label:"CHEVROLET COLORADO",value:"CHEVROLET COLORADO"},{label:"PEUGEOT BOXER",value:"PEUGEOT BOXER"},{label:"SKODA OCTAVIA",value:"SKODA OCTAVIA"},{label:"YUEJIN",value:"YUEJIN"},{label:"DFAC",value:"DFAC"},{label:"SHAANQI",value:"SHAANQI"},{label:"RENAULT MASTER",value:"RENAULT MASTER"},{label:"HYUNDAI H 100",value:"HYUNDAI H 100"},{label:"JINBEI",value:"JINBEI"},{label:"TATA",value:"TATA"},{label:"KIA ",value:"KIA "},{label:"HIGER",value:"HIGER"},{label:"MITSUBISHI FUSO",value:"MITSUBISHI FUSO"},{label:"CITROEN CI-ELYSEE",value:"CITROEN CI-ELYSEE"},{label:"HYUNDAI HD 160",value:"HYUNDAI HD 160"},{label:"HINO",value:"HINO"},{label:"TOYOTA COASTER ",value:"TOYOTA COASTER "},{label:"TOYOTA RAV4",value:"TOYOTA RAV4"},{label:"MERCEDES-BENZ GLC 250",value:"MERCEDES-BENZ GLC 250"},{label:"TOYOTA HILUX REVO",value:"TOYOTA HILUX REVO"},{label:"NEW INTERNATIONAL PAYSTAR",value:"NEW INTERNATIONAL PAYSTAR"},{label:"SCANIA",value:"SCANIA"},{label:"NISSAN NAVARA",value:"NISSAN NAVARA"},{label:"MERCEDES",value:"MERCEDES"},{label:"RANGE ROVER",value:"RANGE ROVER"},{label:"HYUNDAI HD 35",value:"HYUNDAI HD 35"},{label:"PEUGEOT 2008",value:"PEUGEOT 2008"},{label:"SKODA YETI",value:"SKODA YETI"},{label:"KIA RIO",value:"KIA RIO"},{label:"VANHOOL",value:"VANHOOL"},{label:"FRUEHAUF",value:"FRUEHAUF"},{label:"TRAILOR",value:"TRAILOR"},{label:"TROULLIET",value:"TROULLIET"},{label:"SNVI",value:"SNVI"},{label:"KRONE",value:"KRONE"},{label:"DPR TRAILER",value:"DPR TRAILER"},{label:"SCHMITZ",value:"SCHMITZ"},{label:"ACI",value:"ACI"},{label:"MAF-TRAILLER",value:"MAF-TRAILLER"}]},{name:"type",label:"type",rules:[{required:!0,message:w}],type:"text"},{name:"puissance",label:"puissance",rules:[{required:!0,message:w}],type:"text"},{name:"energie",label:"energie",rules:[{required:!0,message:w}],type:"text"},{name:"carrosserie",label:"carrosserie",rules:[{required:!0,message:w}],type:"text"},{name:"color",label:"color",type:"text"}],_e=[{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:w}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"name",label:"Designation",type:"select",rules:[{required:!0,message:w}],selects:[{value:"EN PANNE PARC",label:"EN PANNE (PARC)"},{value:"EN PANNE ATELIER",label:"EN PANNE (ATELIER)"},{value:"OPERATIONNEL",label:"OPERATIONNEL"},{value:"ACCIDENTE",label:"ACCIDENTE"}]},{name:"state_date",label:"Date",type:"date",rules:[{required:!0,message:w}]},{name:"observation",label:"Observation",type:"textarea"}],Ce=a(273),Te=[{name:"firstname",label:"Nom",rules:[{required:!0,message:w}],type:"text"},{name:"lastname",label:"Prenom",rules:[{required:!0,message:w}],type:"text"},{name:"tel",label:"tel",type:"text"},{name:"code_paie",label:"Code paie",type:"integer"},{name:"type",label:"Type",type:"select",selects:[{label:"Chauffeur SR ",value:"Chauffeur SR "},{label:"Chauffeur TC Bus",value:"Chauffeur TC Bus"},{label:"Chauffeur  VL ",value:"Chauffeur  VL "},{label:"Chauffeur  PL",value:"Chauffeur  PL"},{label:"Chauffeur Ambulancier",value:"Chauffeur Ambulancier"},{label:"AUTRE",value:"AUTRE"}]}],Re=[{name:"code",label:"Code (SAP)",type:"text"},{name:"designation",label:"Designation",rules:[{required:!0,message:w}],type:"text"},{name:"localite",label:"Localit\xe9",type:"text"},{name:"tel",label:"TEL",type:"text"},{name:"client_id",label:"Client hi\xe9rarchique",type:"search",url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}}],Ae=a(65),ke=a(26),Ne=a.n(ke),Le=a(104),De=a(523),Ue=[{name:"client_id",label:"Client",type:"search",rules:[{required:!0,message:w}],url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:w}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"date_decharge",label:"Date d\xe9charge",rules:[{required:!0,message:w}],type:"date"},{name:"date_fin_prestation",label:"Date fin prestation",type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_decharge")}}],Me=[{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:w}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"motif_restitition",label:"Motif de restitution",rules:[{required:!0,message:w}],type:"select",selects:[{value:"FIN DE CONTRAT",label:"FIN DE CONTRAT"},{value:"A LA DEMANDE DE CLIENT",label:"\xc0 LA DEMANDE DE CLIENT"},{value:"VEHICULE EN PANNE",label:"VEHICULE EN PANNE"}]},{name:"date_restitition",label:"Date restitution",rules:[{required:!0,message:w}],type:"date"},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:w}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:w}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],He=a(187),Pe=a(188),Ve=a(194),we=a(190),Be={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},Ge=function(e){Object(Ve.a)(a,e);var t=Object(we.a)(a);function a(){return Object(He.a)(this,a),t.apply(this,arguments)}return Object(Pe.a)(a,[{key:"render",value:function(){var e,t,a,c=this.props.checklist;return Object(i.jsxs)("div",{style:Be.page,children:[Object(i.jsxs)("div",{style:Be.pageHeader,children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("img",{style:{width:"40mm"},src:"/logo.png"})}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(i.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(i.jsx)("div",{children:"DECHARGE"}),Object(i.jsx)("div",{children:"N\xb0".concat(c["decharges.id"]," DL/").concat(Z()(c["decharges.date_decharge"]).year())})]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(i.jsxs)("div",{style:Be.pageBody,children:[Object(i.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(i.jsx)("b",{children:"Client: "})," ",c["clients.designation"]?c["clients.designation"]:"/","."]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Marque:"})," ",c["cars.marque"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Matricule:"})," ",c["cars.matricule"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",c["cars.code_gps"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Odometre:"})," ",null===c||void 0===c?void 0:c.odometre]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",c.cle_vehicule]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Niveau carburant:"})," ",c.niveau_carburant,"%"]})]})]}),Object(i.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsxs)("b",{children:["Date d\xe9charge le: ",Z()(c["decharges.date_decharge"]).format("DD-MM-Y")]}),Object(i.jsx)("br",{}),Object(i.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(i.jsxs)("b",{children:[" ",(null===(e=c["drivers.firstname"])||void 0===e?void 0:e.toUpperCase())+" "+(null===(t=c["drivers.lastname"])||void 0===t?void 0:t.toUpperCase())]}),", ",Object(i.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(i.jsx)("b",{children:c["drivers.tel"]}),Object(i.jsx)("br",{}),"Reconnais avoir re\xe7u ce jour"," ",Object(i.jsx)("b",{children:null===(a=Z()(c.date_checklist))||void 0===a?void 0:a.format("DD-MM-Y")}),":",Object(i.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(i.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[" ",Object(i.jsx)(Fe,{checklist:c,name:"carte_grise",title:"Carte grise"}),Object(i.jsx)(Fe,{checklist:c,name:"assurance",title:"Assurance"}),Object(i.jsx)(Fe,{checklist:c,name:"vignette",title:"Vignette"}),Object(i.jsx)(Fe,{checklist:c,name:"scanner",title:"scanner"}),Object(i.jsx)(Fe,{checklist:c,name:"permis_circuler",title:"Permis circuler"}),Object(i.jsx)(Fe,{checklist:c,name:"carnet_enter",title:"carnet_enter"}),Object(i.jsx)(Fe,{checklist:c,name:"carte_gpl",title:"carte_gpl"})]}),Object(i.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(i.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[Object(i.jsx)(Fe,{checklist:c,name:"roue_secour",title:"Roue de secours"}),Object(i.jsx)(Fe,{checklist:c,name:"cle_roue",title:"Cl\xe9 Roue"}),Object(i.jsx)(Fe,{checklist:c,name:"gillet",title:"Gillet"}),Object(i.jsx)(Fe,{checklist:c,name:"cric",title:"Cric"}),Object(i.jsx)(Fe,{checklist:c,name:"poste_radio",title:"Poste radio"}),Object(i.jsx)(Fe,{checklist:c,name:"extincteur",title:"Extincteur"}),Object(i.jsx)(Fe,{checklist:c,name:"boite_pharm",title:"Boite pharmacie"}),Object(i.jsx)(Fe,{checklist:c,name:"triangle",title:"Triangle"}),Object(i.jsx)(Fe,{checklist:c,name:"pochette_cle",title:"Pochette cl\xe9s"})]})]}),Object(i.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{children:"Observations: "})})," ",c.observation_checklist?c.observation_checklist:"/"]})]}),Object(i.jsxs)("div",{style:Be.pageFooter,children:[Object(i.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(i.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(i.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+c["users.username"]," |"," ","Imprimer Le: ".concat(Z()().format("D-M-yy"))," | "," ",document.location.toString()]})]})]})}}]),a}(n.a.Component),Fe=function(e){var t=e.checklist,a=e.name,c=e.title;return 1==t[a]?Object(i.jsxs)("div",{style:{margin:"2mm"},children:[Object(i.jsx)("input",{style:{marginRight:"2mm"},checked:1==t[a],type:"checkbox"}),Object(i.jsx)("b",{children:c})]}):Object(i.jsx)(i.Fragment,{})},qe=a(89),Ye=De.a.Step,Ke=a(529),ze=a(535),We={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},Je=function(e){Object(Ve.a)(a,e);var t=Object(we.a)(a);function a(){return Object(He.a)(this,a),t.apply(this,arguments)}return Object(Pe.a)(a,[{key:"render",value:function(){var e,t,a,c,n=this.props.decharge,r=null===n||void 0===n||null===(e=n.restitition)||void 0===e?void 0:e.checklist;return Object(i.jsxs)("div",{style:We.page,children:[Object(i.jsxs)("div",{style:We.pageHeader,children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("img",{style:{width:"40mm"},src:"/logo.png"})}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(i.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(i.jsx)("div",{children:"RESTITUTION (DECHARGE)"}),Object(i.jsx)("div",{children:"N\xb0".concat(n["decharges.id"]," DL/").concat(Z()(n["decharges.date_decharge"]).year())})]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(i.jsxs)("div",{style:We.pageBody,children:[Object(i.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(i.jsx)("b",{children:"Client: "})," ",n["clients.designation"]?n["clients.designation"]:"/","."]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Marque:"})," ",n["cars.marque"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Matricule:"})," ",n["cars.matricule"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",n["cars.code_gps"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Odometre:"})," ",null===r||void 0===r?void 0:r.odometre]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",r.cle_vehicule]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Niveau carburant:"})," ",r.niveau_carburant,"%"]})]})]}),Object(i.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(i.jsxs)("b",{children:[" ",(null===(t=n["drivers.firstname"])||void 0===t?void 0:t.toUpperCase())+" "+(null===(a=n["drivers.lastname"])||void 0===a?void 0:a.toUpperCase())]}),", ",Object(i.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(i.jsx)("b",{children:n["drivers.tel"]}),Object(i.jsx)("br",{}),"Reconnais avoir restitu\xe9 ce jour"," ",Object(i.jsx)("b",{children:null===(c=Z()(n["decharges.date_decharge"]))||void 0===c?void 0:c.format("D-M-yy")}),":",Object(i.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(i.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[" ",console.dir(r),Object(i.jsx)(Xe,{checklist:r,name:"carte_grise",title:"Carte grise"}),Object(i.jsx)(Xe,{checklist:r,name:"assurance",title:"Assurance"}),Object(i.jsx)(Xe,{checklist:r,name:"vignette",title:"Vignette"}),Object(i.jsx)(Xe,{checklist:r,name:"scanner",title:"scanner"}),Object(i.jsx)(Xe,{checklist:r,name:"permis_circuler",title:"Permis circuler"}),Object(i.jsx)(Xe,{checklist:r,name:"carnet_enter",title:"carnet_enter"}),Object(i.jsx)(Xe,{checklist:r,name:"carte_gpl",title:"carte_gpl"})]}),Object(i.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(i.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[Object(i.jsx)(Xe,{checklist:r,name:"roue_secour",title:"Roue de secours"}),Object(i.jsx)(Xe,{checklist:r,name:"cle_roue",title:"cl\xe9 Roue"}),Object(i.jsx)(Xe,{checklist:r,name:"gillet",title:"Gillet"}),Object(i.jsx)(Xe,{checklist:r,name:"cric",title:"Cric"}),Object(i.jsx)(Xe,{checklist:r,name:"poste_radio",title:"Poste radio"}),Object(i.jsx)(Xe,{checklist:r,name:"extincteur",title:"Extincteur"}),Object(i.jsx)(Xe,{checklist:r,name:"boite_pharm",title:"Boite pharmacie"}),Object(i.jsx)(Xe,{checklist:r,name:"triangle",title:"Triangle"}),Object(i.jsx)(Xe,{checklist:r,name:"pochette_cle",title:"Pochette cl\xe9s"})]})]}),Object(i.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{children:"Observations: "})})," ",r.observation?r["checklists.observation"]:"/",Object(i.jsx)("br",{}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Les Documents non restituer"}),":"," ",1===n.carte_grise&&0===r.carte_grise&&"Carte grise, ",1===n.assurance&&0===r.assurance&&"Assurance, ",1===n.vignette&&0===r.vignette&&"Vignatte, ",1===n.scanner&&0===r.scanner&&"Scanner, ",1===n.permis_circuler&&0===r.permis_circuler&&"Permis circuler, ",1===n.carnet_enter&&0===r.carnet_enter&&"Carnet enter, ",1===n.carte_gpl&&0===r.carte_gpl&&"Carte_gpl, "]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Les Equipments non restituer"}),":"," ",1===n.roue_secour&&0===r.roue_secour&&"Roue secour, ",1===n.cle_roue&&0===r.cle_roue&&"Cl\xe9 Roue, ",1===n.gillet&&0===r.gillet&&"Gillet, ",1===n.cric&&0===r.cric&&"Cric, ",1===n.poste_radio&&0===r.poste_radio&&"Poste radio, ",1===n.extincteur&&0===r.extincteur&&"Extincteur, ",1===n.boite_pharm&&0===r.boite_pharm&&"Boite pharmacier, ",1===n.triangle&&0===r.triangle&&"Triangle, ",1===n.pochette_cle&&0===r.pochette_cle&&"Pochette des cl\xe9s, "]})]})]})]}),Object(i.jsxs)("div",{style:We.pageFooter,children:[Object(i.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(i.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(i.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+n["users.username"]," |"," ","Imprimer Le: ".concat(Z()().format("D-M-yy"))," | "," ",document.location.toString()]})]})]})}}]),a}(n.a.Component),Xe=function(e){var t=e.checklist,a=e.name,c=e.title;return t[a]?Object(i.jsxs)("div",{style:{margin:"2mm"},children:[Object(i.jsx)("input",{style:{marginRight:"2mm"},checked:t[a],type:"checkbox"}),Object(i.jsx)("b",{children:c})]}):Object(i.jsx)(i.Fragment,{})},Ze=function(e){var t=e.component,a=e.onDelete,r=e.disabledDelete,l=Object(c.useRef)(null),s=Object(qe.useReactToPrint)({content:function(){return l.current},onBeforeGetContent:function(){var e=Object(Le.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(y.a,{icon:Object(i.jsx)(M.h,{}),onClick:s}),Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:a,onCancel:function(){},okText:"Oui",cancelText:"No",disabled:r,children:Object(i.jsx)(y.a,{icon:Object(i.jsx)(M.i,{}),disabled:r})}),n.a.cloneElement(t,{ref:l})]})},Qe=(a(506),De.a.Step,a(108)),$e=a(521),et=[],tt=0;tt<20;tt++)et.push({key:tt.toString(),matricule:"content".concat(tt+1),description:"description of content".concat(tt+1)});for(var at=[],it=0;it<20;it++)at.push({key:it.toString(),matricule:"content".concat(it+1),description:"description of content".concat(it+1)});var ct=[{name:"code",label:"Code (SAP)",rules:[{required:!0,message:w}],type:"text"},{name:"designation",label:"Designation",rules:[{required:!0,message:w}],type:"text"},{name:"localite",label:"Localit\xe9",type:"text"},{name:"tel",label:"TEL",type:"text"},{name:"client_id",label:"Client hi\xe9rarchique",type:"search",url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}}],nt={appName:"GPark v1.0.0",routes:[{path:"/",name:"dashboard",label:"Tableau de bord",role:"DASHBOARD",component:J,icon:Object(i.jsx)(D.a,{}),authority:["dashboard"],hideInSide:!0,exact:!0},{path:"/dashboard",name:"dashboard",label:"Tableau de bord",role:"DASHBOARD",component:J,icon:Object(i.jsx)(D.a,{}),authority:["dashboard"]},{name:"users",label:"Utilisateurs",icon:Object(i.jsx)(U.a,{}),role:"UTILISATEURS",routes:[{path:"/users/add",name:"add-user",label:"Ajouter utilisateur",component:function(){var e=O().api;return Object(i.jsx)(B,{title:"Nauveau Utilisateur",selectedSiderKey:"add-users",children:Object(i.jsx)(he,{formItems:me,onFinish:function(t){e.post("/auth/users",t).then((function(e){R.b.info("Bien ajouter")}))}})})}},{path:"/users",name:"list-users",label:"Liste des utilisateurs",component:function(){var e=O().api,t=Object(p.useHistory)(),a=[{title:"Nom d'utilisateur",dataIndex:"username",copyable:!0,filters:!0,sorter:!0},{title:"Nom",dataIndex:"firstname",sorter:!0,hideInSearch:!0},{title:"Pr\xe9nom",dataIndex:"lastname",sorter:!0,hideInSearch:!0},{title:"Poste",dataIndex:"poste",sorter:!0,hideInSearch:!0},{title:"Email",dataIndex:"mail",valueType:"email",sorter:!0,hideInSearch:!0},{title:"Date Cre\xe9ation",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0},{title:"Tel",dataIndex:"tel",copyable:!0,sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(a,c,n,r){return[Object(i.jsx)("a",{onClick:function(){e.post("auth/users/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),r.reload()}))},children:"Supprimer"}),Object(i.jsx)("a",{onClick:function(){t.push("/users/edit/"+c.id)},children:"Modifier"})]}}],n=c.useRef();return window.actionRef=n,Object(i.jsx)(B,{title:"Utilisateurs",selectedSiderKey:"list-users",children:Object(i.jsx)(Q.a,{actionRef:n,size:"small",search:!0,columns:a,ellipsis:!0,request:function(t,a,i){return console.log(a),a&&(t.sortBy=Object.keys(a)[0],t.sort=Object.values(a)[0]),e.get("/auth/users",{params:t,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/users/edit/:id",name:"edit-user",label:"Modifier l'utilisateur",component:function(){var e=Object(p.useRouteMatch)().params,t=O().api,a=Object(c.useState)(!0),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1];return Object(c.useEffect)((function(){t.get("/auth/users/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(B,{withBack:!0,loading:r,title:"Modifie l'utilisateur",selectedSiderKey:"list-users",children:Object(i.jsx)(he,{formItems:me,initialValues:d,onFinish:function(a){t.put("/auth/users/"+e.id,a).then((function(e){R.b.info("Bien ajouter")}))}})})},hideInSide:!0},{path:"/users/cars",name:"user-cars-users",label:"utilisateurs <> v\xe9hicules",component:function(){var e=O().api,t=Object(c.useState)([]),a=Object(u.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)({user_id:null,cars_id:[],loadingCars:!0,loadingUserCars:!1,carGroupe:"vh"}),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(c.useState)([]),h=Object(u.a)(b,2),m=h[0],p=h[1];window.data=o;var x=function(){o.user_id&&o.cars_id&&e.post("/auth/users/cars",{user_id:o.user_id,cars_id:o.cars_id}).then((function(e){R.b.info("Bien ajouter")}))};Object(c.useEffect)((function(){o.user_id&&(d(Object(j.a)(Object(j.a)({},o),{},{loadingUserCars:!0})),e.get("auth/users/cars/"+o.user_id).then((function(e){var t=e.data.data.map((function(e){return e.id}));d(Object(j.a)(Object(j.a)({},o),{},{cars_id:t,loadingUserCars:!1}))})))}),[o.user_id]),Object(c.useEffect)((function(){e.get("allcars").then((function(e){var t=e.data.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:Number.parseInt(e.id)})}));d(Object(j.a)(Object(j.a)({},o),{},{loadingCars:!1})),r(t)}))}),[o.carGroupe]);return Object(i.jsx)(B,{title:"Affect\xe9 des vehicules au utilisateur",selectedSiderKey:"user-cars-users",children:Object(i.jsxs)(te.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:x,children:[Object(i.jsx)(te.a.Item,{label:"Utilisateur",name:"user_id",children:Object(i.jsx)(re,{url:"auth/users/search",style:{width:200},mapOptionToString:function(e){return e.firstname+" "+e.lastname},onSelect:function(e,t){d(Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}))},onChange:function(e,t){d(t?Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}):Object(j.a)(Object(j.a)({},o),{},{user_id:null}))},placeholder:"Rechercher ..."})}),(o.loadingCars||o.loadingUserCars)&&Object(i.jsx)(P.a,{}),!(o.loadingCars||o.loadingUserCars)&&o.user_id&&Object(i.jsx)(te.a.Item,{label:"V\xe9hicules affect\xe9",name:"carsId",children:Object(i.jsx)($e.a,{rowKey:function(e){return e.id},showSearch:!0,dataSource:n,titles:["Tout","Affect\xe9"],targetKeys:o.cars_id,selectedKeys:m,onChange:function(e,t,a){d(Object(j.a)(Object(j.a)({},o),{},{cars_id:e}))},onSelectChange:function(e,t){p([].concat(Object(Qe.a)(e),Object(Qe.a)(t)))},render:function(e){return e.code_gps+" | "+e.matricule},style:{marginBottom:16},listStyle:{width:250,height:300},disabled:!1})}),Object(i.jsx)(te.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(y.a,{type:"primary",onClick:x,children:"Envoyer"})}))]}))})},exact:!0},{path:"/roles/add",name:"add-roles",label:"Ajouter role",component:function(){var e=O().api,t=Object(p.useHistory)();return Object(i.jsx)(B,{title:"Nauveau Role",children:Object(i.jsx)(he,{formItems:Oe,onFinish:function(a){a.name=a.name.toUpperCase(),e.post("/roles",a).then((function(e){R.b.info("Bien ajouter"),t.push("/roles")}))}})})},exact:!0},{path:"/roles",name:"list-roles",label:"Liste des roles",component:function(){var e=O().api,t=(Object(p.useHistory)(),[{title:"designantion",dataIndex:"name",copyable:!0,filters:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(t,a,c,n){return[Object(i.jsx)("a",{onClick:function(){e.post("roles/delete/"+a.id).then((function(){R.b.info("Bien Supprim\xe9"),n.reload()}))},children:"Supprimer"})]}}]);return Object(i.jsx)(B,{title:"Roles",children:Object(i.jsx)(Q.a,{size:"small",search:!0,columns:t,ellipsis:!0,request:function(t,a,i){return console.log(a),a&&(t.sortBy=Object.keys(a)[0],t.sort=Object.values(a)[0]),e.get("roles",{params:t,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/users/roles",name:"users-roles",label:"Utilisateurs <> Roles",component:function(){var e=O().api;window.api=e;var t=Object(c.useState)([]),a=Object(u.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)({user_id:null,roles_id:[],loadingRoles:!0,loadingUserRoles:!1}),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(c.useState)([]),h=Object(u.a)(b,2),m=h[0],p=h[1];window.data=o;Object(c.useEffect)((function(){e.get("roles").then((function(e){var t=e.data,a=t.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:e.id})}));d(Object(j.a)(Object(j.a)({},t),{},{loadingRoles:!1})),r(a)}))}),[]),Object(c.useEffect)((function(){o.user_id&&(d(Object(j.a)(Object(j.a)({},o),{},{loadingUserRoles:!0})),e.get("auth/users/"+o.user_id+"/roles/").then((function(e){var t=e.data.data.map((function(e){return e.id}));d(Object(j.a)(Object(j.a)({},o),{},{roles_id:t,loadingUserRoles:!1}))})))}),[o.user_id]);var x=function(e,t,a){d(Object(j.a)(Object(j.a)({},o),{},{roles_id:e}))},f=function(e,t){p([].concat(Object(Qe.a)(e),Object(Qe.a)(t)))};return Object(i.jsx)(B,{title:"Affect\xe9 des vehicules au utilisateur",selectedSiderKey:"user-roles-users",children:Object(i.jsxs)(te.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:function(){o.user_id&&o.roles_id&&e.post("/auth/users/roles",{user_id:o.user_id,roles_id:o.roles_id}).then((function(e){R.b.info("Bien ajouter")}))},children:[Object(i.jsx)(te.a.Item,{label:"Utilisateur",name:"user_id",children:Object(i.jsx)(re,{url:"auth/users/search",style:{width:200},mapOptionToString:function(e){return e.firstname+" "+e.lastname},onSelect:function(e,t){d(Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}))},onChange:function(e,t){d(t?Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}):Object(j.a)(Object(j.a)({},o),{},{user_id:null}))},placeholder:"Rechercher un utilisateur ..."})}),o.user_id&&(o.loadingRoles||o.loadingUserRoles?Object(i.jsx)(P.a,{}):Object(i.jsx)(te.a.Item,{label:"Roles affect\xe9",name:"rolesId",children:Object(i.jsx)($e.a,{showSearch:!0,dataSource:n,titles:["Tout","Affect\xe9"],targetKeys:o.roles_id,selectedKeys:m,onChange:x,onSelectChange:f,render:function(e){return e.name},style:{marginBottom:16},listStyle:{minWidth:250,height:300},disabled:!1})})),Object(i.jsx)(te.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Envoyer"})}))]}))})},exact:!0}]},{name:"cars",label:"V\xe9hicules",role:"LISTE_VEHICULES",icon:Object(i.jsx)(M.b,{style:{marginRight:10}}),routes:[{path:"/cars/add",name:"add-cars",label:"Ajouter v\xe9hicule",role:"AJOUTER_VEHICULE",component:function(){var e=O().api;return Object(i.jsx)(B,{title:"Nauveau v\xe9hicule",selectedSiderKey:"add-cars",children:Object(i.jsx)(he,{formItems:Se,onFinish:function(t){e.post("/cars",t).then((function(e){R.b.info("Bien ajouter")}))}})})}},{path:"/cars",name:"list-cars",label:"Liste des v\xe9hicules",component:function(){var e=O(),t=e.api,a=e.user,n=Object(p.useHistory)(),r=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Genre",dataIndex:"genre",sorter:!0,hideInSearch:!0},{title:"Groupe",dataIndex:"groupName",sorter:!0,hideInSearch:!0},{title:"Marque",dataIndex:"marque",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"client",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",sorter:!0,hideInSearch:!0,render:function(e,t,a,c){return Object(i.jsx)("span",{style:{color:t.date_restitition?"red":"green"},children:t.drivers_fullname})}},{title:"Status",dataIndex:"state",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,c,r,l){return[Object(i.jsx)(xe.a,{title:"Info",children:Object(i.jsx)(Ee,{row:c})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"MODIFIER_VEHICULE")&&Object(i.jsx)(xe.a,{title:"Modifier",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/cars/edit/"+c.id)},shape:"circle",icon:Object(i.jsx)(fe.a,{})})})}),Object(i.jsx)(xe.a,{title:"Historiques des d\xe9charges",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/cars/decharges/"+c.id)},shape:"circle",icon:Object(i.jsx)(ge.a,{})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"SUPPRIMER_VEHICULE")&&Object(i.jsx)(xe.a,{title:"Supprimer",children:Object(i.jsx)(y.a,{onClick:function(){t.post("/cars/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),l.reload()}))},shape:"circle",icon:Object(i.jsx)(ve.a,{})})})})]}}],l=c.useRef();return window.actionRef=l,Object(i.jsx)(B,{title:"V\xe9hicules",selectedSiderKey:"list-cars",children:Object(i.jsx)(Q.a,{toolBarRender:function(e){return[Object(i.jsx)(xe.a,{title:"Exporter fiechier EXCEL",children:Object(i.jsx)(y.a,{onClick:function(){t.get("/cars/export",{responseType:"blob",headers:{"Content-Disposition":"attachment; filename=etat_vehicules.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","etat_vehicules_"+Z()().format("DD_MM_YYYY__HH_MM")+".xlsx"),document.body.appendChild(a),a.click()}))},icon:Object(i.jsx)(ye.a,{})},"button")})]},size:"small",search:!0,columns:r,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/cars",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},role:"LISTE_VEHICULES",exact:!0},{path:"/cars/groups",name:"groups-cars",label:"Groupes <> vehicules",component:function(){var e=O().api;window.api=e;var t=Object(c.useState)([]),a=Object(u.a)(t,2),n=(a[0],a[1],Object(c.useState)({group_id:null,cars_id:[],loadingCars:!0,loadingGroupCars:!1,carGroupe:"vh"})),r=Object(u.a)(n,2),l=r[0],s=r[1],o=Object(c.useState)([]),d=Object(u.a)(o,2),b=d[0],h=d[1];window.data=l;Object(c.useEffect)((function(){l.group_id&&(s(Object(j.a)(Object(j.a)({},l),{},{loadingGroupCars:!0})),e.get("groups/cars/"+l.group_id).then((function(e){var t=e.data.data.map((function(e){return e.id}));s(Object(j.a)(Object(j.a)({},l),{},{cars_id:t,loadingGroupCars:!1}))})))}),[l.group_id]),Object(c.useEffect)((function(){e.get("allcars").then((function(e){var t=e.data,a=t.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:Number.parseInt(e.id)})}));s(Object(j.a)(Object(j.a)({},t),{},{cars:a,loadingCars:!1}))}))}),[l.carGroupe]);var m=function(e,t,a){s(Object(j.a)(Object(j.a)({},l),{},{cars_id:e}))},p=function(e,t){h([].concat(Object(Qe.a)(e),Object(Qe.a)(t)))};return Object(i.jsx)(B,{title:"Affect\xe9 des vehicules au groupe",selectedSiderKey:"group-cars",children:Object(i.jsxs)(te.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:function(t){console.log(t),e.post("/groups/cars/"+l.group_id,l).then((function(e){R.b.info("Bien ajouter")}))},children:[Object(i.jsx)(te.a.Item,{label:"Groupe",name:"group_id",children:Object(i.jsx)(re,{url:"groups/search",style:{width:200},mapOptionToString:function(e){return e.name},onSelect:function(e,t){s(Object(j.a)(Object(j.a)({},l),{},{group_id:t.id}))},onChange:function(e,t){s(t?Object(j.a)(Object(j.a)({},l),{},{group_id:t.id}):Object(j.a)(Object(j.a)({},l),{},{group_id:null}))},placeholder:"Rechercher ..."})}),l.group_id&&(l.loadingCars||l.loadingGroupCars?Object(i.jsx)(P.a,{}):Object(i.jsx)(te.a.Item,{label:"V\xe9hicules affect\xe9",name:"carsId",children:Object(i.jsx)($e.a,{showSearch:!0,dataSource:l.cars,titles:["Tout","Affect\xe9"],targetKeys:l.cars_id,selectedKeys:b,onChange:m,onSelectChange:p,render:function(e){return e.code_gps+" | "+e.matricule},style:{marginBottom:16},listStyle:{width:250,height:300},disabled:!1})})),Object(i.jsx)(te.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Envoyer"})}))]}))})},role:"VEHICULES_GROUPES"},{path:"/cars_state",name:"status-cars",label:"v\xe9hicules > Status",component:function(){var e=O().api,t=(Object(p.useHistory)(),[{title:"matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"code_gps",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Designation",dataIndex:"name",hideInSearch:!0,sorter:!0},{title:"Date",dataIndex:"state_date",hideInSearch:!0,sorter:!0},{title:"Cree par",dataIndex:"createdby",hideInSearch:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(t,a,c,n){return[Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){e.post("/cars_state/delete/"+a.id).then((function(){R.b.info("Bien Supprim\xe9"),n.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(y.a,{shape:"circle",icon:Object(i.jsx)(ve.a,{})})})]}}]),a=c.useRef();return window.actionRef=a,Object(i.jsx)(B,{title:"Status des v\xe9hicules",selectedSiderKey:"list-cars",children:Object(i.jsx)(Q.a,{actionRef:a,size:"small",search:!0,columns:t,ellipsis:!0,request:function(t,a,i){return a&&(t.sortBy=Object.keys(a)[0],t.sort=Object.values(a)[0]),i&&(t.filterBy=Object.keys(i)[0],t.filter=Object.values(i)),e.get("/cars_state",{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},role:"STATUS_VEHICULES",exact:!0},{path:"/cars_state/add",name:"add-status-cars",label:"Modifier status d'une v\xe9hicule",role:"MODIFIER_STATUS_VEHICULE",component:function(){var e=O().api,t=Object(p.useHistory)();return Object(i.jsx)(B,{title:"Changement statut de v\xe9hicule",children:Object(i.jsx)(he,{formItems:_e,onFinish:function(a){a.state_date=a.state_date?a.state_date.format("YYYY-MM-DD HH:mm:ss"):null,e.post("/cars_state",a).then((function(e){R.b.info("Bien ajouter"),t.push("/cars_state")}))}})})},exact:!0},{path:"/cars/edit/:id",name:"edit-cars",label:"Modifier v\xe9hicule",role:"MODIFIER_VEHICULE",component:function(){var e=Object(p.useRouteMatch)().params,t=O().api,a=Object(c.useState)(!0),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1];return Object(c.useEffect)((function(){t.get("/cars/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(B,{withBack:!0,loading:r,title:"Modifie v\xe9hicule : "+d.matricule,selectedSiderKey:"list-cars",children:Object(i.jsx)(he,{formItems:Se,initialValues:d,onFinish:function(a){t.put("/cars/"+e.id,a).then((function(e){R.b.info("Bien modifier")}))}})})},hideInSide:!0},{path:"/cars/decharges/:car_id",name:"decharges-car",label:"Decharge",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(Ae.useRouteMatch)().params.car_id,n=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Restitution",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,a,c,n){return[Object(i.jsx)(xe.a,{title:"Afficher",children:Object(i.jsx)(y.a,{onClick:function(){t.push("/decharges/show/"+a.id)},shape:"circle",icon:Object(i.jsx)(Ke.a,{})})})]}}],r=c.useRef();return Object(i.jsx)(B,{withBack:!0,title:"D\xe9charges",selectedSiderKey:"list-cars",children:Object(i.jsx)(Q.a,{actionRef:r,size:"small",search:!0,columns:n,ellipsis:!0,request:function(t,i,c){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),c&&(t.filterBy=Object.keys(c)[0],t.filter=Object.values(c)),e.get("/cars/decharges/"+a,{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},hideInSide:!0}]},{name:"peremptions",label:"P\xe9remptions",icon:Object(i.jsx)(M.a,{style:{marginRight:10}}),role:"LISTE_PEREMPTIONS",routes:[{path:"/peremptions/add",name:"add-peremption",label:"Ajouter p\xe9remption",role:"AJOUTER_PEREMPTIONS",component:function(){var e=O().api,t=Object(p.useHistory)();return Object(i.jsx)(B,{title:"Nauveau client(Structure)",selectedSiderKey:"add-clients",children:Object(i.jsx)(he,{formItems:ct,onFinish:function(a){e.post("/clients",a).then((function(e){R.b.info("Bien ajouter"),t.push("/clients")}))}})})}},{path:"/peremptions/",name:"list-peremptions",label:"Liste p\xe9remptions",role:"LISTE_PEREMPTIONS",component:function(){var e=O(),t=e.api,a=e.user,n=Object(p.useHistory)(),r=[{title:"Code (SAP)",dataIndex:"code",copyable:!0,sorter:!0},{title:"Designation",dataIndex:"designation",sorter:!0},{title:"Localit\xe9",dataIndex:"localite",sorter:!0,hideInSearch:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Client Hierachique",dataIndex:["client","designation"],sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,c,r,l){return[Object(i.jsx)(i.Fragment,{children:Ie(a,"SUPPRIMER_CLIENT")&&Object(i.jsx)(xe.a,{title:"Supprimer",children:Object(i.jsx)(y.a,{onClick:function(){t.post("/clients/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),l.reload()}))},shape:"circle",icon:Object(i.jsx)(ve.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"MODIFIER_CLIENT")&&Object(i.jsx)(xe.a,{title:"Modifier",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/clients/edit/"+c.id)},shape:"circle",icon:Object(i.jsx)(fe.a,{})})})})]}}],l=c.useRef();return window.actionRef=l,Object(i.jsx)(B,{title:"Clients",selectedSiderKey:"list-clients",children:Object(i.jsx)(Q.a,{actionRef:l,size:"small",search:!0,columns:r,ellipsis:!0,request:function(e,a,i){return console.log(a),a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),t.get("/clients",{params:e,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})}},{path:"/peremptions/edit/:id",name:"edit-peremption",label:"Modifier p\xe9remption",role:"MODIFIER_PEREMPTIONS",component:function(){var e=Object(p.useRouteMatch)().params,t=O().api,a=Object(c.useState)(!0),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(Ae.useHistory)();return Object(c.useEffect)((function(){t.get("/clients/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(B,{withBack:!0,loading:r,title:"Modifie client",selectedSiderKey:"list-clients",children:Object(i.jsx)(he,{formItems:ct,initialValues:d,onFinish:function(a){t.put("/clients/"+e.id,a).then((function(e){R.b.info("Bien modifier"),j.push("/clients")}))}})})},hideInSide:!0}]},{name:"drivers",label:"Conducteurs",icon:Object(i.jsx)(H.a,{style:{marginRight:10}}),role:"LISTE_CONDUCTEURS",routes:[{path:"/drivers/add",name:"add-driver",label:"Ajouter conducteur",role:"AJOUTER_CONDUCTEUR",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(c.useState)(!1),n=Object(u.a)(a,2),r=n[0],l=n[1];return Object(i.jsx)(B,{title:"Nauveau conducteur",selectedSiderKey:"add-drivers",children:Object(i.jsx)(he,{loading:r,formItems:Te,onFinish:function(a){l(!0),e.post("/drivers",a).then((function(e){R.b.info("Bien ajouter"),t.push("/drivers")})).catch((function(){l(!1)}))}})})}},{path:"/drivers",name:"list-drivers",label:"Liste des conducteurs",role:"LISTE_CONDUCTEURS",component:function(){var e=O(),t=e.api,a=e.user,n=Object(p.useHistory)(),r=[{title:"Nom",dataIndex:"firstname",sorter:!0},{title:"Pr\xe9nom",dataIndex:"lastname",sorter:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Code paie",dataIndex:"code_paie",hideInSearch:!0,sorter:!0},{title:"Type",dataIndex:"type",sorter:!0,hideInSearch:!0},{title:"Date Cre\xe9ation",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,c,r,l){return[,Object(i.jsx)(i.Fragment,{children:Ie(a,"SUPPRIMER_CONDUCTEUR")&&Object(i.jsx)(xe.a,{title:"Supprimer",children:Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/drivers/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(y.a,{shape:"circle",icon:Object(i.jsx)(ve.a,{})})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"MODIFIER_CONDUCTEUR")&&Object(i.jsx)(xe.a,{title:"Modifier",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/drivers/edit/"+c.id)},shape:"circle",icon:Object(i.jsx)(fe.a,{})})})})]}}],l=c.useRef();return window.actionRef=l,Object(i.jsx)(B,{title:"Conducteurs",selectedSiderKey:"list-drivers",children:Object(i.jsx)(Q.a,{actionRef:l,size:"small",search:!0,columns:r,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/drivers",{params:e}).then((function(e){return e.data.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/drivers/edit/:id",name:"edit-driver",label:"Modifier conducteur",role:"MODIFIER_CONDUCTEUR",component:function(){var e=Object(p.useRouteMatch)().params,t=O().api,a=Object(c.useState)(!0),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(p.useHistory)();return Object(c.useEffect)((function(){t.get("/drivers/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(B,{withBack:!0,loading:r,title:"Modifie conducteur",selectedSiderKey:"list-drivers",children:Object(i.jsx)(he,{formItems:Te,initialValues:d,onFinish:function(a){t.put("/drivers/"+e.id,a).then((function(e){R.b.info("Bien modifier"),j.push("/drivers")}))}})})},hideInSide:!0}]},{name:"clients",label:"Clients",icon:Object(i.jsx)(M.k,{style:{marginRight:10}}),role:"LISTE_CLIENTS",routes:[{path:"/clients/add",name:"add-client",label:"Ajouter client",role:"AJOUTER_CLIENT",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(c.useState)(!1),n=Object(u.a)(a,2),r=n[0],l=n[1];return Object(i.jsx)(B,{title:"Nauveau client(Structure)",selectedSiderKey:"add-clients",children:Object(i.jsx)(he,{loading:r,formItems:Re,onFinish:function(a){l(!0),e.post("/clients",a).then((function(e){R.b.info("Bien ajouter"),t.push("/clients")})).catch((function(){l(!1)}))}})})}},{path:"/clients",name:"list-clients",label:"Liste des clients",role:"LISTE_CLIENTS",component:function(){var e=O(),t=e.api,a=e.user,n=Object(p.useHistory)(),r=[{title:"Code (SAP)",dataIndex:"code",copyable:!0,hideInSearch:!0,sorter:!0},{title:"Designation",dataIndex:"designation",sorter:!0},{title:"Localit\xe9",dataIndex:"localite",sorter:!0,hideInSearch:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Client Hierachique",dataIndex:["client_h_designation"],sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,c,r,l){return[Object(i.jsx)(i.Fragment,{children:Ie(a,"SUPPRIMER_CLIENT")&&Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/clients/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(xe.a,{title:"Supprimer",children:Object(i.jsx)(y.a,{shape:"circle",icon:Object(i.jsx)(ve.a,{})})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"MODIFIER_CLIENT")&&Object(i.jsx)(xe.a,{title:"Modifier",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/clients/edit/"+c.id)},shape:"circle",icon:Object(i.jsx)(fe.a,{})})})})]}}],l=c.useRef();return window.actionRef=l,Object(i.jsx)(B,{title:"Clients",selectedSiderKey:"list-clients",children:Object(i.jsx)(Q.a,{actionRef:l,size:"small",search:!0,columns:r,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/clients",{params:e}).then((function(e){return e.data.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/clients/edit/:id",name:"edit-client",label:"Modifier client",role:"MODIFIER_CLIENT",component:function(){var e=Object(p.useRouteMatch)().params,t=O().api,a=Object(c.useState)(!0),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(Ae.useHistory)();return Object(c.useEffect)((function(){t.get("/clients/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(B,{withBack:!0,loading:r,title:"Modifie client",selectedSiderKey:"list-clients",children:Object(i.jsx)(he,{formItems:Re,initialValues:d,onFinish:function(a){t.put("/clients/"+e.id,a).then((function(e){R.b.info("Bien modifier"),j.push("/clients")}))}})})},hideInSide:!0}]},{name:"decharges",label:"Decharges",icon:Object(i.jsx)(M.f,{style:{marginRight:10}}),role:"LISTE_DECHARGES",routes:[{path:"/decharges/add",name:"add-decharge",label:"Ajouter decharge",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(c.useState)({step:0}),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)(!1),o=Object(u.a)(s,2),d=o[0],b=o[1],h=Object(c.useRef)(null);Object(qe.useReactToPrint)({content:function(){return h.current},onBeforeGetContent:function(){var e=Object(Le.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(B,{title:"Nauveau decharge",children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(i.jsxs)(De.a,{current:r.step,children:[Object(i.jsx)(Ye,{title:"Affectation client",description:""}),Object(i.jsx)(Ye,{title:"Checklist Conducteur",description:""})]}),Object(i.jsx)("div",{children:Object(i.jsx)("hr",{})}),Object(i.jsxs)("div",{style:{flex:1},children:[0===r.step&&Object(i.jsx)(he,{formItems:Ue,initialValues:{date_decharge:X()},onFinish:function(e){e.date_decharge=e.date_decharge?e.date_decharge.format("yy-M-D"):X().format("yy-M-D"),e.date_fin_prestation=e.date_fin_prestation?e.date_fin_prestation.format("yy-M-D"):null,l(Object(j.a)(Object(j.a)({},r),{},{data:Object(j.a)(Object(j.a)({},r.data),e),step:1}))}}),1===r.step&&Object(i.jsx)(he,{loading:d,formItems:[{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<X(r.data.date_decharge)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:w}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:w}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:w}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],onFinish:function(a){a.date_checklist=a.date_checklist?a.date_checklist.format("yy-M-D"):X().format("yy-M-D");var i=Object(j.a)(Object(j.a)({},r.data),a);b(!0),e.post("/decharges",i).then((function(e){R.b.info("Bien ajouter"),t.push("/decharges/show/"+e.data.data.id)})).catch((function(){b(!1)}))},initialValues:{date_checklist:X(r.data.date_decharge),assurance:!1,boite_pharm:!1,carnet_enter:!1,carte_gpl:!1,carte_grise:!1,cle_roue:!1,cle_vehicule:1,cric:!1,extincteur:!1,gillet:!1,niveau_carburant:0,odometre:0,permis_circuler:!1,pochette_cle:!1,poste_radio:!1,roue_secour:!1,scanner:!1,starts:5,triangle:!1,vignette:!1}})]})]}),","]})},role:"AJOUTER_DECHARGE"},{path:"/decharges",name:"list-decharges",label:"Etat d\xe9charges",component:function(){var e=O(),t=e.api,a=e.user,n=Object(p.useHistory)(),r=c.useRef();window.actionRef=r;var l=[{title:"Matricule",dataIndex:"cars.matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"createdby_username",sorter:!0,hideInSearch:!0},{title:"Valider par",dataIndex:"acceptedby_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,c,l,s){return[Object(i.jsx)(xe.a,{title:"Afficher",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/decharges/show/"+c.id)},shape:"circle",icon:Object(i.jsx)(Ke.a,{})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"VALIDER_DECHARGE")&&Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir valider?",onConfirm:function(){t.post("/decharges/accepte/"+c.id).then((function(){R.b.success("Decharge valid\xe9e!"),r.current.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",disabled:c.acceptedby_username,children:Object(i.jsx)(xe.a,{title:"Valider",children:Object(i.jsx)(y.a,{disabled:c.acceptedby_username,shape:"circle",icon:Object(i.jsx)(M.e,{})})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"MODIFIER_DECHARGE")&&Object(i.jsx)(xe.a,{title:"Modifier",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/decharges/edit/"+c.id)},shape:"circle",icon:Object(i.jsx)(fe.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"DECHARGE_CHANGER_CONDUCTEUR")&&Object(i.jsx)(xe.a,{title:"Change conducteur",children:Object(i.jsx)(y.a,{onClick:function(){n.push("/decharges/checklist/"+c.id)},shape:"circle",icon:Object(i.jsx)(M.j,{})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"RESTITUER_DECHARGE")&&Object(i.jsx)(xe.a,{title:"Restitution",children:Object(i.jsx)(y.a,{disabled:c["restititions.id"],onClick:function(){n.push("/decharges/restitition/"+c.id)},shape:"circle",icon:Object(i.jsx)(ze.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Ie(a,"SUPPRIMER_DECHARGE")&&Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/decharges/delete/"+c.id).then((function(){R.b.info("Bien Supprim\xe9"),s.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(y.a,{shape:"circle",icon:Object(i.jsx)(ve.a,{})})})})]}}];return Object(i.jsx)(B,{title:"D\xe9charges",selectedSiderKey:"list-cars",children:Object(i.jsx)(Q.a,{actionRef:r,size:"small",search:!0,columns:l,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/decharges",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/decharges/show/:id",name:"show-decharge",label:"Affiche decharge",component:function(){var e,t,a=O().api,n=Object(p.useRouteMatch)().params,r=Object(Ae.useHistory)(),l=Object(c.useState)({step:0}),s=Object(u.a)(l,2),o=s[0],d=s[1];window.allData=o,Object(c.useEffect)((function(){a.get("decharges/"+n.id).then((function(e){d(Object(j.a)(Object(j.a)({},o),{},{decharge:e.data.data}))}))}),[n]);var b=Object(c.useRef)(null),h=(Object(qe.useReactToPrint)({content:function(){return b.current},onBeforeGetContent:function(){var e=Object(Le.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Object(c.useRef)(null));Object(qe.useReactToPrint)({content:function(){return h.current},onBeforeGetContent:function(){var e=Object(Le.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(B,{withBack:!0,loading:!o.decharge,title:"Affiche decharge n\xb0 "+n.id,children:[(null===o||void 0===o||null===(e=o.decharge)||void 0===e?void 0:e.restitition)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{orientation:"left",children:Object(i.jsx)("h1",{children:Object(i.jsx)("b",{children:"Restitution (Decharge)"})})}),Object(i.jsx)(Ze,{component:Object(i.jsx)(Je,{ref:h,decharge:null===o||void 0===o?void 0:o.decharge}),disabledDelete:!0})]}),null===o||void 0===o||null===(t=o.decharge)||void 0===t?void 0:t.checklists.reverse().map((function(e,t){var c;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(F.a,{orientation:"left",children:Object(i.jsxs)("h1",{children:[Object(i.jsx)("b",{children:"Chcklist Le:"})," ",e.date_checklist,":"]})}),Object(i.jsx)(Ze,{component:Object(i.jsx)(Ge,{checklist:Object(j.a)(Object(j.a)(Object(j.a)({},null===o||void 0===o?void 0:o.decharge),e),{},{"drivers.firstname":e.driver.firstname,"drivers.lastname":e.driver.lastname})}),onDelete:function(){a.post("decharges/checklist/delete/"+e.id).then((function(){r.push("/decharges"),R.b.info("Checklist est supprimer")}))},disabledDelete:t===(null===o||void 0===o||null===(c=o.decharge)||void 0===c?void 0:c.checklists.length)-1})]})}))]})},hideInSide:!0},{path:"/decharges/edit/:id",name:"edit-decharge",label:"Modifier d\xe9charge",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(c.useState)({step:0}),n=Object(u.a)(a,2),r=n[0],l=(n[1],Object(c.useState)(!1)),s=Object(u.a)(l,2),o=s[0],d=s[1],j=Object(p.useRouteMatch)().params,h=Object(c.useState)(null),m=Object(u.a)(h,2),x=m[0],f=m[1],g=Object(c.useState)(!0),v=Object(u.a)(g,2),y=v[0],I=v[1];Object(c.useEffect)((function(){e.get("/decharges/"+j.id).then((function(e){console.log(e.data),f(e.data.data),I(!1)}))}),[]);var E=Object(c.useRef)(null);Object(qe.useReactToPrint)({content:function(){return E.current},onBeforeGetContent:function(){var e=Object(Le.a)(Ne.a.mark((function e(){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return y||!x?Object(i.jsx)(B,{title:"Chargement ...",withBack:!0,children:Object(i.jsx)("div",{style:{marginTop:40,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})})}):Object(i.jsx)(B,{withBack:!0,title:"Modifier D\xe9charge N\xb0("+j.id+") | V\xe9hicule: "+x["cars.matricule"],children:Object(i.jsx)(he,{loading:o,formItems:[{name:"client_id",label:"Client",type:"search",rules:[{required:!0,message:w}],url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:w}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"date_decharge",label:"Date d\xe9charge",rules:[{required:!0,message:w}],type:"date"},{name:"date_fin_prestation",label:"Date fin prestation",type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_decharge")}},{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<X(r.data.date_decharge)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:w}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:w}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:w}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],onFinish:function(a){d(!0),a.date_decharge=a.date_decharge?a.date_decharge.format("yy-M-D"):X().format("yy-M-D"),a.date_fin_prestation=a.date_fin_prestation?a.date_fin_prestation.format("yy-M-D"):null,a.date_checklist=a.date_checklist?a.date_checklist.format("yy-M-D"):X().format("yy-M-D"),e.put("/decharges/"+j.id,a).then((function(e){R.b.info("Bien modifier"),t.push("/decharges/")})).catch((function(){d(!1)}))},initialValues:{client_id:x.client_id,client:x.client,car_id:x.car_id,car:x.car,driver_id:x.driver_id,driver:x.driver,date_decharge:X(x["decharges.date_decharge"]),date_checklist:X(x.date_checklist),assurance:x.assurance,boite_pharm:x.boite_pharm,carnet_enter:x.carnet_enter,carte_gpl:x.carte_gpl,carte_grise:x.carte_grise,cle_roue:x.cle_roue,cle_vehicule:x.cle_vehicule,cric:x.cric,extincteur:x.extincteur,gillet:x.gillet,niveau_carburant:x.niveau_carburant,odometre:x.odometre,permis_circuler:x.permis_circuler,pochette_cle:x.pochette_cle,poste_radio:x.poste_radio,roue_secour:x.roue_secour,scanner:x.scanner,starts:x.starts,triangle:x.triangle,vignette:x.vignette,observation_checklist:x.observation_checklist}})})},hideInSide:!0},{path:"/decharges/restitition/:id",name:"restitition-decharge",label:"Restitution decharge",component:function(){var e=O().api,t=Object(p.useRouteMatch)().params,a=Object(Ae.useHistory)(),n=Object(c.useState)({decharge:null}),r=Object(u.a)(n,2),l=r[0],s=r[1];window.allData=l,Object(c.useEffect)((function(){e.get("decharges/"+t.id).then((function(e){var t={id:e.data.data["drivers.id"],firstname:e.data.data["drivers.firstname"],lastname:e.data.data["drivers.lastname"]};s(Object(j.a)(Object(j.a)({},l),{},{decharge:e.data.data,driver:t}))}))}),[]);return Object(i.jsxs)(B,{withBack:!0,loading:!l.decharge,title:"Restitition (D\xe9charge)",children:[Object(i.jsxs)(Y.a,{title:"Decharge N\xb0 ".concat(l.decharge&&l.decharge["decharges.id"],", Le ").concat(l.decharge&&X(l.decharge["decharges.date_decharge"]).format("DD-MM-Y")),extra:Object(i.jsx)(x.b,{to:"/decharges/show/".concat(l.decharge&&l.decharge["decharges.id"]),children:"Plus d'info"}),children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Client:"})," ",l.decharge&&l.decharge["clients.designation"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Marque v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.marque"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Matricule v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.matricule"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",l.decharge&&l.decharge["cars.code_gps"]]})]}),Object(i.jsx)(F.a,{orientation:"left",children:Object(i.jsx)("h1",{children:"Chcklist de restitition:"})}),l.decharge&&Object(i.jsx)(he,{formItems:Me,onFinish:function(i){i.car_id=l.decharge["cars.id"],i.decharge_id=l.decharge["decharges.id"],i.date_restitition=i.date_restitition?i.date_restitition.format("yy-M-D"):X().format("yy-M-D"),i.date_checklist=i.date_restitition,e.post("decharges/restitition/"+t.id,i).then((function(e){R.b.success("Bien Ajouter"),a.push("/decharges/show/"+t.id)}))},initialValues:{driver:l.driver,driver_id:l.driver&&l.driver.id,odometre:(null===l||void 0===l?void 0:l.decharge)&&l.decharge.odometre,date_restitition:X(),assurance:l.decharge.assurance,boite_pharm:l.decharge.boite_pharm,carnet_enter:l.decharge.carnet_enter,carte_gpl:l.decharge.carte_gpl,carte_grise:l.decharge.carte_grise,cle_roue:l.decharge.cle_roue,cle_vehicule:l.decharge.cle_vehicule,cric:l.decharge.cric,extincteur:l.decharge.extincteur,gillet:l.decharge.gillet,niveau_carburant:l.decharge.niveau_carburant,permis_circuler:l.decharge.permis_circuler,pochette_cle:l.decharge.pochette_cle,poste_radio:l.decharge.poste_radio,roue_secour:l.decharge.roue_secour,scanner:l.decharge.scanner,starts:l.decharge.starts,triangle:l.decharge.triangle,vignette:l.decharge.vignette}})]})},hideInSide:!0},{path:"/decharges/restititions",name:"restititions-decharge",label:"Etat d\xe9charges restituer",role:"LISTE_DECHARGES_RESTITUER",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(Ae.useRouteMatch)(),n=[{title:"Matricule",dataIndex:"cars.matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Date Restitution",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(a,c,n,r){return[Object(i.jsx)(xe.a,{title:"Afficher",children:Object(i.jsx)(y.a,{onClick:function(){console.log(c),t.push("/decharges/show/"+c.id)},shape:"circle",icon:Object(i.jsx)(Ke.a,{})})}),Object(i.jsx)(Ce.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){e.post("/decharges/restititions/delete/"+c["restititions.id"]).then((function(){R.b.info("Bien Supprim\xe9"),r.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(y.a,{shape:"circle",icon:Object(i.jsx)(ve.a,{})})})]}}],r=c.useRef();return Object(i.jsx)(B,{title:"D\xe9charges Restituer",children:Object(i.jsx)(Q.a,{actionRef:r,size:"small",search:!0,columns:n,ellipsis:!0,request:function(t,i,c){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),c&&(t.filterBy=Object.keys(c)[0],t.filter=Object.values(c)),console.log(a),e.get("/decharges/restititions/",{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})}},{path:"/decharges/history/:car_id",name:"history-decharge",label:"History decharge",component:function(){var e=O().api,t=Object(p.useHistory)(),a=Object(Ae.useRouteMatch)(),n=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Date Restitition",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,a,c,n){return[Object(i.jsx)(xe.a,{title:"Afficher",children:Object(i.jsx)(y.a,{onClick:function(){t.push("/decharges/show/"+a.id)},shape:"circle",icon:Object(i.jsx)(Ke.a,{})})}),Object(i.jsx)(xe.a,{title:"Supprimer",children:Object(i.jsx)(y.a,{onClick:function(){},shape:"circle",icon:Object(i.jsx)(ve.a,{})})})]}}],r=c.useRef();return Object(i.jsx)(B,{withBack:!0,title:"Historique CheckList",children:Object(i.jsx)(Q.a,{actionRef:r,size:"small",search:!0,columns:n,ellipsis:!0,request:function(t,i,c){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),c&&(t.filterBy=Object.keys(c)[0],t.filter=Object.values(c)),e.get("/decharges/history/"+a.params.car_id,{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},hideInSide:!0},{path:"/decharges/checklist/:id",name:"add-checklist-decharge",label:"Checklist decharge",component:function(){var e=O().api,t=Object(p.useRouteMatch)().params,a=Object(Ae.useHistory)(),n=Object(c.useState)({decharge:null}),r=Object(u.a)(n,2),l=r[0],s=r[1];window.allData=l,Object(c.useEffect)((function(){e.get("decharges/"+t.id).then((function(e){s(Object(j.a)(Object(j.a)({},l),{},{decharge:e.data.data}))}))}),[]);return Object(i.jsxs)(B,{withBack:!0,loading:!l.decharge,title:"Changement de conducteur",children:[Object(i.jsxs)(Y.a,{title:"Decharge N\xb0 ".concat(l.decharge&&l.decharge["decharges.id"],", Le ").concat(l.decharge&&X(l.decharge["decharges.date_decharge"]).format("DD-MM-Y")),extra:Object(i.jsx)(x.b,{to:"/decharges/show/".concat(l.decharge&&l.decharge["decharges.id"]),children:"Plus d'info"}),children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Client:"})," ",l.decharge&&l.decharge["clients.designation"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Marque v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.marque"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Matricule v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.matricule"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",l.decharge&&l.decharge["cars.code_gps"]]})]}),Object(i.jsx)(F.a,{orientation:"left",children:Object(i.jsx)("h1",{children:"Chcklist:"})}),l.decharge&&Object(i.jsx)(he,{formItems:[{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<X(l.decharge.checklists[0].date_checklist)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:w}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:w}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:w}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"Observation",type:"textarea"}],onFinish:function(i){i.car_id=l.decharge["cars.id"],i.decharge_id=l.decharge["decharges.id"],i.date_checklist=i.date_checklist?i.date_checklist.format("yy-M-D"):X().format("yy-M-D"),e.post("decharges/checklist/"+t.id,i).then((function(e){R.b.success("Bien Ajouter"),a.push("/decharges/show/"+t.id)}))},initialValues:{odometre:l.decharge.odometre,assurance:l.decharge.assurance,boite_pharm:l.decharge.boite_pharm,carnet_enter:l.decharge.carnet_enter,carte_gpl:l.decharge.carte_gpl,carte_grise:l.decharge.carte_grise,cle_roue:l.decharge.cle_roue,cle_vehicule:l.decharge.cle_vehicule,cric:l.decharge.cric,extincteur:l.decharge.extincteur,gillet:l.decharge.gillet,niveau_carburant:l.decharge.niveau_carburant,permis_circuler:l.decharge.permis_circuler,pochette_cle:l.decharge.pochette_cle,poste_radio:l.decharge.poste_radio,roue_secour:l.decharge.roue_secour,scanner:l.decharge.scanner,starts:l.decharge.starts,triangle:l.decharge.triangle,vignette:l.decharge.vignette}})]})},hideInSide:!0}]}]},rt=f.a.Sider,lt=S.a.SubMenu,st=function(){var e=Object(p.useHistory)(),t=O().user,a=O().selectedSiderKey;return Object(i.jsx)(rt,{width:280,style:{overflow:"auto",height:"calc(100vh - 48px)",marginTop:48,position:"fixed",left:0},children:Object(i.jsx)(S.a,{theme:"dark",mode:"inline",defaultSelectedKeys:a,children:nt.routes.map((function(a,c){return a.role?a.routes?Ie(t,a.role)?Object(i.jsx)(lt,{icon:a.icon,title:a.label,children:a.routes.map((function(a,c){return a.role?Ie(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name):null:a.hideInSide?void 0:Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name)}))},a.name):null:Ie(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},icon:a.icon,children:a.label},a.name):null:a.routes?Object(i.jsx)(lt,{icon:a.icon,title:a.label,children:a.routes.map((function(a,c){return a.role?Ie(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name):null:a.hideInSide?void 0:Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name)}))},a.name):Object(i.jsx)(S.a.Item,{onClick:function(){return e.push(a.path)},icon:a.icon,children:a.label},a.name)}))})})},ot=f.a.Content,dt=function(){for(var e=O().user,t=[],a=0;a<100;a++)t.push(a);var c=function(t){return Object(i.jsx)(p.Switch,{children:t.map((function(t,a){return t.role?Ie(e,t.role)?Object(i.jsx)(p.Route,{exact:t.exact,component:t.component,path:t.path},a):null:Object(i.jsx)(p.Route,{exact:t.exact,component:t.component,path:t.path},a)}))})};return Object(i.jsx)(x.a,{children:Object(i.jsxs)(f.a,{children:[Object(i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:280,height:48,backgroundColor:"white",padding:5,textAlign:"center"},children:Object(i.jsx)(x.b,{to:"/",children:Object(i.jsx)("h1",{style:{color:"black"},children:"GPark"})})}),Object(i.jsx)(st,{}),Object(i.jsxs)(f.a,{style:{marginLeft:280,overflowY:"scroll"},children:[Object(i.jsx)(L,{}),Object(i.jsx)(ot,{style:{paddingTop:48},children:nt.routes.map((function(t,a){return t.role?Ie(e,t.role)?Object(i.jsx)(p.Switch,{children:t.routes?c(t.routes):Object(i.jsx)(p.Route,{exact:t.exact,component:t.component,path:t.path})}):null:Object(i.jsx)(p.Switch,{children:t.routes?c(t.routes):Object(i.jsx)(p.Route,{exact:t.exact,component:t.component,path:t.path})})}))})]})]})})};function ut(){Object(p.useHistory)();var e=N(),t=e.api,a=e.setToken,n=Object(c.useState)(!1),r=Object(u.a)(n,2),l=r[0],s=r[1];return Object(i.jsx)("div",{className:"login",children:Object(i.jsxs)(te.a,{layout:"vertical",name:"basic",initialValues:{},onFinish:function(e){s(!0),t.post("auth/login",e).then((function(e){var t=e.data;a(t.data.token),document.location.reload()})).catch((function(e){s(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},style:{width:350,padding:20,border:"1px solid lightgray",borderRadius:5},children:[Object(i.jsx)("h2",{children:"Authentification"}),Object(i.jsx)(te.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:w}],children:Object(i.jsx)(ee.a,{})}),Object(i.jsx)(te.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:w}],children:Object(i.jsx)(ee.a.Password,{})}),Object(i.jsx)(F.a,{}),Object(i.jsx)(te.a.Item,{children:Object(i.jsx)(y.a,{loading:l,type:"primary",style:{width:"100%"},htmlType:"submit",children:"Connect\xe9"})})]})})}function bt(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),l=Object(u.a)(r,2),s=l[0],o=l[1],d=N(),j=d.api,h=d.setToken,O=d.token,p=Object(c.useState)(""),x=Object(u.a)(p,2),f=x[0],g=x[1];return Object(c.useEffect)((function(){var e=!0;return n(!0),j.get("/auth/me").then((function(t){var a=t.data;e&&(o(a.data),n(!1))})).catch((function(){e&&(o(null),n(!1))})),function(){return e=!1}}),[O]),a?Object(i.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})}):Object(i.jsx)(m,{value:{user:s,setUser:o,api:j,setToken:h,selectedSiderKey:f,setSelectedSiderKey:g},children:s?Object(i.jsx)(dt,{}):Object(i.jsx)(ut,{})})}var jt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,538)).then((function(t){var a=t.getCLS,i=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),i(e),c(e),n(e),r(e)}))};l.a.render(Object(i.jsx)(s.b,{locale:d.a,children:Object(i.jsx)(bt,{})}),document.getElementById("root")),jt()}},[[513,1,2]]]);
//# sourceMappingURL=main.90cb55cd.chunk.js.map