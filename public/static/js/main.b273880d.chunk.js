(this["webpackJsonpcl-client"]=this["webpackJsonpcl-client"]||[]).push([[0],{169:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),i=a.n(n),r=a(40),l=a.n(r),s=(a(169),a(232)),o=a(213),u=a(59),j=a(157),d=(a(170),a(2)),b=a(19),O=a(231),h=a(37),m=a(115),f=a.n(m),p=a(8),x=a(24),v=a(241),g=a(46),S=Object(n.createContext)(null);function y(e){var t=e.children,a=e.value;return Object(c.jsx)(S.Provider,{value:Object(g.a)({},a),children:t})}var C=function(){return Object(n.useContext)(S)},k=Object(p.a)("div",{minWidth:"280px",borderRight:"1px solid lightgray",position:"fixed",height:"100vh"}),_=function(){var e=Object(x.f)(),t=Object(x.g)(),a=Object(n.useState)([]),i=Object(d.a)(a,2),r=i[0],l=i[1],s=C().user,o=function(e){var t=!1;return s.roles.map((function(a){a.name===e&&(t=!0)})),t};return Object(n.useEffect)((function(){var e=[];e.push({title:"Notifications",itemId:"/notifications"}),e.push({title:"Etat Des V\xe9hicules",itemId:"/emr"}),e.push({title:"Etat Des Affectations Clients",itemId:"/etat_affectations"}),e.push({title:"Gestion Des Status V\xe9hicules",itemId:"/cars_state"}),o("ADD_EDIT_AFFECTATIONS_CLIENTS")&&e.push({title:"Affectations Clients",itemId:"/affectations"}),o("ADD_EDIT_DRIVERS")&&e.push({title:"D\xe9charges Conducteurs",itemId:"/decharges"}),o("ADD_EDIT_CLIENTS")&&e.push({title:"Gestion Des Clients",itemId:"/clients"}),o("ADD_EDIT_DRIVERS")&&e.push({title:"Gestion Des Conducteurs",itemId:"/drivers"}),o("ADD_EDIT_CARS")&&e.push({title:"Gestion Des V\xe9hicules",itemId:"/cars"}),o("ADD_EDIT_USERS")&&e.push({title:"Gestion Des Utilisateurs",itemId:"/users"}),l(e)}),[]),Object(c.jsx)(k,{children:Object(c.jsx)(v.a,{items:r,activePredicate:function(e){var a,c;return(null===t||void 0===t||null===(a=t.pathname)||void 0===a?void 0:a.split("/")[1])===(null===(c=e.itemId)||void 0===c?void 0:c.split("/")[1])},onChange:function(t){var a=t.event,c=t.item;a.preventDefault(),e.push(c.itemId)}})})},D=a(245),w=a(238),z=a(12),T=a(14),V=a(146),E=a.n(V),A=Object(p.a)("div",{height:"48px",width:"100%",borderBottom:"1px solid lightgray",position:"fixed",top:0,zIndex:1,backgroundColor:"white",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}),I=function(){var e=C().user,t=Object(x.f)();return Object(c.jsxs)(A,{children:[Object(c.jsx)(b.b,{style:{marginLeft:20,color:"black",textDecoration:"none",fontWeight:"bold"},to:"/",children:"iFlotte v1.0.0"}),Object(c.jsx)("div",{style:{marginRight:20},children:Object(c.jsx)(D.a,{overrides:{Body:{style:{zIndex:5}}},content:function(){return Object(c.jsxs)(T.a,{padding:"20px",children:[Object(c.jsxs)("h3",{children:[(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)," \ud83d\udc4b"]}),Object(c.jsx)(T.a,{children:Object(c.jsx)(w.a,{style:{width:"100%"},kind:z.a.primary,size:z.c.mini,shape:z.b.pill,onClick:function(){localStorage.setItem("token",""),t.push("/"),document.location.reload()},children:"D\xe9connect\xe9"})})]})},returnFocus:!0,autoFocus:!0,children:Object(c.jsx)(w.a,{kind:z.a.secondary,endEnhancer:function(){return Object(c.jsx)(E.a,{size:16})},size:z.c.compact,shape:z.b.pill,children:(null===e||void 0===e?void 0:e.firstname.toUpperCase())+" "+(null===e||void 0===e?void 0:e.lastname.toUpperCase())})})})]})},P=a(242);function q(){return Object(c.jsx)("div",{children:Object(c.jsx)(P.a,{infinite:!0,successValue:100})})}var R=function(e){var t=e.style,a=e.children,i=e.title;return Object(n.useEffect)((function(){document.title=i?i+" - iFlotte v1.0.0":"iFlotte v1.0.0"}),[i]),Object(c.jsx)("div",{style:Object(g.a)({padding:20,height:"100%",flex:1,paddingLeft:300},t),children:a})},M=function(){var e=C().api,t=Object(n.useState)(!0),a=Object(d.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)([]),s=Object(d.a)(l,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){e.get("/states").then((function(e){u(e.data.data),r(!1)})).catch((function(e){console.log(e),r(!1)}))}),[]),i?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)("h2",{children:"V\xe9hicules:"}),Object(c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(c.jsx)(L,{title:"Nbs V\xe9hicules",nb:null===o||void 0===o?void 0:o.nbCars}),Object(c.jsx)(L,{title:"V\xe9hicules Affect\xe9s",nb:null===o||void 0===o?void 0:o.nbCarsAffecte}),Object(c.jsx)(L,{title:"V\xe9hicules Non Affect\xe9s",nb:null===o||void 0===o?void 0:o.nbCarsNonAffecte}),Object(c.jsx)(L,{title:"V\xe9hicules En Panne",nb:null===o||void 0===o?void 0:o.nbCarsEntreAtelie})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("h2",{children:"Clients:"}),Object(c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(c.jsx)(L,{title:"Nbs Des Clients",nb:null===o||void 0===o?void 0:o.nbClients}),Object(c.jsx)(L,{title:"Nbs Affectations ce mois",nb:null===o||void 0===o?void 0:o.nbAff}),Object(c.jsx)(L,{title:"Nbs Restititions ce mois",nb:null===o||void 0===o?void 0:o.nbRes})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("h2",{children:"Conducteurs:"}),Object(c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(c.jsx)(L,{title:"Nbs Des Conducteurs",nb:null===o||void 0===o?void 0:o.nbDrivers}),Object(c.jsx)(L,{title:"Nbs D\xe9charges ce mois",nb:null===o||void 0===o?void 0:o.nbDech}),Object(c.jsx)(L,{title:"Nbs Restititions ce mois",nb:null===o||void 0===o?void 0:o.nbRDech})]})]})},L=function(e){var t=e.title,a=e.nb;return Object(c.jsxs)("div",{style:{cursor:"pointer",position:"relative",width:290,height:50,margin:10,padding:10,paddingBottom:50,color:"#1e54b7",display:"flex",flexDirection:"column",border:"2px dashed lightgray",justifyContent:"center",alignItems:"center",backgroundColor:"ghostwhite",fontSize:20},children:[Object(c.jsxs)("div",{style:{position:"absolute",right:5,bottom:5,display:"flex",justifyContent:"center",alignItems:"center",height:39,width:39,borderRadius:40,backgroundColor:"#1e54b7",color:"white"},children:[" ",a]}),Object(c.jsx)("div",{style:{fontWeight:"bold"},children:t})]})},N=a(5),G=a.n(N),B=a(25),F=a(11),H=a(244),U=a(150),W=a(18),J=a(240),K=a(246),Y=a(31),Q=a(118),X=a(230),Z=a(234),$=a(4),ee=a(147),te=a.n(ee);function ae(e){var t=e.title,a=Object(x.f)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:36},children:[Object(c.jsx)(w.a,{size:z.c.compact,shape:z.b.pill,startEnhancer:function(){return Object(c.jsx)(te.a,{size:16})},onClick:function(){return a.goBack()},children:"Retour arri\xe8re"}),Object(c.jsx)("h2",{style:{marginLeft:20,marginBottom:0,marginTop:0},children:t})]}),Object(c.jsx)("hr",{})]})}function ce(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/users",exact:!0,children:Object(c.jsx)(ie,{})}),Object(c.jsx)(x.a,{path:"/users/add",children:Object(c.jsx)(re,{})}),Object(c.jsx)(x.a,{path:"/users/edit/:id",children:Object(c.jsx)(le,{})})]})}var ne=[Object(X.a)({title:"Nom d'utilisateur",mapDataToValue:function(e){return e.username}}),Object(X.a)({title:"Nom",mapDataToValue:function(e){return e.firstname}}),Object(X.a)({title:"Prenome",mapDataToValue:function(e){return e.lastname}}),Object(X.a)({title:"Email",mapDataToValue:function(e){return e.mail}}),Object(X.a)({title:"Poste",mapDataToValue:function(e){return e.poste}}),Object(X.a)({title:"TEL",mapDataToValue:function(e){return e.tel}})];function ie(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/auth/users").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/users/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ce utilisateur ?")&&b.delete("/auth/users/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/users/add")},size:z.c.compact,shape:z.b.pill,children:"Ajouter un utilisateur"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:ne,rows:a})]})}function re(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(x.f)(),s=i.a.useState([]),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object(n.useState)(!0)),b=Object(d.a)(j,2),O=b[0],h=b[1],m=Object($.b)(),f=m.control,p=m.handleSubmit,v=m.errors,S=C().api,y=Object(J.a)().enqueue,k=function(){var e=Object(F.a)(G.a.mark((function e(t){var a,c,n,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(B.a)(u),t.roles=a,e.next=4,S.post("/auth/users",t);case 4:(c=e.sent)?(y({message:"utilisateur cr\xe9\xe9"}),l.push("/users/edit/"+(null===c||void 0===c||null===(n=c.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.id))):y({message:"Error !"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S.get("/roles").then((function(e){var t=e.data.data.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{checked:!0})}));r(t),h(!1)})).catch((function(e){var t,a,c=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||""+e;y({message:c}),h(!1)}))}),[]),O?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Ajouter un utilisateur"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:p(k),children:[Object(c.jsx)(H.a,{label:"Nom d'utilisateur",caption:"username"===v.name?"Verifier votre donnee":null,error:"username"===v.name,children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"username",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Nom",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"firstname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Prenom",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"lastname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Email",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"mail",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Mot de pass",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"password",type:"password",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Poste",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"poste",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"TEL",children:Object(c.jsx)($.a,{control:f,defaultValue:"",as:U.a,required:!0,name:"tel",size:"compact",placeholder:""})}),Object(c.jsxs)("div",{style:{border:"1px solid lightgray",padding:10,marginBottom:15},children:[Object(c.jsx)("h3",{children:"Les permissions pour cet utilisateur:"}),a.map((function(e){return Object(c.jsx)(H.a,{children:Object(c.jsxs)(K.a,{onChange:function(t){if(console.log(t.target.checked),t.target.checked)u.push(e.id);else{var a=u.indexOf(e.id);u.splice(a,1)}console.log(u)},name:e.name,checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:["# ",e.name]})},e.id)}))]}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function le(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(J.a)().enqueue,l=Object(x.h)().params,s=C().api,o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(n.useState)([]),h=Object(d.a)(O,2),m=h[0],f=h[1],p=Object($.b)(),v=p.control,S=p.handleSubmit,y=p.errors,k=function(){var e=Object(F.a)(G.a.mark((function e(t){var a,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],m.map((function(e){e.checked&&a.push(e.id)})),t.roles=a,e.next=5,s.put("/auth/users/"+l.id,t);case 5:c=e.sent,r(c?{message:"utilisateur est modifier"}:{message:"Error !"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var t,a,c,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/auth/users/"+l.id);case 2:return(t=e.sent)&&b(t.data.data),e.next=6,s.get("/roles/");case 6:(a=e.sent)&&(c=a.data.data,n=c.map((function(e){for(var a=!1,c=0;c<t.data.data.roles.length;c++)e.name===t.data.data.roles[c].name&&(a=!0);return Object(g.a)(Object(g.a)({},e),{},{checked:a})})),f(n)),i(!1);case 9:case"end":return e.stop()}}),e)}))),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Modifier l'utilisateur: ".concat(null===j||void 0===j?void 0:j.username)}),Object(c.jsxs)("form",{style:{width:500},onSubmit:S(k),children:[Object(c.jsx)(H.a,{label:"Nom d'utilisateur",caption:"username"===y.name?"Verifier votre donnee":null,error:"username"===y.name,children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.username,as:U.a,required:!0,name:"username",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Nom",children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.firstname,as:U.a,required:!0,name:"firstname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Prenom",children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.lastname,as:U.a,required:!0,name:"lastname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Mail",children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.mail,as:U.a,required:!0,name:"mail",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Mot de pass",children:Object(c.jsx)($.a,{control:v,defaultValue:"",as:U.a,name:"password",type:"password",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Poste",children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.poste,as:U.a,required:!0,name:"poste",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"TEL",children:Object(c.jsx)($.a,{control:v,defaultValue:null===j||void 0===j?void 0:j.tel,as:U.a,required:!0,name:"tel",size:"compact",placeholder:""})}),Object(c.jsxs)("div",{style:{border:"1px solid lightgray",padding:10,marginBottom:15},children:[Object(c.jsx)("h3",{children:"Les permissions pour ce utilisateur:"}),m.map((function(e){return Object(c.jsx)(H.a,{children:Object(c.jsxs)(Q.a,{checked:e.checked,onChange:function(t){var a=m.map((function(a){return a.id===e.id?Object(g.a)(Object(g.a)({},a),{},{checked:t.target.checked}):a}));f(a)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:["# ",e.name]})},e.id)}))]}),Object(c.jsx)(w.a,{style:{width:"100%"},size:z.c.compact,shape:z.b.pill,type:"submit",children:"Enregistrer"})]})]})}var se=a(235);function oe(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/cars",exact:!0,children:Object(c.jsx)(je,{})}),Object(c.jsx)(x.a,{path:"/cars/add",children:Object(c.jsx)(de,{})}),Object(c.jsx)(x.a,{path:"/cars/edit/:id",children:Object(c.jsx)(be,{})}),Object(c.jsx)(x.a,{path:"/cars/show/:id",children:Object(c.jsx)(Oe,{})}),Object(c.jsx)(x.a,{path:"/cars/clients/:id",children:Object(c.jsx)(me,{})}),Object(c.jsx)(x.a,{path:"/cars/drivers/:id",children:Object(c.jsx)(pe,{})})]})}var ue=[Object(X.a)({title:"Matricule",mapDataToValue:function(e){return e.matricule}}),Object(X.a)({title:"Ancien Matricule",mapDataToValue:function(e){return e.old_matricule}}),Object(X.a)({title:"Code GPS",mapDataToValue:function(e){return e.code_gps}}),Object(X.a)({title:"Genre",mapDataToValue:function(e){return e.genre}}),Object(X.a)({title:"Genre",mapDataToValue:function(e){return e.genre}}),Object(X.a)({title:"Puissance",mapDataToValue:function(e){return e.puissance}}),Object(X.a)({title:"Energie",mapDataToValue:function(e){return e.energie}}),Object(X.a)({title:"Carrosserie",mapDataToValue:function(e){return e.carrosserie}})];function je(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/cars").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/cars/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/cars/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"75vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/cars/add")},size:z.c.compact,shape:z.b.pill,children:"Ajouter une v\xe9hicule"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:ue,rows:a})]})}function de(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(x.f)()),r=i.a.useState([]),l=Object(d.a)(r,2),s=(l[0],l[1],Object(n.useState)(!1)),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object($.b)()),b=j.control,O=j.handleSubmit,h=(j.errors,C().api),m=Object(J.a)().enqueue,f=Object(n.useState)(),p=Object(d.a)(f,2),v=p[0],g=p[1],S=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prop=v[0].id,e.next=3,h.post("/cars",t);case 3:e.sent?(m({message:"v\xe9hicule cr\xe9\xe9"}),a.push("/cars")):m({message:"Error !"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Ajouter une v\xe9hicule"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:O(S),children:[Object(c.jsx)(H.a,{label:"Matricule",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Proprietaire",children:Object(c.jsx)(se.a,{value:v,options:[{label:"CONDOR LOGISTICS",id:"CONDOR LOGISTICS"},{label:"CONDOR ELECTRONICS",id:"CONDOR ELECTRONICS"},{label:"TRAVOCOVIA REALISATION",id:"TRAVOCOVIA REALISATION"}],onChange:function(e){return g(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Ancien matricule",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"old_matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Color",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"color",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Code GPS",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"code_gps",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Genre",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"genre",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Marque",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"marque",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Type",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"type",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Puissance",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"puissance",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Energie",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"energie",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Carrosserie",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"carrosserie",size:"compact",placeholder:""})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function be(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(J.a)().enqueue,l=Object(x.h)().params,s=C().api,o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(x.f)(),h=Object($.b)(),m=h.control,f=h.handleSubmit,p=(h.errors,Object(n.useState)()),v=Object(d.a)(p,2),g=v[0],S=v[1],y=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prop=g[0].id,e.next=3,s.put("/cars/"+l.id,t);case 3:e.sent?(r({message:"Success"}),O.push("/cars")):r({message:"Error !"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/cars/"+l.id);case 2:(t=e.sent)&&(b(t.data.data),S({id:t.data.data.prop,label:t.data.data.prop})),i(!1);case 5:case"end":return e.stop()}}),e)}))),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Modifier la v\xe9hicule: ".concat(null===j||void 0===j?void 0:j.matricule)}),Object(c.jsxs)("form",{style:{width:500},onSubmit:f(y),children:[Object(c.jsx)(H.a,{label:"Matricule",children:Object(c.jsx)($.a,{control:m,defaultValue:j.matricule,as:U.a,required:!0,name:"matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Proprietaire",children:Object(c.jsx)(se.a,{value:g,options:[{label:"CONDOR LOGISTICS",id:"CONDOR LOGISTICS"},{label:"CONDOR ELECTRONICS",id:"CONDOR ELECTRONICS"},{label:"TRAVOCOVIA REALISATION",id:"TRAVOCOVIA REALISATION"}],onChange:function(e){return S(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Ancien article",children:Object(c.jsx)($.a,{control:m,defaultValue:j.old_matricule,as:U.a,required:!0,name:"old_matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Color",children:Object(c.jsx)($.a,{control:m,defaultValue:j.color,as:U.a,required:!0,name:"color",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Code GPS",children:Object(c.jsx)($.a,{control:m,defaultValue:j.code_gps,as:U.a,required:!0,name:"code_gps",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Genre",children:Object(c.jsx)($.a,{control:m,defaultValue:j.genre,as:U.a,required:!0,name:"genre",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Marque",children:Object(c.jsx)($.a,{control:m,defaultValue:j.marque,as:U.a,required:!0,name:"marque",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Type",children:Object(c.jsx)($.a,{control:m,defaultValue:j.type,as:U.a,required:!0,name:"type",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Puissance",children:Object(c.jsx)($.a,{control:m,defaultValue:j.puissance,as:U.a,required:!0,name:"puissance",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Energie",children:Object(c.jsx)($.a,{control:m,defaultValue:j.energie,as:U.a,required:!0,name:"energie",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Carrosserie",children:Object(c.jsx)($.a,{control:m,defaultValue:j.carrosserie,as:U.a,required:!0,name:"carrosserie",size:"compact",placeholder:""})}),Object(c.jsx)(w.a,{style:{width:"100%"},size:z.c.compact,shape:z.b.pill,type:"submit",children:"Enregistrer"})]})]})}function Oe(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(J.a)().enqueue,l=Object(x.h)().params,s=C().api,o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(x.f)(),h=Object($.b)(),m=(h.control,h.handleSubmit),f=(h.errors,Object(n.useState)()),p=Object(d.a)(f,2),v=p[0],g=p[1],S=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prop=v[0].id,e.next=3,s.put("/cars/"+l.id,t);case 3:e.sent?(r({message:"Success"}),O.push("/cars")):r({message:"Error !"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/cars/"+l.id);case 2:(t=e.sent)&&(b(t.data.data),g({id:t.data.data.prop,label:t.data.data.prop})),i(!1);case 5:case"end":return e.stop()}}),e)}))),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"V\xe9hicule: ".concat(null===j||void 0===j?void 0:j.matricule)}),Object(c.jsxs)("form",{style:{width:500},onSubmit:m(S),children:[Object(c.jsx)(H.a,{label:"Matricule",children:Object(c.jsx)(U.a,{value:j.matricule,as:U.a,name:"matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Proprietaire",children:Object(c.jsx)(se.a,{value:v,options:[{label:"CONDOR LOGISTICS",id:"CONDOR LOGISTICS"},{label:"CONDOR ELECTRONICS",id:"CONDOR ELECTRONICS"},{label:"TRAVOCOVIA REALISATION",id:"TRAVOCOVIA REALISATION"}],required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Ancien article",children:Object(c.jsx)(U.a,{value:j.old_matricule,name:"old_matricule",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Color",children:Object(c.jsx)(U.a,{value:j.color,name:"color",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Code GPS",children:Object(c.jsx)(U.a,{value:j.code_gps,as:U.a,name:"code_gps",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Genre",children:Object(c.jsx)(U.a,{value:j.genre,name:"genre",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Marque",children:Object(c.jsx)(U.a,{value:j.marque,name:"marque",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Type",children:Object(c.jsx)(U.a,{value:j.type,name:"type",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Puissance",children:Object(c.jsx)(U.a,{value:j.puissance,name:"puissance",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Energie",children:Object(c.jsx)(U.a,{value:j.energie,as:U.a,name:"energie",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Carrosserie",children:Object(c.jsx)(U.a,{value:j.carrosserie,name:"carrosserie",size:"compact",placeholder:""})})]})]})}var he=[Object(X.a)({title:"Code",mapDataToValue:function(e){return e.code}}),Object(X.a)({title:"D\xe9signation",mapDataToValue:function(e){return e.designation}}),Object(X.a)({title:"Client Hi\xe9rarchique",mapDataToValue:function(e){return e.client?e.client.designation:"-"}}),Object(X.a)({title:"Date Affectation",mapDataToValue:function(e){return e.pivot.date_affectation}}),Object(X.a)({title:"Date Fin Pr\xe9station",mapDataToValue:function(e){return e.pivot.date_end_prestation?e.pivot.date_end_prestation:"-"}}),Object(X.a)({title:"Date Restitition",mapDataToValue:function(e){return e.pivot.date_restitition?e.pivot.date_restitition:"-"}})];function me(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=(Object(x.f)(),Object(x.h)().params),b=C().api,O=(Object(J.a)().enqueue,Object(n.useState)(null)),h=Object(d.a)(O,2),m=h[0],f=h[1];Object(n.useEffect)((function(){b.get("/cars/clients/"+j.id).then((function(e){var t,a,c,n,i;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a||null===(c=a.clients)||void 0===c?void 0:c.map((function(e){return{id:e.id,data:e}}))),f(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.car),u(!1)})).catch((function(){u(!1)}))}),[]);return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsx)(ae,{title:"Historique Des Clients Pour La V\xe9hicule: "+(null===m||void 0===m?void 0:m.matricule),shape:z.b.pill}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:[],columns:he,rows:a})]})}var fe=[Object(X.a)({title:"Nom",mapDataToValue:function(e){return e.firstname}}),Object(X.a)({title:"Pr\xe9nom",mapDataToValue:function(e){return e.lastname}}),Object(X.a)({title:"Tel",mapDataToValue:function(e){return e.tel}}),Object(X.a)({title:"Code paie",mapDataToValue:function(e){return e.code_paie}}),Object(X.a)({title:"Date D\xe9charge",mapDataToValue:function(e){return e.pivot.date_affectation_driver?e.pivot.date_affectation_driver:"-"}}),Object(X.a)({title:"Date Restitition D\xe9charge",mapDataToValue:function(e){return e.pivot.date_restitition_driver?e.pivot.date_restitition_driver:"-"}})];function pe(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=(Object(x.f)(),Object(x.h)().params),b=C().api,O=(Object(J.a)().enqueue,Object(n.useState)(null)),h=Object(d.a)(O,2),m=h[0],f=h[1];Object(n.useEffect)((function(){b.get("/cars/drivers/"+j.id).then((function(e){var t,a,c,n,i;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a||null===(c=a.drivers)||void 0===c?void 0:c.map((function(e){return{id:e.id,data:e}}))),f(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.car),u(!1)})).catch((function(){u(!1)}))}),[]);return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsx)(ae,{title:"Historique Des Conducteurs Pour La V\xe9hicule: "+(null===m||void 0===m?void 0:m.matricule),shape:z.b.pill}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:[],columns:fe,rows:a})]})}var xe=a(236);function ve(){return Object(c.jsx)(x.c,{children:Object(c.jsx)(x.a,{path:"/emr",exact:!0,children:Object(c.jsx)(Se,{})})})}var ge=[Object(X.a)({title:"Matricule",mapDataToValue:function(e){return e.matricule}}),Object(X.a)({title:"Code GPS",mapDataToValue:function(e){return e.code_gps}}),Object(xe.a)({title:"Marque",mapDataToValue:function(e){return e.marque}}),Object(xe.a)({title:"Genre",mapDataToValue:function(e){return e.genre}}),Object(xe.a)({title:"Status",mapDataToValue:function(e){var t,a=(null===(t=e.latestState)||void 0===t?void 0:t.name)?e.latestState.name:"En marche";return"marche"===a&&(a="En marche"),"entre_atelie"===a&&(a="Entr\xe9e d'atelie"),"sortie_atelie"===a&&(a="Sortie d'atelie"),"accedente"===a&&(a="V\xe9hicule Accedent\xe9"),a}}),Object(xe.a)({title:"Client",mapDataToValue:function(e){return e.latestClient?e.latestClient.designation:"Non Affect\xe9"}}),Object(xe.a)({title:"Conducteur",mapDataToValue:function(e){return e.latestDriver?e.latestDriver.firstname+" "+e.latestDriver.lastname:"Sans Conducteur"}})];function Se(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C(),O=b.api;b.user,Object(J.a)().enqueue;Object(n.useEffect)((function(){O.get("/cars").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var h=[];return h.push({label:"Historique des status",onClick:function(e){var t=e.row;return j.push("/cars_state/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.a,{size:t})}}),h.push({label:"Historique des conducteur",onClick:function(e){var t=e.row;return j.push("/cars/drivers/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.e,{size:t})}}),h.push({label:"Historique des clients",onClick:function(e){var t=e.row;return j.push("/cars/clients/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.g,{size:t})}}),h.push({label:"Affiche",onClick:function(e){var t=e.row;return j.push("/cars/show/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.c,{size:t})}}),o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsx)(R,{style:{height:"80vh"},children:Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:h,columns:ge,rows:a})})}function ye(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/drivers",exact:!0,children:Object(c.jsx)(ke,{})}),Object(c.jsx)(x.a,{path:"/drivers/add",children:Object(c.jsx)(_e,{})}),Object(c.jsx)(x.a,{path:"/drivers/edit/:id",children:Object(c.jsx)(De,{})})]})}var Ce=[Object(X.a)({title:"Nom",mapDataToValue:function(e){return e.firstname}}),Object(X.a)({title:"Pr\xe9nom",mapDataToValue:function(e){return e.lastname}}),Object(X.a)({title:"Tel",mapDataToValue:function(e){return e.tel}}),Object(X.a)({title:"Code paie",mapDataToValue:function(e){return e.code_paie}})];function ke(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/drivers").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/drivers/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/drivers/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"75vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/drivers/add")},size:z.c.compact,shape:z.b.pill,children:"Ajouter un conducteur"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:Ce,rows:a})]})}function _e(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(x.f)()),r=i.a.useState([]),l=Object(d.a)(r,2),s=(l[0],l[1],Object(n.useState)(!1)),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object($.b)()),b=j.control,O=j.handleSubmit,m=(j.errors,C().api),f=Object(J.a)().enqueue,p=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/drivers",t);case 3:e.sent,h.b.dark("Bien ajouter."),a.push("/drivers"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f({message:"Error !"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Ajouter un conducteur"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:O(p),children:[Object(c.jsx)(H.a,{label:"Nom",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"firstname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Pr\xe9nom",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"lastname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"TEL",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"tel",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Code Paie",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"code_paie",size:"compact",placeholder:""})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function De(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(J.a)().enqueue,l=Object(x.h)().params,s=C().api,o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(x.f)(),h=Object($.b)(),m=h.control,f=h.handleSubmit,p=(h.errors,function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.put("/drivers/"+l.id,t);case 2:e.sent?(r({message:"Success"}),O.push("/drivers")):r({message:"Error !"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/drivers/"+l.id);case 2:(t=e.sent)&&b(t.data.data),i(!1);case 5:case"end":return e.stop()}}),e)}))),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Modifier le conducteur: ".concat((null===j||void 0===j?void 0:j.firstname)+" "+(null===j||void 0===j?void 0:j.lastname))}),Object(c.jsxs)("form",{style:{width:500},onSubmit:f(p),children:[Object(c.jsx)(H.a,{label:"Nom",children:Object(c.jsx)($.a,{control:m,defaultValue:j.firstname,as:U.a,required:!0,name:"firstname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Pr\xe9nom",children:Object(c.jsx)($.a,{control:m,defaultValue:j.lastname,as:U.a,required:!0,name:"lastname",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"TEL",children:Object(c.jsx)($.a,{control:m,defaultValue:j.tel,as:U.a,required:!0,name:"tel",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Code Paie",children:Object(c.jsx)($.a,{control:m,defaultValue:j.code_paie,as:U.a,required:!0,name:"code_paie",size:"compact",placeholder:""})}),Object(c.jsx)(w.a,{style:{width:"100%"},size:z.c.compact,shape:z.b.pill,type:"submit",children:"Enregistrer"})]})]})}var we=a(247);function ze(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/clients",exact:!0,children:Object(c.jsx)(Ve,{})}),Object(c.jsx)(x.a,{path:"/clients/add",children:Object(c.jsx)(Ee,{})}),Object(c.jsx)(x.a,{path:"/clients/edit/:id",children:Object(c.jsx)(Ae,{})})]})}var Te=[Object(X.a)({title:"Code(SAP)",mapDataToValue:function(e){return e.code}}),Object(X.a)({title:"D\xe9signation",mapDataToValue:function(e){return e.designation}}),Object(X.a)({title:"Client Hi\xe9rarchique",mapDataToValue:function(e){return e.client?e.client.designation:"-"}})];function Ve(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/clients").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/clients/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/clients/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"75vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/clients/add")},size:z.c.compact,shape:z.b.pill,children:"Ajouter un Client/Structure"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:Te,rows:a})]})}function Ee(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(x.f)()),r=i.a.useState([]),l=Object(d.a)(r,2),s=(l[0],l[1],Object(n.useState)(!1)),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object($.b)()),b=j.control,O=j.handleSubmit,h=(j.errors,C().api),m=Object(J.a)().enqueue,f=i.a.useState(""),p=Object(d.a)(f,2),v=p[0],g=p[1],S=i.a.useState([]),y=Object(d.a)(S,2),k=y[0],_=y[1],D=i.a.useState(null),T=Object(d.a)(D,2),V=T[0],E=T[1],A=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.client_id=null===V||void 0===V?void 0:V.id,e.prev=1,e.next=4,h.post("/clients",t);case 4:e.sent,m({message:"Success"}),a.push("/clients"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m({message:"Error !"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Ajouter un Client/Structure"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:O(A),children:[Object(c.jsx)(H.a,{label:"Code(SAP)",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"code",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"D\xe9signation",children:Object(c.jsx)($.a,{control:b,defaultValue:"",as:U.a,required:!0,name:"designation",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Client Hi\xe9rarchique",children:Object(c.jsx)(we.a,{value:v,onChange:function(e,t){var a,c;g(e),E(t),a=e,c=_,h.get("/clients/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.designation},options:k,name:"client_id",size:"compact"})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function Ae(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(J.a)().enqueue,s=Object(x.h)().params,o=C().api,u=Object(n.useState)(null),j=Object(d.a)(u,2),b=j[0],O=j[1],h=Object(x.f)(),m=Object($.b)(),f=m.control,p=m.handleSubmit,v=(m.errors,i.a.useState("")),g=Object(d.a)(v,2),S=g[0],y=g[1],k=i.a.useState([]),_=Object(d.a)(k,2),D=_[0],T=_[1],V=i.a.useState(null),E=Object(d.a)(V,2),A=E[0],I=E[1],P=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.client_id=null===A||void 0===A?void 0:A.id,e.next=3,o.put("/clients/"+s.id,t);case 3:e.sent?(l({message:"Success"}),h.push("/clients")):l({message:"Error !"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var t,a,c,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get("/clients/"+s.id);case 2:(t=e.sent)&&(O(t.data.data),I(null===(a=t.data.data)||void 0===a?void 0:a.client),y(null===(c=t.data.data)||void 0===c||null===(n=c.client)||void 0===n?void 0:n.designation)),r(!1);case 5:case"end":return e.stop()}}),e)}))),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Modifier la structure: ".concat(null===b||void 0===b?void 0:b.designation)}),Object(c.jsxs)("form",{style:{width:500},onSubmit:p(P),children:[Object(c.jsx)(H.a,{label:"Code(SAP)",children:Object(c.jsx)($.a,{control:f,defaultValue:b.code,as:U.a,required:!0,name:"code",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"D\xe9singation",children:Object(c.jsx)($.a,{control:f,defaultValue:b.designation,as:U.a,required:!0,name:"designation",size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Client Hi\xe9rarchique",children:Object(c.jsx)(we.a,{value:S,onChange:function(e,t){var a,c;y(e),I(t),a=e,c=T,o.get("/clients/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.designation},options:D,name:"client_id",size:"compact"})}),Object(c.jsx)(w.a,{style:{width:"100%"},size:z.c.compact,shape:z.b.pill,type:"submit",children:"Enregistrer"})]})]})}var Ie=a(233),Pe=a(30),qe=a(16),Re=a.n(qe),Me=[{label:"En marche",id:"marche"},{label:"Entr\xe9e d'atelie",id:"entre_atelie"},{label:"Sortie d'atelie",id:"sortie_atelie"},{label:"V\xe9hicule En Mission",id:"mission"},{label:"V\xe9hicule En Panne",id:"panne"},{label:"V\xe9hicule Accedent\xe9",id:"accedente"}],Le=[{label:"Conducteur Cong\xe9",id:"conge"},{label:"Changement de conducteur",id:"change"},{label:"Fin Pr\xe9station",id:"end_prestation"}],Ne=[{label:"V\xe9hicule En Panne",id:"panne"},{label:"Fin De Prestation",id:"end_prestation"},{label:"Pour Chang\xe9 La V\xe9hicule",id:"change"}],Ge=a(248);function Be(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/affectations",exact:!0,children:Object(c.jsx)(He,{})}),Object(c.jsx)(x.a,{path:"/affectations/add",children:Object(c.jsx)(Ue,{})}),Object(c.jsx)(x.a,{path:"/affectations/edit/:id",children:Object(c.jsx)(We,{})}),Object(c.jsx)(x.a,{path:"/affectations/show/:id",children:Object(c.jsx)(Je,{})}),Object(c.jsx)(x.a,{path:"/affectations/restitition/:id",children:Object(c.jsx)(Ke,{})})]})}var Fe=[Object(X.a)({title:"V\xe9hicule",mapDataToValue:function(e){return e.car.matricule}}),Object(X.a)({title:"Client",mapDataToValue:function(e){return e.client.designation}}),Object(X.a)({title:"Date Affectation",mapDataToValue:function(e){return e.date_affectation}}),Object(X.a)({title:"Date Fin Pr\xe9station",mapDataToValue:function(e){return e.date_end_prestation?e.date_end_prestation:""}}),Object(X.a)({title:"Date Restitition",mapDataToValue:function(e){return e.date_restitition?e.date_restitition:""}})];function He(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/affectations").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Restitition",onClick:function(e){var t=e.row;j.push("/affectations/restitition/"+t.data.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.d,{size:t})}},{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/affectations/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Modifier",onClick:function(e){var t=e.row;return j.push("/affectations/show/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.c,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/affectations/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/affectations/add")},size:z.c.compact,shape:z.b.pill,children:"Nouvelle Affectation"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:Fe,rows:a})]})}function Ue(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(x.f)()),r=i.a.useState([]),l=Object(d.a)(r,2),s=(l[0],l[1],Object(n.useState)(!1)),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object($.b)()),b=(j.control,j.handleSubmit),O=(j.errors,C().api),h=Object(J.a)().enqueue,m=i.a.useState(""),f=Object(d.a)(m,2),p=f[0],v=f[1],g=i.a.useState([]),S=Object(d.a)(g,2),y=S[0],k=S[1],_=i.a.useState(null),D=Object(d.a)(_,2),T=D[0],V=D[1],E=i.a.useState(""),A=Object(d.a)(E,2),I=A[0],P=A[1],M=i.a.useState([]),L=Object(d.a)(M,2),N=L[0],B=L[1],U=i.a.useState(null),W=Object(d.a)(U,2),K=W[0],Y=W[1],Q=i.a.useState(""),X=Object(d.a)(Q,2),Z=(X[0],X[1],i.a.useState([])),ee=Object(d.a)(Z,2),te=(ee[0],ee[1],i.a.useState(null)),ce=Object(d.a)(te,2),ne=(ce[0],ce[1],Object(n.useState)(new Date)),ie=Object(d.a)(ne,2),re=ie[0],le=ie[1],se=Object(n.useState)(null),oe=Object(d.a)(se,2),ue=oe[0],je=oe[1],de=Object(n.useState)(!1),be=Object(d.a)(de,2),Oe=(be[0],be[1],Object(n.useState)(!1)),he=Object(d.a)(Oe,2),me=(he[0],he[1],Object(n.useState)(!1)),fe=Object(d.a)(me,2),pe=(fe[0],fe[1],Object(n.useState)(!1)),xe=Object(d.a)(pe,2),ve=(xe[0],xe[1],Object(n.useState)(!1)),ge=Object(d.a)(ve,2),Se=(ge[0],ge[1],Object(n.useState)(!1)),ye=Object(d.a)(Se,2),Ce=(ye[0],ye[1],Object(n.useState)(!1)),ke=Object(d.a)(Ce,2),_e=(ke[0],ke[1],Object(n.useState)(!1)),De=Object(d.a)(_e,2),ze=(De[0],De[1],Object(n.useState)(!1)),Te=Object(d.a)(ze,2),Ve=(Te[0],Te[1],Object(n.useState)(!1)),Ee=Object(d.a)(Ve,2),Ae=(Ee[0],Ee[1],Object(n.useState)(!1)),qe=Object(d.a)(Ae,2),Re=(qe[0],qe[1],Object(n.useState)(1)),Me=Object(d.a)(Re,2),Le=(Me[0],Me[1],Object(n.useState)("")),Ne=Object(d.a)(Le,2),Be=Ne[0],Fe=Ne[1],He=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&I){e.next=3;break}return alert("Il ya des champs vides"),e.abrupt("return");case 3:t.date_affectation=re,t.date_end_prestation=ue,t.car_id=null===T||void 0===T?void 0:T.id,t.client_id=null===K||void 0===K?void 0:K.id,t.affectation_client_comment=Be,O.post("/affectations",t).then((function(e){h({message:"Success"}),a.push("/affectations")})).catch((function(e){var t,a;alert("Error ! "+(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Affect\xe9 une v\xe9hicule"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:b(He),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:p,onChange:function(e,t){var a,c;v(e),V(t),a=e,c=k,O.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.matricule},options:y,name:"car_id",size:"compact",required:!0})}),Object(c.jsx)(H.a,{label:"Client",children:Object(c.jsx)(we.a,{value:I,onChange:function(e,t){var a,c;P(e),Y(t),a=e,c=B,O.get("/clients/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.designation},options:N,name:"client_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Affectation",children:Object(c.jsx)(Ie.a,{value:re,onChange:function(e){var t=e.date;le(t),console.log(t)},formatString:"dd/MM/yyyy",name:"date_affectation",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Fin du Pr\xe9station",children:Object(c.jsx)(Ie.a,{value:ue,onChange:function(e){var t=e.date;je(t),console.log(t)},formatString:"dd/MM/yyyy",name:"date_end_prestation",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:Be,onChange:function(e){return Fe(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)("hr",{}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function We(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(n.useState)(!0)),r=Object(d.a)(a,2),l=r[0],s=r[1],o=Object(x.f)(),u=Object(x.h)().params,j=i.a.useState([]),b=Object(d.a)(j,2),O=(b[0],b[1],Object($.b)()),h=(O.control,O.handleSubmit),m=(O.errors,C().api),f=(Object(J.a)().enqueue,i.a.useState("")),p=Object(d.a)(f,2),v=p[0],g=p[1],S=i.a.useState([]),y=Object(d.a)(S,2),k=y[0],_=y[1],D=i.a.useState(null),T=Object(d.a)(D,2),V=T[0],E=T[1],A=i.a.useState(""),I=Object(d.a)(A,2),P=I[0],M=I[1],L=i.a.useState([]),N=Object(d.a)(L,2),B=N[0],U=N[1],W=i.a.useState(null),K=Object(d.a)(W,2),Y=K[0],Q=K[1],X=i.a.useState(""),Z=Object(d.a)(X,2),ee=(Z[0],Z[1],i.a.useState([])),te=Object(d.a)(ee,2),ce=(te[0],te[1],i.a.useState(null)),ne=Object(d.a)(ce,2),ie=(ne[0],ne[1],Object(n.useState)(new Date)),re=Object(d.a)(ie,2),le=re[0],se=re[1],oe=Object(n.useState)(null),ue=Object(d.a)(oe,2),je=ue[0],de=ue[1],be=Object(n.useState)(!1),Oe=Object(d.a)(be,2),he=(Oe[0],Oe[1],Object(n.useState)(!1)),me=Object(d.a)(he,2),fe=(me[0],me[1],Object(n.useState)(!1)),pe=Object(d.a)(fe,2),xe=(pe[0],pe[1],Object(n.useState)(!1)),ve=Object(d.a)(xe,2),ge=(ve[0],ve[1],Object(n.useState)(!1)),Se=Object(d.a)(ge,2),ye=(Se[0],Se[1],Object(n.useState)(!1)),Ce=Object(d.a)(ye,2),ke=(Ce[0],Ce[1],Object(n.useState)(!1)),_e=Object(d.a)(ke,2),De=(_e[0],_e[1],Object(n.useState)(!1)),ze=Object(d.a)(De,2),Te=(ze[0],ze[1],Object(n.useState)(!1)),Ve=Object(d.a)(Te,2),Ee=(Ve[0],Ve[1],Object(n.useState)(!1)),Ae=Object(d.a)(Ee,2),qe=(Ae[0],Ae[1],Object(n.useState)(!1)),Re=Object(d.a)(qe,2),Me=(Re[0],Re[1],Object(n.useState)(1)),Le=Object(d.a)(Me,2),Ne=(Le[0],Le[1],Object(n.useState)("")),Be=Object(d.a)(Ne,2),Fe=Be[0],He=Be[1],Ue=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&P){e.next=3;break}return alert("Il ya des champs vides"),e.abrupt("return");case 3:t.date_affectation=le,t.date_end_prestation=je,t.car_id=null===V||void 0===V?void 0:V.id,t.client_id=null===Y||void 0===Y?void 0:Y.id,t.affectation_client_comment=Fe,m.put("/affectations/"+u.id,t).then((function(e){alert("Success"),o.push("/affectations")})).catch((function(e){var t,a,c,n;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message),alert("Error ! "+(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m.get("affectations/"+u.id).then((function(e){var t=e.data.data;g(t.car.matricule),E(t.car),M(t.client.designation),Q(t.client),se(new Date(t.date_affectation)),de(t.date_end_prestation?new Date(t.date_end_prestation):null),He(t.affectation_client_comment),s(!1)})).catch((function(){alert("error")}))}),[]),l?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Modifier l'affectation actuale de v\xe9hicule: "+v}),Object(c.jsxs)("form",{style:{width:500},onSubmit:h(Ue),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:v,onChange:function(e,t){var a,c;g(e),E(t),a=e,c=_,m.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.matricule},options:k,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Client",children:Object(c.jsx)(we.a,{value:P,onChange:function(e,t){var a,c;M(e),Q(t),a=e,c=U,m.get("/clients/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.designation},options:B,name:"client_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Affectation",children:Object(c.jsx)(Ie.a,{value:le,onChange:function(e){var t=e.date;se(t),console.log(t)},formatString:"dd/MM/yyyy",name:"date_affectation",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Fin du Pr\xe9station",children:Object(c.jsx)(Ie.a,{value:je,onChange:function(e){var t=e.date;de(t),console.log(t)},formatString:"dd/MM/yyyy",name:"date_end_prestation",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:Fe,onChange:function(e){return He(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function Je(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(n.useState)(!0)),r=Object(d.a)(a,2),l=r[0],s=r[1],o=Object(x.f)(),u=Object(x.h)().params,j=i.a.useState([]),b=Object(d.a)(j,2),O=(b[0],b[1],Object($.b)()),h=(O.control,O.handleSubmit),m=(O.errors,C().api),f=Object(J.a)().enqueue,p=i.a.useState(""),v=Object(d.a)(p,2),g=v[0],S=v[1],y=i.a.useState([]),k=Object(d.a)(y,2),_=(k[0],k[1],i.a.useState(null)),D=Object(d.a)(_,2),w=D[0],z=D[1],T=i.a.useState(""),V=Object(d.a)(T,2),E=V[0],A=V[1],I=i.a.useState([]),P=Object(d.a)(I,2),M=(P[0],P[1],i.a.useState(null)),L=Object(d.a)(M,2),N=L[0],B=L[1],W=i.a.useState(""),K=Object(d.a)(W,2),Y=(K[0],K[1],i.a.useState([])),Q=Object(d.a)(Y,2),X=(Q[0],Q[1],i.a.useState(null)),Z=Object(d.a)(X,2),ee=Z[0],te=(Z[1],Object(n.useState)(new Date)),ce=Object(d.a)(te,2),ne=ce[0],ie=ce[1],re=Object(n.useState)(null),le=Object(d.a)(re,2),se=le[0],oe=le[1],ue=Object(n.useState)(!1),je=Object(d.a)(ue,2),de=je[0],be=(je[1],Object(n.useState)(!1)),Oe=Object(d.a)(be,2),he=Oe[0],me=(Oe[1],Object(n.useState)(!1)),fe=Object(d.a)(me,2),pe=fe[0],xe=(fe[1],Object(n.useState)(!1)),ve=Object(d.a)(xe,2),ge=ve[0],Se=(ve[1],Object(n.useState)(!1)),ye=Object(d.a)(Se,2),Ce=ye[0],ke=(ye[1],Object(n.useState)(!1)),_e=Object(d.a)(ke,2),De=_e[0],we=(_e[1],Object(n.useState)(!1)),ze=Object(d.a)(we,2),Te=ze[0],Ve=(ze[1],Object(n.useState)(!1)),Ee=Object(d.a)(Ve,2),Ae=(Ee[0],Ee[1],Object(n.useState)(!1)),Ie=Object(d.a)(Ae,2),Pe=(Ie[0],Ie[1],Object(n.useState)(!1)),qe=Object(d.a)(Pe,2),Re=(qe[0],qe[1],Object(n.useState)(!1)),Me=Object(d.a)(Re,2),Le=(Me[0],Me[1],Object(n.useState)(1)),Ne=Object(d.a)(Le,2),Be=(Ne[0],Ne[1],Object(n.useState)("")),Fe=Object(d.a)(Be,2),He=Fe[0],Ue=Fe[1],We=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.with_driver=de,t.date_affectation=ne,t.date_end_prestation=se,t.car_id=null===w||void 0===w?void 0:w.id,t.client_id=null===N||void 0===N?void 0:N.id,t.driver_id=ee.id,t.carte_grise=he,t.assurance=pe,t.vignette=ge,t.carte_gpl=Ce,t.permis_circuler=De,t.scanner=Te,t.affectation_client_comment=He,m.post("/affectations",t).then((function(e){f({message:"Success"}),o.push("/affectations")})).catch((function(e){var t,a,c,n;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message),f({message:"Error ! "+(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message)})}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m.get("affectations/"+u.id).then((function(e){var t=e.data.data;S(t.car.matricule),z(t.car),A(t.client.designation),B(t.client),ie(t.date_affectation),oe(t.date_end_prestation),Ue(t.affectation_client_comment),s(!1)})).catch((function(){alert("error")}))}),[]),l?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Affectation (N\xb0"+u.id+") de v\xe9hicule: "+g}),Object(c.jsxs)("form",{style:{width:500},onSubmit:h(We),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(U.a,{value:g,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Client",children:Object(c.jsx)(U.a,{value:E,name:"client_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Affectation",children:Object(c.jsx)(U.a,{value:ne,name:"date_affectation",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Fin du Pr\xe9station",children:Object(c.jsx)(U.a,{value:se,disabled:!se,name:"date_end_prestation",size:"compact"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:He,placeholder:"",clearOnEscape:!0})})]})]})}function Ke(){var e=Object(x.h)().params,t=Object(x.f)(),a=C().api,i=Object(n.useState)(!0),r=Object(d.a)(i,2),l=r[0],s=r[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(n.useState)(new Date),h=Object(d.a)(O,2),m=h[0],f=h[1],p=Object(n.useState)(""),v=Object(d.a)(p,2),g=v[0],S=v[1],y=Object(n.useState)(""),k=Object(d.a)(y,2),_=k[0],D=k[1];if(Object(n.useEffect)((function(){a.get("affectations/"+e.id).then((function(e){console.log(e.data.data),b(e.data.data),e.data.data.date_restitition?f(new Date(e.data.data.date_restitition)):f(new Date),S([{id:e.data.data.motif_restitition}]),D(e.data.data.restitition_comment),s(!1)})).catch((function(e){console.log(e),s(!1)}))}),[]),l)return Object(c.jsx)(R,{children:Object(c.jsx)(q,{})});var T=function(c){c.preventDefault();var n={};n.date_restitition=m,n.motif_restitition=g[0].id,n.restitition_comment=_,a.post("affectations/restitition/"+e.id,n).then((function(e){alert("Success"),t.goBack()})).catch((function(e){alert(e)}))};return(null===j||void 0===j?void 0:j.date_restitition)?Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Modifier La Restitition De V\xe9hicule: "+j.car.matricule}),Object(c.jsxs)("form",{style:{width:500},onSubmit:T,children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(U.a,{value:j.car.matricule,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Client",children:Object(c.jsx)(U.a,{value:j.client.designation,name:"client_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Affectation",children:Object(c.jsx)(U.a,{value:j.date_affectation,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Fin du Pr\xe9station",children:Object(c.jsx)(U.a,{value:j.date_end_prestation,disabled:!j.date_end_prestation,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Restitition",children:Object(c.jsx)(Ie.a,{value:m,onChange:function(e){var t=e.date;f(t)},formatString:"dd/MM/yyyy",name:"date_restitition",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Motif De Restitition",children:Object(c.jsx)(se.a,{value:g,options:Ne,onChange:function(e){return S(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:_,onChange:function(e){return D(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[Object(c.jsx)(w.a,{style:{width:"47%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"}),Object(c.jsx)(w.a,{style:{width:"47%",backgroundColor:"#f44336"},onClick:function(c){c.preventDefault();var n={date_restitition:null,motif_restitition:null,restitition_comment:null};a.post("affectations/restitition/"+e.id,n).then((function(e){alert("Success"),t.goBack()})).catch((function(e){alert(e)}))},size:z.c.compact,shape:z.b.pill,children:"Supprimer la restitition"})]})]})]}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Restitition de v\xe9hicule: "+j.car.matricule}),Object(c.jsxs)("form",{style:{width:500},onSubmit:T,children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(U.a,{value:j.car.matricule,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Client",children:Object(c.jsx)(U.a,{value:j.client.designation,name:"client_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Affectation",children:Object(c.jsx)(U.a,{value:j.date_affectation,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Fin du Pr\xe9station",children:Object(c.jsx)(U.a,{value:j.date_end_prestation,disabled:!j.date_end_prestation,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Restitition",children:Object(c.jsx)(Ie.a,{value:m,onChange:function(e){var t=e.date;f(t)},formatString:"dd/MM/yyyy",name:"date_restitition",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Motif De Restitition",children:Object(c.jsx)(se.a,{value:g,options:Ne,onChange:function(e){return S(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:_,onChange:function(e){return D(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)("hr",{}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}var Ye=a(74),Qe=a(75),Xe=a(77),Ze=a(76),$e=a(81),et={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},tt=function(e){Object(Xe.a)(a,e);var t=Object(Ze.a)(a);function a(){return Object(Ye.a)(this,a),t.apply(this,arguments)}return Object(Qe.a)(a,[{key:"render",value:function(){var e,t,a,n,i=this.props.decharge;return Object(c.jsxs)("div",{style:et.page,children:[Object(c.jsxs)("div",{style:et.pageHeader,children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"50mm"},children:Object(c.jsx)("img",{style:{width:"45mm"},src:"/logo.png"})}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(c.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(c.jsx)("div",{children:"DECHARGE"}),Object(c.jsx)("div",{children:"N\xb0".concat(i.id," DL/").concat(Re()().year())})]})]}),Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"50mm"},children:Object(c.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(c.jsxs)("div",{style:et.pageBody,children:[Object(c.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(c.jsx)("b",{children:"Client: "})," ",(null===i||void 0===i||null===(e=i.car)||void 0===e?void 0:e.latestClient)?null===i||void 0===i||null===(t=i.car)||void 0===t||null===(a=t.latestClient)||void 0===a?void 0:a.designation:"/","."]}),Object(c.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(c.jsx)("u",{children:Object(c.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Marque:"})," ",i.car.marque]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Matricule:"})," ",i.car.matricule]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Code GPS:"})," ",i.car.code_gps]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Odometre:"})," ",i.km]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",i.cle_vehicule]})]})]}),Object(c.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(c.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(c.jsxs)("b",{children:[" ",i.driver.firstname.toUpperCase()+" "+i.driver.lastname.toUpperCase()]}),", ",Object(c.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(c.jsx)("b",{children:i.driver.tel}),Object(c.jsx)("br",{}),"Reconnais avoir re\xe7u ce jour"," ",Object(c.jsx)("b",{children:Re()(i.date_affectation_driver).format("D-M-yy")}),":",Object(c.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(c.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(c.jsxs)("ol",{style:{marginLeft:"5mm"},children:[" ",Object(c.jsx)(at,{decharge:i,name:"carte_grise",title:"Carte grise"}),Object(c.jsx)(at,{decharge:i,name:"assurance",title:"Assurance"}),Object(c.jsx)(at,{decharge:i,name:"vignette",title:"Vignette"}),Object(c.jsx)(at,{decharge:i,name:"carte_gpl",title:"carte GPL"}),Object(c.jsx)(at,{decharge:i,name:"permis_circuler",title:"Permis circuler"}),Object(c.jsx)(at,{decharge:i,name:"scanner",title:"Scanner"})]}),Object(c.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(c.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(c.jsxs)("ol",{style:{marginLeft:"5mm"},children:[Object(c.jsx)(at,{decharge:i,name:"roue_secour",title:"Roue de secours"}),Object(c.jsx)(at,{decharge:i,name:"cric",title:"Cric"}),Object(c.jsx)(at,{decharge:i,name:"cle_roue",title:"Cle de roue"}),Object(c.jsx)(at,{decharge:i,name:"poste_radio",title:"Poste radio"})]})]}),Object(c.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(c.jsx)("u",{children:Object(c.jsx)("b",{children:"Observations: "})})," ",i.affectation_comment]})]}),Object(c.jsxs)("div",{style:et.pageFooter,children:[Object(c.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(c.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(c.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(c.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(c.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+(null===i||void 0===i||null===(n=i.createdby)||void 0===n?void 0:n.username)," |"," ","Imprimer Le: ".concat(Re()().format("D-M-yy"))," |"," ",document.location.toString()]})]})]})}}]),a}(i.a.Component),at=function(e){var t=e.decharge,a=e.name,n=e.title;return t[a]?Object(c.jsxs)("li",{style:{margin:"2mm"},children:[Object(c.jsx)("input",{style:{marginRight:"2mm"},checked:t[a],type:"checkbox"}),Object(c.jsx)("b",{children:n})]}):Object(c.jsx)(c.Fragment,{})},ct={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},nt=function(e){Object(Xe.a)(a,e);var t=Object(Ze.a)(a);function a(){return Object(Ye.a)(this,a),t.apply(this,arguments)}return Object(Qe.a)(a,[{key:"render",value:function(){var e,t,a,n,i=this.props.decharge;return Object(c.jsxs)("div",{style:ct.page,children:[Object(c.jsxs)("div",{style:ct.pageHeader,children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"50mm"},children:Object(c.jsx)("img",{style:{width:"45mm"},src:"/logo.png"})}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(c.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(c.jsx)("div",{children:"RESTITITION DECHARGE"}),Object(c.jsx)("div",{children:"N\xb0".concat(i.id," DL/").concat(Re()().year())})]})]}),Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"50mm"},children:Object(c.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(c.jsxs)("div",{style:ct.pageBody,children:[Object(c.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(c.jsx)("b",{children:"Client: "})," ",(null===i||void 0===i||null===(e=i.car)||void 0===e?void 0:e.latestClient)?null===i||void 0===i||null===(t=i.car)||void 0===t||null===(a=t.latestClient)||void 0===a?void 0:a.designation:"/","."]}),Object(c.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(c.jsx)("u",{children:Object(c.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Marque:"})," ",i.car.marque]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Matricule:"})," ",i.car.matricule]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Code GPS:"})," ",i.car.code_gps]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Odometre:"})," ",i.km]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",i.cle_vehicule]})]})]}),Object(c.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(c.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(c.jsxs)("b",{children:[" ",i.driver.firstname.toUpperCase()+" "+i.driver.lastname.toUpperCase()]}),", ",Object(c.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(c.jsx)("b",{children:i.driver.tel}),Object(c.jsx)("br",{}),"Reconnais avoir restituer ce jour"," ",Object(c.jsx)("b",{children:Re()(i.date_affectation_driver).format("D-M-yy")}),":",Object(c.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(c.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(c.jsxs)("ol",{style:{marginLeft:"5mm"},children:[" ",Object(c.jsx)(it,{decharge:i,name:"carte_grise_restitition",title:"Carte grise"}),Object(c.jsx)(it,{decharge:i,name:"assurance_restitition",title:"Assurance"}),Object(c.jsx)(it,{decharge:i,name:"vignette_restitition",title:"Vignette"}),Object(c.jsx)(it,{decharge:i,name:"carte_gpl_restitition",title:"carte GPL"}),Object(c.jsx)(it,{decharge:i,name:"permis_circuler_restitition",title:"Permis circuler"}),Object(c.jsx)(it,{decharge:i,name:"scanner_restitition",title:"Scanner"})]}),Object(c.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(c.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(c.jsxs)("ol",{style:{marginLeft:"5mm"},children:[Object(c.jsx)(it,{decharge:i,name:"roue_secour_restitition",title:"Roue de secours"}),Object(c.jsx)(it,{decharge:i,name:"cric_restitition",title:"Cric"}),Object(c.jsx)(it,{decharge:i,name:"cle_roue_restitition",title:"Cle de roue"}),Object(c.jsx)(it,{decharge:i,name:"poste_radio_restitition",title:"Poste radio"})]})]}),Object(c.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(c.jsx)("u",{children:Object(c.jsx)("b",{children:"Observations: "})})," ",Object(c.jsxs)("p",{children:[" ",Object(c.jsx)("b",{children:"Les Documents non restituer: "}),1===i.carte_grise&&0===i.carte_grise_restitition&&"Carte grise, ",1===i.assurance&&0===i.assurance_restitition&&"Assurance, ",1===i.vignette&&0===i.vignette_restitition&&"Vignette, ",1===i.carte_gpl&&0===i.carte_gpl_restitition&&"Carte GPL, ",1===i.permis_circuler&&0===i.permis_circuler_restitition&&"Permis Circuler, ",1===i.scanner&&0===i.scanner_restitition&&"Scanner "," ","/"]}),Object(c.jsxs)("p",{children:[" ",Object(c.jsx)("b",{children:"Les Equipments non restituer: "}),1===i.roue_secour&&0===i.roue_secour_restitition&&"Roue Secure, ",1===i.cric&&0===i.cric_restitition&&"Cric, ",1===i.cle_roue&&0===i.cle_roue_restitition&&"Cl\xe9 Roue, ",1===i.poste_radio&&0===i.poste_radio_restitition&&"Poste Radio, ","/"]}),i.restitition_comment]})]}),Object(c.jsxs)("div",{style:ct.pageFooter,children:[Object(c.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(c.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(c.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(c.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(c.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(c.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(c.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+(null===i||void 0===i||null===(n=i.createdby)||void 0===n?void 0:n.username)," |"," ","Imprimer Le: ".concat(Re()().format("D-M-yy"))," |"," ",document.location.toString()]})]})]})}}]),a}(i.a.Component),it=function(e){var t=e.decharge,a=e.name,n=e.title;return t[a]?Object(c.jsxs)("li",{style:{margin:"2mm"},children:[Object(c.jsx)("input",{style:{marginRight:"2mm"},checked:t[a],type:"checkbox"}),Object(c.jsx)("b",{children:n})]}):Object(c.jsx)(c.Fragment,{})};function rt(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/decharges",exact:!0,children:Object(c.jsx)(st,{})}),Object(c.jsx)(x.a,{path:"/decharges/add",children:Object(c.jsx)(ot,{})}),Object(c.jsx)(x.a,{path:"/decharges/edit/:id",children:Object(c.jsx)(ut,{})}),Object(c.jsx)(x.a,{path:"/decharges/show/:id",children:Object(c.jsx)(jt,{})}),Object(c.jsx)(x.a,{path:"/decharges/restitition/:id",children:Object(c.jsx)(dt,{})})]})}var lt=[Object(X.a)({title:"V\xe9hicule",mapDataToValue:function(e){return e.car.matricule}}),Object(X.a)({title:"Conducteur",mapDataToValue:function(e){return e.driver.firstname.toUpperCase()+" "+e.driver.lastname.toUpperCase()}}),Object(X.a)({title:"Date D\xe9charge",mapDataToValue:function(e){return e.date_affectation_driver}}),Object(X.a)({title:"Date Restitition D\xe9charge",mapDataToValue:function(e){return e.date_restitition_driver?e.date_restitition_driver:""}})];function st(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/decharges").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Restitition",onClick:function(e){var t=e.row;j.push("/decharges/restitition/"+t.data.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.d,{size:t})}},{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/decharges/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Modifier",onClick:function(e){var t=e.row;return j.push("/decharges/show/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.c,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/decharges/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},title:"D\xe9charges",children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/decharges/add")},size:z.c.compact,shape:z.b.pill,children:"Nouveau D\xe9charge"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:lt,rows:a})]})}function ot(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(x.f)()),r=i.a.useState([]),l=Object(d.a)(r,2),s=(l[0],l[1],Object(n.useState)(!1)),o=Object(d.a)(s,2),u=o[0],j=(o[1],Object($.b)()),b=(j.control,j.handleSubmit),O=(j.errors,C().api),h=Object(J.a)().enqueue,m=i.a.useState(""),f=Object(d.a)(m,2),p=f[0],v=f[1],g=i.a.useState([]),S=Object(d.a)(g,2),y=S[0],k=S[1],_=i.a.useState(null),D=Object(d.a)(_,2),T=D[0],V=D[1],E=i.a.useState(""),A=Object(d.a)(E,2),I=(A[0],A[1],i.a.useState([])),P=Object(d.a)(I,2),M=(P[0],P[1],i.a.useState(null)),L=Object(d.a)(M,2),N=(L[0],L[1],i.a.useState("")),B=Object(d.a)(N,2),W=B[0],K=B[1],X=i.a.useState([]),Z=Object(d.a)(X,2),ee=Z[0],te=Z[1],ce=i.a.useState(null),ne=Object(d.a)(ce,2),ie=ne[0],re=ne[1],le=Object(n.useState)(new Date),se=Object(d.a)(le,2),oe=se[0],ue=se[1],je=Object(n.useState)(null),de=Object(d.a)(je,2),be=(de[0],de[1],Object(n.useState)(!1)),Oe=Object(d.a)(be,2),he=(Oe[0],Oe[1],Object(n.useState)(!1)),me=Object(d.a)(he,2),fe=me[0],pe=me[1],xe=Object(n.useState)(!1),ve=Object(d.a)(xe,2),ge=ve[0],Se=ve[1],ye=Object(n.useState)(!1),Ce=Object(d.a)(ye,2),ke=Ce[0],_e=Ce[1],De=Object(n.useState)(!1),ze=Object(d.a)(De,2),Te=ze[0],Ve=ze[1],Ee=Object(n.useState)(!1),Ae=Object(d.a)(Ee,2),qe=Ae[0],Re=Ae[1],Me=Object(n.useState)(!1),Le=Object(d.a)(Me,2),Ne=Le[0],Be=Le[1],Fe=Object(n.useState)(!1),He=Object(d.a)(Fe,2),Ue=He[0],We=He[1],Je=Object(n.useState)(!1),Ke=Object(d.a)(Je,2),Ye=Ke[0],Qe=Ke[1],Xe=Object(n.useState)(!1),Ze=Object(d.a)(Xe,2),$e=Ze[0],et=Ze[1],tt=Object(n.useState)(!1),at=Object(d.a)(tt,2),ct=at[0],nt=at[1],it=Object(n.useState)(1),rt=Object(d.a)(it,2),lt=rt[0],st=rt[1],ot=Object(n.useState)(0),ut=Object(d.a)(ot,2),jt=ut[0],dt=ut[1],bt=Object(n.useState)(""),Ot=Object(d.a)(bt,2),ht=Ot[0],mt=Ot[1],ft=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&W){e.next=3;break}return alert("Il ya des champs vides"),e.abrupt("return");case 3:t.date_affectation_driver=oe,t.car_id=null===T||void 0===T?void 0:T.id,t.driver_id=ie.id,t.carte_grise=fe,t.assurance=ge,t.vignette=ke,t.carte_gpl=Te,t.permis_circuler=qe,t.scanner=Ne,t.cle_vehicule=lt,t.km=jt,t.roue_secour=Ue,t.cric=$e,t.cle_roue=ct,t.poste_radio=Ye,t.affectation_comment=ht||"/",O.post("/decharges",t).then((function(e){h({message:"Success"}),a.push("/decharges")})).catch((function(e){var t,a;alert("Error ! "+(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message))}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{title:"D\xe9charges",children:[Object(c.jsx)(ae,{title:"D\xe9charge pour la v\xe9hicule"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:b(ft),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:p,onChange:function(e,t){var a,c;v(e),V(t),a=e,c=k,O.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.matricule},options:y,name:"car_id",size:"compact",required:!0})}),Object(c.jsx)(H.a,{label:"Conducteur",children:Object(c.jsx)(we.a,{required:!0,value:W,onChange:function(e,t){var a,c;K(e),re(t),a=e,c=te,O.get("/drivers/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.firstname+" "+e.lastname},options:ee,name:"driver_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Decharge",children:Object(c.jsx)(Ie.a,{value:oe,onChange:function(e){var t=e.date;ue(t),console.log(t)},formatString:"dd/MM/yyyy",name:"date_affectation_driver",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:fe,onChange:function(e){pe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte grise"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ge,onChange:function(e){Se(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Assurance"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ke,onChange:function(e){_e(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Vignette"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Te,onChange:function(e){Ve(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte GPL"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:qe,onChange:function(e){Re(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Permis Circuler"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ne,onChange:function(e){Be(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Scanner"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{label:"Odometer V\xe9hicule",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:jt,type:"number",onChange:function(e){e.target.value>1&&dt(e.target.value)}})}),Object(c.jsx)(H.a,{label:"Nb Cl\xe9s V\xe9hicule",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:lt,type:"number",onChange:function(e){st(e.target.value)}})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ue,onChange:function(e){We(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Roue de secure"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:$e,onChange:function(e){et(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cric"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ct,onChange:function(e){nt(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cl\xe9 Roue"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ye,onChange:function(e){Qe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Poste Radio"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:ht,onChange:function(e){return mt(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function ut(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=(t[0],t[1],Object(n.useState)(!0)),r=Object(d.a)(a,2),l=r[0],s=r[1],o=Object(x.f)(),u=Object(x.h)().params,j=i.a.useState([]),b=Object(d.a)(j,2),O=(b[0],b[1],Object($.b)()),h=(O.control,O.handleSubmit),m=(O.errors,C().api),f=(Object(J.a)().enqueue,i.a.useState("")),p=Object(d.a)(f,2),v=p[0],g=p[1],S=i.a.useState([]),y=Object(d.a)(S,2),k=y[0],_=y[1],D=i.a.useState(null),T=Object(d.a)(D,2),V=T[0],E=T[1],A=i.a.useState(""),I=Object(d.a)(A,2),P=(I[0],I[1],i.a.useState([])),M=Object(d.a)(P,2),L=(M[0],M[1],i.a.useState(null)),N=Object(d.a)(L,2),B=(N[0],N[1],i.a.useState("")),W=Object(d.a)(B,2),K=W[0],X=W[1],Z=i.a.useState([]),ee=Object(d.a)(Z,2),te=ee[0],ce=ee[1],ne=i.a.useState(null),ie=Object(d.a)(ne,2),re=ie[0],le=ie[1],se=Object(n.useState)(new Date),oe=Object(d.a)(se,2),ue=oe[0],je=oe[1],de=Object(n.useState)(null),be=Object(d.a)(de,2),Oe=(be[0],be[1],Object(n.useState)(!1)),he=Object(d.a)(Oe,2),me=(he[0],he[1],Object(n.useState)(!1)),fe=Object(d.a)(me,2),pe=fe[0],xe=fe[1],ve=Object(n.useState)(!1),ge=Object(d.a)(ve,2),Se=ge[0],ye=ge[1],Ce=Object(n.useState)(!1),ke=Object(d.a)(Ce,2),_e=ke[0],De=ke[1],ze=Object(n.useState)(!1),Te=Object(d.a)(ze,2),Ve=Te[0],Ee=Te[1],Ae=Object(n.useState)(!1),Re=Object(d.a)(Ae,2),Me=Re[0],Le=Re[1],Ne=Object(n.useState)(!1),Be=Object(d.a)(Ne,2),Fe=Be[0],He=Be[1],Ue=Object(n.useState)(!1),We=Object(d.a)(Ue,2),Je=We[0],Ke=We[1],Ye=Object(n.useState)(!1),Qe=Object(d.a)(Ye,2),Xe=Qe[0],Ze=Qe[1],$e=Object(n.useState)(!1),et=Object(d.a)($e,2),tt=et[0],at=et[1],ct=Object(n.useState)(!1),nt=Object(d.a)(ct,2),it=nt[0],rt=nt[1],lt=Object(n.useState)(1),st=Object(d.a)(lt,2),ot=st[0],ut=st[1],jt=Object(n.useState)(0),dt=Object(d.a)(jt,2),bt=dt[0],Ot=dt[1],ht=Object(n.useState)(""),mt=Object(d.a)(ht,2),ft=mt[0],pt=mt[1],xt=function(){var e=Object(F.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&K){e.next=3;break}return alert("Il ya des champs vides"),e.abrupt("return");case 3:t.date_affectation_driver=qe(ue).format("yy-M-D"),t.car_id=null===V||void 0===V?void 0:V.id,t.driver_id=re.id,t.carte_grise=pe,t.assurance=Se,t.vignette=_e,t.carte_gpl=Ve,t.permis_circuler=Me,t.scanner=Fe,t.cle_vehicule=ot,t.km=bt,t.roue_secour=Je,t.cric=tt,t.cle_roue=it,t.poste_radio=Xe,t.affectation_comment=ft||"/",m.put("/decharges/"+u.id,t).then((function(e){alert("Success"),o.push("/decharges/show/"+u.id)})).catch((function(e){var t,a,c,n;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message),alert("Error ! "+(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message))}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m.get("decharges/"+u.id).then((function(e){var t=e.data.data;g(t.car.matricule),E(t.car),je(qe(t.date_affectation_driver).toDate()),X(t.driver.firstname+" "+t.driver.lastname),le(t.driver),xe(t.carte_grise),ye(t.assurance),De(t.vignette),Ee(t.carte_gpl),Le(t.permis_circuler),He(t.scanner),ut(null===t||void 0===t?void 0:t.cle_vehicule),Ot(null===t||void 0===t?void 0:t.km),Ke(t.roue_secour),at(null===t||void 0===t?void 0:t.cric),rt(t.cle_roue),Ze(t.poste_radio),pt(t.comment),s(!1),console.log(ue)})).catch((function(e){console.log("-----------------"),console.log(e),s(!1)}))}),[]),l?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{title:"D\xe9charges",children:[Object(c.jsx)(ae,{title:"Modifier D\xe9charge v\xe9hicule: "+v}),Object(c.jsxs)("form",{style:{width:500},onSubmit:h(xt),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:v,onChange:function(e,t){var a,c;g(e),E(t),a=e,c=_,m.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.matricule},options:k,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Conducteur",children:Object(c.jsx)(we.a,{value:K,onChange:function(e,t){var a,c;X(e),le(t),a=e,c=ce,m.get("/drivers/search?data=".concat(a)).then((function(e){c(e.data.data)}))},mapOptionToString:function(e){return e.firstname+" "+e.lastname},options:te,name:"driver_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date D\xe9charge",children:Object(c.jsx)(Ie.a,{value:ue,onChange:function(e){var t=e.date;je(t)},formatString:"dd/MM/yyyy",name:"date_affectation",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:pe,onChange:function(e){xe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte grise"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Se,onChange:function(e){ye(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Assurance"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:_e,onChange:function(e){De(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Vignette"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ve,onChange:function(e){Ee(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte GPL"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Me,onChange:function(e){Le(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Permis Circuler"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Fe,onChange:function(e){He(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Scanner"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{label:"Odometre",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:bt,type:"number",onChange:function(e){e.target.value>1&&Ot(e.target.value)}})}),Object(c.jsx)(H.a,{label:"Nb Cl\xe9s V\xe9hicule",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:ot,type:"number",onChange:function(e){ut(e.target.value)}})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Je,onChange:function(e){Ke(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Roue de secure"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:tt,onChange:function(e){at(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cric"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:it,onChange:function(e){rt(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cl\xe9 Roue"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Xe,onChange:function(e){Ze(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Poste Radio"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:ft,onChange:function(e){return pt(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function jt(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(x.h)().params,l=C(),s=l.api,o=l.user,u=Object(n.useState)(null),j=Object(d.a)(u,2),b=j[0],O=j[1],h=Object(n.useState)(!1),m=Object(d.a)(h,2),f=(m[0],m[1],Object(n.useRef)(null)),p=Object(n.useRef)(null),v=Object($e.useReactToPrint)({content:function(){return f.current},onBeforeGetContent:function(){var e=Object(F.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),g=Object($e.useReactToPrint)({content:function(){return p.current},onBeforeGetContent:function(){var e=Object(F.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(n.useEffect)((function(){s.get("decharges/"+r.id).then((function(e){var t=e.data.data;O(t),i(!1)})).catch((function(){alert("error")}))}),[]),a?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{title:"D\xe9charges",children:[Object(c.jsx)(ae,{title:"D\xe9charge (N\xb0"+r.id+") de v\xe9hicule: "+b.car.matricule}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:v,children:"Imprimer D\xe9charge"}),b.date_restitition_driver&&Object(c.jsx)("button",{onClick:g,children:"imprimer Restitition"}),Object(c.jsx)("hr",{}),b.date_restitition_driver?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(nt,{user:o,decharge:b,ref:p}),Object(c.jsx)("hr",{}),Object(c.jsx)(tt,{user:o,decharge:b,ref:f})]}):Object(c.jsx)(tt,{user:o,decharge:b,ref:f})]})]})}function dt(){var e=Object(x.h)().params,t=Object(x.f)(),a=C().api,i=Object(n.useState)(!0),r=Object(d.a)(i,2),l=r[0],s=r[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(n.useState)(new Date),h=Object(d.a)(O,2),m=h[0],f=h[1],p=Object(n.useState)(""),v=Object(d.a)(p,2),g=v[0],S=v[1],y=Object(n.useState)(0),k=Object(d.a)(y,2),_=k[0],D=k[1],T=Object(n.useState)(""),V=Object(d.a)(T,2),E=V[0],A=V[1],I=Object(n.useState)([]),P=Object(d.a)(I,2),M=(P[0],P[1],Object(n.useState)(!1)),L=Object(d.a)(M,2),N=L[0],G=L[1],B=Object(n.useState)(!1),F=Object(d.a)(B,2),W=F[0],J=F[1],K=Object(n.useState)(!1),X=Object(d.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)(!1),te=Object(d.a)(ee,2),ce=te[0],ne=te[1],ie=Object(n.useState)(!1),re=Object(d.a)(ie,2),le=re[0],oe=re[1],ue=Object(n.useState)(!1),je=Object(d.a)(ue,2),de=je[0],be=je[1],Oe=Object(n.useState)(!1),he=Object(d.a)(Oe,2),me=he[0],fe=he[1],pe=Object(n.useState)(!1),xe=Object(d.a)(pe,2),ve=xe[0],ge=xe[1],Se=Object(n.useState)(!1),ye=Object(d.a)(Se,2),Ce=ye[0],ke=ye[1],_e=Object(n.useState)(!1),De=Object(d.a)(_e,2),we=De[0],ze=De[1],Te=Object(n.useState)(1),Ve=Object(d.a)(Te,2),Ee=Ve[0],Ae=Ve[1];Object(n.useEffect)((function(){a.get("decharges/"+e.id).then((function(e){var t,a;b(e.data.data),e.data.data.date_restitition_driver?f(new Date(e.data.data.date_restitition_driver)):f(new Date),S([{id:e.data.data.motif_restitition_driver}]),D(e.data.data.km_restitition),A(e.data.data.restitition_comment),G(e.data.data.carte_grise_restitition),J(e.data.data.assurance_restitition),$(e.data.data.vignette_restitition),ne(e.data.data.carte_gpl_restitition),oe(e.data.data.permis_circuler_restitition),be(e.data.data.scanner_restitition),Ae(null===(t=e.data.data)||void 0===t?void 0:t.cle_vehicule_restitition),fe(e.data.data.roue_secour_restitition),ke(null===(a=e.data.data)||void 0===a?void 0:a.cric_restitition),ze(e.data.data.cle_roue_restitition),ge(e.data.data.poste_radio_restitition),s(!1)})).catch((function(e){console.log(e),s(!1)}))}),[]);var qe=function(c){c.preventDefault();var n={};n.date_restitition_driver=m,n.motif_restitition_driver=g[0].id,n.carte_grise_restitition=!!N,n.assurance_restitition=!!W,n.vignette_restitition=!!Z,n.carte_gpl_restitition=!!ce,n.permis_circuler_restitition=!!le,n.scanner_restitition=!!de,n.cle_vehicule_restitition=!!Ee,n.roue_secour_restitition=!!me,n.cric_restitition=!!Ce,n.cle_roue_restitition=!!we,n.poste_radio_restitition=!!ve,n.restitition_comment=E||"/",n.km_restitition=_,a.post("decharges/restitition/"+e.id,n).then((function(a){alert("Success"),t.push("/decharges/show/"+e.id)})).catch((function(e){alert(e)}))};return l?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):(null===j||void 0===j?void 0:j.date_restitition_driver)?Object(c.jsxs)(R,{title:"D\xe9charges",children:[Object(c.jsx)(ae,{title:"Modifier La Restitition de decharge: "+j.car.matricule+" | "+j.driver.firstname.toUpperCase()+" "+j.driver.lastname.toUpperCase()}),Object(c.jsxs)("form",{style:{width:500},onSubmit:qe,children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(U.a,{value:j.car.matricule,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date D\xe9charge",children:Object(c.jsx)(U.a,{value:j.date_affectation_driver,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Restitition D\xe9charge",children:Object(c.jsx)(Ie.a,{value:m,onChange:function(e){var t=e.date;f(t)},formatString:"dd/MM/yyyy",name:"date_restitition",mask:null,locale:Pe.a,required:!0,size:"compact"})}),Object(c.jsx)(H.a,{label:"Motif De Restitition",children:Object(c.jsx)(se.a,{value:g,options:Le,onChange:function(e){return S(e.value)},size:"compact",placeholder:"",required:!0})}),Object(c.jsx)(H.a,{label:"Odometer V\xe9hicule > ("+j.km+" KM)",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:_,type:"number",onChange:function(e){e.target.value>1&&D(e.target.value)}})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:N,onChange:function(e){G(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte grise"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:W,onChange:function(e){J(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Assurance"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Z,onChange:function(e){$(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Vignette"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ce,onChange:function(e){ne(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte GPL"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:le,onChange:function(e){oe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Permis Circuler"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:de,onChange:function(e){be(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Scanner"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{label:"Nb Cl\xe9s V\xe9hicule",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:Ee,type:"number",onChange:function(e){Ae(e.target.value)}})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:me,onChange:function(e){fe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Roue de secure"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ce,onChange:function(e){ke(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cric"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:we,onChange:function(e){ze(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cl\xe9 Roue"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ve,onChange:function(e){ge(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Poste Radio"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:E,onChange:function(e){return A(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[Object(c.jsx)(w.a,{style:{width:"47%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"}),Object(c.jsx)(w.a,{style:{width:"47%",backgroundColor:"#f44336"},onClick:function(c){c.preventDefault();var n={date_restitition_driver:null,motif_restitition_driver:null,km_restitition:null,restitition_comment:null};a.post("decharges/restitition/"+e.id,n).then((function(e){alert("Success"),t.goBack()})).catch((function(e){alert(e)}))},size:z.c.compact,shape:z.b.pill,children:"Supprimer la restitition"})]})]})]}):Object(c.jsxs)(R,{title:"D\xe9charges",children:[Object(c.jsx)(ae,{title:"Restitition de decharge: "+j.car.matricule+" | "+j.driver.firstname.toUpperCase()+" "+j.driver.lastname.toUpperCase()}),Object(c.jsxs)("form",{style:{width:500},onSubmit:qe,children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(U.a,{value:j.car.matricule,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Date D\xe9charge",children:Object(c.jsx)(U.a,{value:j.date_affectation_driver,size:"compact"})}),Object(c.jsx)(H.a,{label:"Date Restitition D\xe9charge",children:Object(c.jsx)(Ie.a,{value:m,onChange:function(e){var t=e.date;f(t)},formatString:"dd/MM/yyyy",name:"date_restitition",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Motif De Restitition",children:Object(c.jsx)(se.a,{value:g,options:Le,onChange:function(e){return S(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Odometer V\xe9hicule > ("+j.km+" KM)",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:_,type:"number",onChange:function(e){e.target.value>0&&D(e.target.value)}})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:N,onChange:function(e){G(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte grise"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:W,onChange:function(e){J(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Assurance"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Z,onChange:function(e){$(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Vignette"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ce,onChange:function(e){ne(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte GPL"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:le,onChange:function(e){oe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Permis Circuler"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:de,onChange:function(e){be(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Scanner"})}),Object(c.jsx)("hr",{}),Object(c.jsx)(H.a,{label:"Nb Cl\xe9s V\xe9hicule",children:Object(c.jsx)(U.a,{required:!0,size:"compact",placeholder:"",value:Ee,type:"number",onChange:function(e){Ae(e.target.value)}})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:me,onChange:function(e){fe(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Roue de secure"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:Ce,onChange:function(e){ke(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cric"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:we,onChange:function(e){ze(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Cl\xe9 Roue"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:ve,onChange:function(e){ge(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Poste Radio"})}),Object(c.jsx)(H.a,{label:"Observation",children:Object(c.jsx)(Ge.a,{value:E,onChange:function(e){return A(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)("hr",{}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}var bt=function(){var e,t=Object(x.h)().params,a=C().api,r=Object(n.useState)(),l=Object(d.a)(r,2),s=l[0],o=l[1],u=Object(n.useState)(!0),j=Object(d.a)(u,2),b=j[0],O=j[1],h=Object($.b)(),m=(h.control,h.handleSubmit),f=(h.errors,Object(n.useState)(!1)),p=Object(d.a)(f,2),v=p[0],g=p[1],S=Object(n.useState)(!1),y=Object(d.a)(S,2),k=y[0],_=y[1],D=Object(n.useState)(!1),T=Object(d.a)(D,2),V=T[0],E=T[1],A=Object(n.useState)(!1),I=Object(d.a)(A,2),P=I[0],M=I[1],L=Object(n.useState)(!1),N=Object(d.a)(L,2),G=N[0],B=N[1],F=Object(n.useState)(!1),U=Object(d.a)(F,2),W=U[0],J=U[1],K=Object(n.useState)(""),X=Object(d.a)(K,2),Z=X[0],ee=X[1],te=i.a.useState(""),ce=Object(d.a)(te,2),ne=ce[0],ie=ce[1],re=i.a.useState([]),le=Object(d.a)(re,2),se=le[0],oe=le[1],ue=i.a.useState(null),je=Object(d.a)(ue,2),de=je[0],be=je[1];return Object(n.useEffect)((function(){a.get("/affectations/".concat(t.id)).then((function(e){o(e.data.data),O(!1)})).catch((function(e){alert("error"),O(!1)}))}),[]),b?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:" Check List Administratif v\xe9hicule: ".concat(null===s||void 0===s||null===(e=s.car)||void 0===e?void 0:e.matricule)}),Object(c.jsxs)("form",{style:{width:500},onSubmit:m((function(){if(de){var e={};e.driver_id=de.id,e.carte_grise=v,e.assurance=k,e.vignette=V,e.carte_gpl=P,e.permis_circuler=G,e.scanner=W,e.ga_comment=Z,a.post("/ga_checklist/"+t.id,e).then((function(){console.log("success")})).catch((function(){console.log("error")}))}else alert("Veullez selectione conducteur!")})),children:[Object(c.jsx)(H.a,{label:"Conducteur",children:Object(c.jsx)(we.a,{value:ne,onChange:function(e,t){var c,n;ie(e),be(t),c=e,n=oe,a.get("/drivers/search?data=".concat(c)).then((function(e){n(e.data.data)}))},mapOptionToString:function(e){return e.firstname+" "+e.lastname},options:se,name:"driver_id",size:"compact"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:v,onChange:function(e){g(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte grise"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:k,onChange:function(e){_(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Assurance"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:V,onChange:function(e){E(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Vignette"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:P,onChange:function(e){M(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Carte GPL"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:G,onChange:function(e){B(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Permis Circuler"})}),Object(c.jsx)(H.a,{children:Object(c.jsx)(Q.a,{checked:W,onChange:function(e){J(e.target.checked)},checkmarkType:Y.c.toggle,labelPlacement:Y.a.left,children:"Scanner"})}),Object(c.jsx)(H.a,{label:"Commentaire",children:Object(c.jsx)(Ge.a,{value:Z,onChange:function(e){return ee(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},size:z.c.compact,shape:z.b.pill,type:"submit",children:"Enregistrer"})]})]})},Ot=a(99),ht=a.n(Ot),mt=a(239);function ft(){var e=Object(x.f)(),t=C().api,a=Object(n.useState)([]),i=Object(d.a)(a,2),r=i[0],l=i[1],s=Object(n.useState)(!0),o=Object(d.a)(s,2),u=o[0],j=o[1],b=function(){t.get("/notifications").then((function(e){l(e.data.data),j(!1)})).catch((function(){alert("error"),j(!1)}))};return Object(n.useEffect)((function(){b();var e=setInterval(b,1e4);return function(){return clearInterval(e)}}),[]),u?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsx)(R,{children:r.map((function(a){var n,i,r;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(mt.a,{overrides:{Body:{style:{width:"auto",backgroundColor:a.is_read?"#ffffff":"#ebebeb",color:a.is_read?"black":"#1e54b7"}}},children:[Object(c.jsx)("h2",{children:a.title}),Object(c.jsx)("h3",{children:a.sub_title}),Object(c.jsxs)("h4",{children:["Par: ",(null===a||void 0===a||null===(n=a.from)||void 0===n?void 0:n.firstname)+" "+(null===a||void 0===a||null===(i=a.from)||void 0===i||null===(r=i.lastname)||void 0===r?void 0:r.toUpperCase())," ","| ",a.from.mail]}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(c.jsx)(w.a,{size:z.c.compact,shape:z.b.pill,endEnhancer:function(){return Object(c.jsx)(ht.a,{size:16})},onClick:function(){e.push(a.url);t.put("notifications/"+a.id,{is_read:!0})},children:"Plus de detaile"}),Object(c.jsxs)("div",{children:["Le: ",a.created_at]})]})]},a.id),Object(c.jsx)("hr",{})]})}))})}function pt(){return Object(c.jsx)(x.c,{children:Object(c.jsx)(x.a,{path:"/etat_affectations",exact:!0,children:Object(c.jsx)(xt,{})})})}function xt(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),s=Object(d.a)(l,2),o=s[0],u=s[1],j=(Object(x.f)(),C()),b=j.api,O=(j.user,Object(J.a)().enqueue,Object(n.useState)([qe().startOf("month").toDate(),qe().endOf("month").toDate()])),h=Object(d.a)(O,2),m=h[0],f=h[1];Object(n.useEffect)((function(){return v()}),[]);var p=[Object(X.a)({title:"V\xe9hicule",mapDataToValue:function(e){return e.car.matricule}}),Object(xe.a)({title:"Client",mapDataToValue:function(e){return e.client.designation}}),Object(X.a)({title:"Date Affectation",mapDataToValue:function(e){return e.date_affectation}}),Object(X.a)({title:"Date Fin Pr\xe9station",mapDataToValue:function(e){return e.date_end_prestation?e.date_end_prestation:"-"}}),Object(X.a)({title:"Date Restitition",mapDataToValue:function(e){return e.date_restitition?e.date_restitition:"-"}}),Object(X.a)({title:"Nbs Jour(s)",mapDataToValue:function(e){var t=qe(e.date_affectation).isBefore(qe(m[0]))?qe(m[0]):qe(e.date_affectation),a=qe(m[1]);return e.date_restitition&&(a=qe(e.date_restitition).isAfter(a)?a:qe(e.date_restitition)),(a.diff(t,"days")+1).toString()}})],v=function(){if(m.length<2)alert("selection une intervale de deux dates");else{u(!0);var e=qe(m[0]).format("yy-M-D"),t=qe(m[1]).format("yy-M-D");b.get("/affectations?date1=".concat(e,"&date2=").concat(t)).then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}};return Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginLeft:"auto"},children:[Object(c.jsx)("div",{style:{flex:1,marginBottom:0,marginTop:0},children:Object(c.jsx)("h2",{children:"Etat Des Affectations"})}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(Ie.a,{value:m,onChange:function(e){var t=e.date;f(Array.isArray(t)?t:[t]),console.log(t)},formatString:"dd/MM/yyyy",name:"dateRange",mask:null,locale:Pe.a,size:"compact",range:!0}),Object(c.jsx)(w.a,{onClick:v,size:z.c.compact,shape:z.b.pill,style:{marginLeft:10},children:"Rechercher"})]})]}),Object(c.jsx)("hr",{}),o?Object(c.jsx)(q,{}):Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:[],columns:p,rows:a})]})}function vt(){return Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/cars_state",exact:!0,children:Object(c.jsx)(St,{})}),Object(c.jsx)(x.a,{path:"/cars_state/add",children:Object(c.jsx)(yt,{})}),Object(c.jsx)(x.a,{path:"/cars_state/edit/:id",children:Object(c.jsx)(Ct,{})})]})}window.moment=qe;var gt=[Object(X.a)({title:"Matricule",mapDataToValue:function(e){return e.car.matricule}}),Object(X.a)({title:"Code GPS",mapDataToValue:function(e){return e.car.code_gps}}),Object(X.a)({title:"Genre",mapDataToValue:function(e){return e.car.genre}}),Object(X.a)({title:"Status",mapDataToValue:function(e){var t=e.name?e.name:"En marche";return"marche"===t&&(t="En marche"),"entre_atelie"===t&&(t="Entr\xe9e d'atelie"),"sortie_atelie"===t&&(t="Sortie d'atelie"),"accedente"===t&&(t="V\xe9hicule Accedent\xe9"),t}}),Object(X.a)({title:"Date",mapDataToValue:function(e){return qe(e.updated_at).format("DD-MM-yyyy HH:mm")}}),Object(X.a)({title:"Cre\xe9 par",mapDataToValue:function(e){return e.createdby.username}})];function St(){var e=i.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),s=Object(d.a)(l,2),o=s[0],u=s[1],j=Object(x.f)(),b=C().api,O=Object(J.a)().enqueue;function h(e){!function(e){var t=a.filter((function(t){return!e.includes(t.id)}));r(t)}([e])}Object(n.useEffect)((function(){b.get("/cars_state").then((function(e){var t,a;r(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.map((function(e){return{id:e.id,data:e}}))),u(!1)})).catch((function(){u(!1)}))}),[]);var m=[{label:"Affiche",onClick:function(e){var t=e.row;return j.push("/cars_state/edit/"+t.id)},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.b,{size:t})}},{label:"Supprimer",onClick:function(e){var t=e.row;window.confirm("Supprimer ?")&&b.delete("/cars_state/"+t.id).then((function(e){h(t.id),O({message:"Success"})})).catch((function(){O({message:"Error"})}))},renderIcon:function(e){var t=e.size;return Object(c.jsx)(W.f,{size:t})}}];return o?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{style:{height:"80vh"},children:[Object(c.jsx)(w.a,{onClick:function(){return j.push("/cars_state/add")},size:z.c.compact,shape:z.b.pill,children:"Changer Status D'une V\xe9hicule"}),Object(c.jsx)("hr",{}),Object(c.jsx)(Z.a,{batchActions:[{label:"Exporter",onClick:function(e){return(0,e.clearSelection)()}}],rowActions:m,columns:gt,rows:a})]})}function yt(){var e=Object(x.f)(),t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],l=(a[1],Object($.b)()),s=(l.control,l.handleSubmit),o=(l.errors,C().api),u=(Object(J.a)().enqueue,Object(n.useState)("")),j=Object(d.a)(u,2),b=j[0],O=j[1],m=Object(n.useState)(new Date),f=Object(d.a)(m,2),p=f[0],v=f[1],g=Object(n.useState)(""),S=Object(d.a)(g,2),y=S[0],k=S[1],_=i.a.useState(""),D=Object(d.a)(_,2),T=D[0],V=D[1],E=i.a.useState([]),A=Object(d.a)(E,2),I=A[0],P=A[1],M=i.a.useState(null),L=Object(d.a)(M,2),N=L[0],B=L[1],U=function(){var t=Object(F.a)(G.a.mark((function t(a){var c,n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.car_id=null===N||void 0===N?void 0:N.id,a.name=b[0].id,a.state_date=qe(p).format("yyyy-M-D HH:mm"),a.comment=""!==y?y:"/",t.prev=4,t.next=7,o.post("/cars_state",a);case 7:t.sent,h.b.dark("Status Chang\xe9"),e.goBack(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.dir(t.t0),h.b.error("Error : "+(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message));case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return r?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Chang\xe9e Status"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:s(U),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:T,onChange:function(e,t){var a,c;V(e),B(t),a=e,c=P,o.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)})),console.log(N)},mapOptionToString:function(e){return e.matricule},options:I,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Status Du V\xe9hicule",children:Object(c.jsx)(se.a,{value:b,options:Me,onChange:function(e){return O(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Date Du Status",children:Object(c.jsx)(Ie.a,{value:p,onChange:function(e){var t=e.date;v(t),console.log(t)},formatString:"dd/MM/yyyy",name:"state_date",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Observation",children:Object(c.jsx)(Ge.a,{value:y,onChange:function(e){return k(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}function Ct(){var e=Object(x.f)(),t=Object(x.h)().params,a=Object(n.useState)(!0),r=Object(d.a)(a,2),l=r[0],s=r[1],o=Object($.b)(),u=(o.control,o.handleSubmit),j=(o.errors,C().api),b=(Object(J.a)().enqueue,Object(n.useState)("")),O=Object(d.a)(b,2),m=O[0],f=O[1],p=Object(n.useState)(new Date),v=Object(d.a)(p,2),g=v[0],S=v[1],y=Object(n.useState)(""),k=Object(d.a)(y,2),_=k[0],D=k[1],T=i.a.useState(""),V=Object(d.a)(T,2),E=V[0],A=V[1],I=i.a.useState([]),P=Object(d.a)(I,2),M=P[0],L=P[1],N=i.a.useState(null),B=Object(d.a)(N,2),U=B[0],W=B[1];Object(n.useEffect)(Object(F.a)(G.a.mark((function e(){var a,c,n,i,r,l,o,u;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/cars_state/"+t.id);case 2:(a=e.sent)?(W(null===(c=a.data.data)||void 0===c?void 0:c.car),A(null===(n=a.data.data)||void 0===n||null===(i=n.car)||void 0===i?void 0:i.matricule),S(qe(a.data.data.state_date).toDate()),f({id:null===a||void 0===a||null===(r=a.data)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.name}),D(null===a||void 0===a||null===(o=a.data)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.comment)):h.b.error("error"),s(!1);case 5:case"end":return e.stop()}}),e)}))),[]);var K=function(){var t=Object(F.a)(G.a.mark((function t(a){var c,n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.car_id=null===U||void 0===U?void 0:U.id,a.name=m[0].id,a.state_date=qe(g).format("yyyy-M-D HH:mm"),a.comment=""!==_?_:"/",t.prev=4,t.next=7,j.post("/cars_state",a);case 7:t.sent,h.b.dark("Status Chang\xe9"),e.goBack(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.dir(t.t0),h.b.error("Error : "+(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.message));case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return l?Object(c.jsx)(R,{children:Object(c.jsx)(q,{})}):Object(c.jsxs)(R,{children:[Object(c.jsx)(ae,{title:"Chang\xe9e Status"}),Object(c.jsxs)("form",{style:{width:500},onSubmit:u(K),children:[Object(c.jsx)(H.a,{label:"V\xe9hicule",children:Object(c.jsx)(we.a,{value:E,onChange:function(e,t){var a,c;A(e),W(t),a=e,c=L,j.get("/cars/search?data=".concat(a)).then((function(e){c(e.data.data)})),console.log(U)},mapOptionToString:function(e){return e.matricule},options:M,name:"car_id",size:"compact"})}),Object(c.jsx)(H.a,{label:"Status Du V\xe9hicule",children:Object(c.jsx)(se.a,{value:m,options:Me,onChange:function(e){return f(e.value)},required:!0,size:"compact",placeholder:""})}),Object(c.jsx)(H.a,{label:"Date Du Status",children:Object(c.jsx)(Ie.a,{value:g,onChange:function(e){var t=e.date;S(t),console.log(t)},formatString:"dd/MM/yyyy",name:"state_date",mask:null,locale:Pe.a,size:"compact"})}),Object(c.jsx)(H.a,{label:"Observation",children:Object(c.jsx)(Ge.a,{value:_,onChange:function(e){return D(e.target.value)},placeholder:"",clearOnEscape:!0})}),Object(c.jsx)(w.a,{style:{width:"100%"},type:"submit",size:z.c.compact,shape:z.b.pill,children:"Enregistrer"})]})]})}var kt=a(101),_t=a.n(kt);function Dt(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],i=t[1],r=C().api;window.api=r;return Object(c.jsxs)(R,{title:"Parametres",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Cars"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return i(e.target.files[0])}}),Object(c.jsx)("button",{onClick:function(){var e=new FormData;e.append("cars",a,a.name),console.log(a),r.post("/cars/import",e)},children:"import file"}),Object(c.jsx)("button",{onClick:function(){r.get("/cars/export",{responseType:"blob"}).then((function(e){_t()(e.data,"cars-"+qe(new Date).format("D-M-yy")+".xlsx")}))},children:"export file"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Drivers"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return i(e.target.files[0])}}),Object(c.jsx)("button",{onClick:function(){var e=new FormData;e.append("drivers",a,a.name),console.log(a),r.post("/drivers/import",e)},children:"import file"}),Object(c.jsx)("button",{onClick:function(){r.get("/drivers/export",{responseType:"blob"}).then((function(e){_t()(e.data,"drivers-"+qe(new Date).format("D-M-yy")+".xlsx")}))},children:"export file"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Clients"}),Object(c.jsx)("input",{type:"file",onChange:function(e){return i(e.target.files[0])}}),Object(c.jsx)("button",{onClick:function(){var e=new FormData;e.append("clients",a,a.name),console.log(a),r.post("/clients/import",e)},children:"import file"}),Object(c.jsx)("button",{onClick:function(){r.get("/drivers/export",{responseType:"blob"}).then((function(e){_t()(e.data,"clients-"+qe(new Date).format("D-M-yy")+".xlsx")}))},children:"export file"})]})]})}var wt=Object(p.a)("div",{display:"flex",flex:1}),zt=Object(p.a)("div",{display:"flex",flex:1});function Tt(){return Object(c.jsxs)(wt,{children:[Object(c.jsx)(I,{}),Object(c.jsxs)(zt,{children:[Object(c.jsx)(_,{}),Object(c.jsxs)(x.c,{children:[Object(c.jsx)(x.a,{path:"/users",children:Object(c.jsx)(ce,{})}),Object(c.jsx)(x.a,{path:"/settings",children:Object(c.jsx)(Dt,{})}),Object(c.jsx)(x.a,{exact:!0,path:"/",children:Object(c.jsx)(M,{})}),Object(c.jsx)(x.a,{path:"/notifications",children:Object(c.jsx)(ft,{})}),Object(c.jsx)(x.a,{path:"/carclients/:id/ga_checklist",children:Object(c.jsx)(bt,{})}),Object(c.jsx)(x.a,{path:"/cars",children:Object(c.jsx)(oe,{})}),Object(c.jsx)(x.a,{path:"/cars_state",children:Object(c.jsx)(vt,{})}),Object(c.jsx)(x.a,{path:"/drivers",children:Object(c.jsx)(ye,{})}),Object(c.jsx)(x.a,{path:"/clients",children:Object(c.jsx)(ze,{})}),Object(c.jsx)(x.a,{path:"/affectations",children:Object(c.jsx)(Be,{})}),Object(c.jsx)(x.a,{path:"/decharges",children:Object(c.jsx)(rt,{})}),Object(c.jsx)(x.a,{path:"/etat_affectations",children:Object(c.jsx)(pt,{})}),Object(c.jsx)(x.a,{path:"/emr",children:Object(c.jsx)(ve,{})})]})]})]})}var Vt=a(6);function Et(){var e=Object(p.b)(),t=Object(d.a)(e,2),a=t[0],n=(t[1],Object(J.a)().enqueue,C()),r=n.api,l=n.setToken,s=i.a.useState(""),o=Object(d.a)(s,2),u=o[0],j=o[1],b=i.a.useState(""),O=Object(d.a)(b,2),m=O[0],f=O[1];return Object(c.jsx)("div",{className:a({display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"90vh",overflowY:"none"}),children:Object(c.jsxs)("div",{style:{border:"1px dashed lightgray",padding:20},children:[Object(c.jsxs)("form",{style:{display:"flex",flexDirection:"column",minWidth:350,padding:20,margin:10},onSubmit:function(e){e.preventDefault();var t={username:u,password:m};r.post("auth/login",t).then((function(e){var t=e.data;l(t.data.token),document.location.reload(),Object(h.b)("Bonjour")})).catch((function(e){var t,a,c=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||""+e;h.b.dark(c)}))},children:[Object(c.jsxs)("div",{style:{fontSize:20,fontWeight:"bold",textDecoration:"underline",marginBottom:20},children:["Authentification:"," "]}),Object(c.jsx)(H.a,{label:"Nom d'utilisateur",children:Object(c.jsx)(U.a,{value:u,onChange:function(e){return j(e.target.value)},size:Vt.d.compact,placeholder:"Nom d'utilisateur",type:"text",clearable:!0,clearOnEscape:!0})}),Object(c.jsx)(H.a,{label:"Mot de pass",children:Object(c.jsx)(U.a,{value:m,onChange:function(e){return f(e.target.value)},size:Vt.d.compact,placeholder:"Mot de pass",type:"password",clearable:!0,clearOnEscape:!0})}),Object(c.jsx)(w.a,{startEnhancer:function(){return Object(c.jsx)(ht.a,{size:24})},size:z.c.compact,type:"submit",children:"Connect\xe9"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{style:{fontSize:12,fontWeight:"bold",textAlign:"right"},children:"iFlotte V1.0.0"})]})})}var At=function(e){Object(Xe.a)(a,e);var t=Object(Ze.a)(a);function a(){return Object(Ye.a)(this,a),t.apply(this,arguments)}return Object(Qe.a)(a,[{key:"componentDidUpdate",value:function(e){var t;this.props.location!==e.location&&(window.scrollTo(0,0),null===(t=document.getElementById("root"))||void 0===t||t.scrollTo(0,0))}},{key:"render",value:function(){return this.props.children}}]),a}(i.a.Component),It=Object(x.i)(At),Pt=function(e){var t=e.children;return Object(c.jsxs)(b.a,{children:[Object(c.jsx)(It,{children:t}),Object(c.jsx)(h.a,{position:"top-center",autoClose:3e3,newestOnTop:!1,hideProgressBar:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})};function qt(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)(null),l=Object(d.a)(r,2),s=l[0],o=l[1],u=function(){var e=Object(n.useState)(localStorage.getItem("token")),t=Object(d.a)(e,2),a=t[0],c=t[1],i=function(e){localStorage.setItem("token",e),c(e)};return Object(n.useMemo)((function(){return{api:f.a.create({baseURL:"/api",headers:{"x-access-token":a,Authorization:"Bearer ".concat(a),"Content-Type":"application/json",accept:"application/json"}}),token:a,setToken:i}}),[a])}(),j=u.api,b=u.setToken;return Object(n.useEffect)((function(){var e=!0;return i(!0),j.get("/auth/me").then((function(t){var a=t.data;e&&(o(a.data),i(!1))})).catch((function(){e&&(o(null),i(!1))})),function(){return e=!1}}),[]),a?Object(c.jsx)("div",{style:{flex:1,height:"80vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(c.jsx)(O.a,{})}):Object(c.jsx)(Pt,{children:Object(c.jsx)(y,{value:{user:s,setUser:o,api:j,setToken:b},children:s?Object(c.jsx)(Tt,{}):Object(c.jsx)(Et,{})})})}var Rt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,249)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),i(e),r(e)}))},Mt=new j.a;l.a.render(Object(c.jsx)(u.Provider,{value:Mt,children:Object(c.jsx)(s.a,{theme:o.a,children:Object(c.jsx)(qt,{})})}),document.getElementById("root")),Rt()}},[[212,1,2]]]);
//# sourceMappingURL=main.b273880d.chunk.js.map