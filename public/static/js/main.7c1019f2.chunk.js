(this["webpackJsonpgest-park"]=this["webpackJsonpgest-park"]||[]).push([[0],{1102:function(e,t,a){"use strict";a.r(t);var i=a(3),n=a(1),r=a.n(n),c=a(80),l=a.n(c),s=a(24),o=a(669),d=a.n(o),u=(a(719),a(720),a(721),a(19)),b=a(186),j=a(23),m=Object(n.createContext)(null);function h(e){var t=e.children,a=e.value;return Object(i.jsx)(m.Provider,{value:Object(j.a)({},a),children:t})}var p=function(){return Object(n.useContext)(m)},O=a(106),f=a(56),x=a(1113),v=a(1126),g=a(634),y=a(675),_=a(264),I=a(105),S=a(169),E=a(163),C=a(98),T=a(1127),R=a(1128),A=a(1129),D=a(277),k=a(630),N=a.n(k),M=function(){var e=Object(n.useState)(localStorage.getItem("token")),t=Object(u.a)(e,2),a=t[0],i=t[1],r=function(e){localStorage.setItem("token",e),i(e)};return Object(n.useMemo)((function(){var e=N.a.create({baseURL:"/api",headers:{"x-access-token":a,Authorization:"Bearer ".concat(a),"Content-Type":"application/json",accept:"application/json"}});return e.interceptors.response.use((function(e){return e}),(function(e){var t,a,i,n,r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?null===e||void 0===e||null===(i=e.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message:e.message;return D.b.error(r),setTimeout((function(){401===e.response.status&&e.response.data.message,401===e.response.status&&e.response.data.message,401===e.response.status&&"Provided token is expired."===e.response.data.message&&function(){var e=localStorage.getItem("token");localStorage.setItem("token",""),""!==e&&window.location.reload()}()}),3e3),Promise.reject(e)})),{api:e,token:a,setToken:r}}),[a])},L=a(1112),U=function(){var e=p(),t=e.user,a=e.setToken,r=e.setUser,c=M().api,l=Object(n.useState)([]),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(O.useHistory)(),j=Object(L.a)(),m=function(){c.get("/notifications?pageSize=5").then((function(e){d(e.data.data)}))};Object(n.useEffect)((function(){m();var e=setInterval(m,6e4);return function(){return clearInterval(e)}}),[]);function h(e){"1"===e.key&&(a(null),r(null))}for(var D=0,k=0;k<o.length;k++)0==o[k].is_read&&D++;return Object(i.jsxs)(x.a.Header,{style:{height:32,backgroundColor:"white",position:"fixed",zIndex:10,width:"calc(100% - 200px)",boxShadow:"0 1px 4px rgba(0,21,41,.08)",display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:0},children:[Object(i.jsx)("div",{children:!j.online&&Object(i.jsx)(y.a,{style:{height:28},message:"Pas de connexion Internet",type:"warning",showIcon:!0})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(_.a,{trigger:"click",title:"Notifications",content:function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(v.b,{style:{width:300},itemLayout:"horizontal",dataSource:o,renderItem:function(e){return Object(i.jsx)(v.b.Item,{children:Object(i.jsx)(v.b.Item.Meta,{title:Object(i.jsx)("a",{onClick:function(){c.post("/notifications/"+e.id).then((function(){b.push(e.url)}))},children:e.title}),description:"".concat(e.sub_title," | ").concat(e.is_read?"DEJA VU":"Non vu")})})}}),Object(i.jsx)(g.a,{}),Object(i.jsx)(f.b,{to:"/notifications",children:"Plus des notifications"})]})},children:Object(i.jsx)(I.a,{icon:Object(i.jsx)(T.a,{}),style:{marginRight:10},children:Object(i.jsx)(S.a,{count:D})})}),Object(i.jsx)(E.a,{trigger:"click",placement:"bottomRight",overlay:function(){return Object(i.jsx)(C.a,{children:Object(i.jsx)(C.a.Item,{onClick:h,icon:Object(i.jsx)(R.a,{style:{color:"red"}}),children:"Se d\xe9connecter"},"1")})},children:Object(i.jsxs)(I.a,{children:[t.username," ",Object(i.jsx)(A.a,{})]})})]})]})},w=a(1146),P=a(1147),V=a(1148),B=a(85),q=a(152),H=a(1120),F=a(673),G=a(1130),Y=[{label:"RENAULT CLIO",value:"RENAULT CLIO"},{label:"DACIA SENDERO",value:"DACIA SENDERO"},{label:"CHEVROLET AVIO",value:"CHEVROLET AVIO"},{label:"CHEVROLET BREAK",value:"CHEVROLET BREAK"},{label:"OPEL",value:"OPEL"},{label:"CHEVROLET SAIL",value:"CHEVROLET SAIL"},{label:"RENAULT SYMBOL",value:"RENAULT SYMBOL"},{label:"FOTON",value:"FOTON"},{label:"DACIA LOGAN",value:"DACIA LOGAN"},{label:"DFSK",value:"DFSK"},{label:"CHEVROLET CRUZE",value:"CHEVROLET CRUZE"},{label:"PEUGEOT PARTNER",value:"PEUGEOT PARTNER"},{label:"SUSUKI SWIFT",value:"SUSUKI SWIFT"},{label:"CHEVROLET TRAX",value:"CHEVROLET TRAX"},{label:"CHEVROLET AVIO ",value:"CHEVROLET AVIO "},{label:"PEUGEOT 207",value:"PEUGEOT 207"},{label:"CHANGHE",value:"CHANGHE"},{label:"NISSAN SUNNY",value:"NISSAN SUNNY"},{label:"HONDA ODYSSEY",value:"HONDA ODYSSEY"},{label:"MITSUBISHI MIRAGE STAR",value:"MITSUBISHI MIRAGE STAR"},{label:"NISSAN NEW SUNNY ",value:"NISSAN NEW SUNNY "},{label:"HYUNDAI VERNA",value:"HYUNDAI VERNA"},{label:"MERCEDES-Benz",value:"MERCEDES-Benz"},{label:"CHEVROLET SPARK",value:"CHEVROLET SPARK"},{label:"KIA PICANTO",value:"KIA PICANTO"},{label:"TOYOTA COROLLA",value:"TOYOTA COROLLA"},{label:"BENTLIY",value:"BENTLIY"},{label:"PAOLETTI RACING",value:"PAOLETTI RACING"},{label:"CHEVROLET SONIC",value:"CHEVROLET SONIC"},{label:"TOYOTA YARIS",value:"TOYOTA YARIS"},{label:"AUDI",value:"AUDI"},{label:"HYUNDAI GENESIS",value:"HYUNDAI GENESIS"},{label:"KIA SPORTAGE",value:"KIA SPORTAGE"},{label:"PEUGEOT 301",value:"PEUGEOT 301"},{label:"SEAT / IBIZA",value:"SEAT / IBIZA"},{label:"VOLKSWAGEN POLO",value:"VOLKSWAGEN POLO"},{label:"CITROEN CI-ELYSSE",value:"CITROEN CI-ELYSSE"},{label:"VMS",value:"VMS"},{label:"SKODA RAPIDE",value:"SKODA RAPIDE"},{label:"RENAULT FLUENCE",value:"RENAULT FLUENCE"},{label:"RENAULT GLR",value:"RENAULT GLR"},{label:"RENAULT",value:"RENAULT"},{label:"VOLKWAGEN",value:"VOLKWAGEN"},{label:"IVECO",value:"IVECO"},{label:"MERCEDES ACTROS",value:"MERCEDES ACTROS"},{label:"DAIHATSU",value:"DAIHATSU"},{label:"NISSAN PIK-UP",value:"NISSAN PIK-UP"},{label:"DAIMER,BENZ",value:"DAIMER,BENZ"},{label:"ISUZU",value:"ISUZU"},{label:"RENAULT KANGO",value:"RENAULT KANGO"},{label:"FAW",value:"FAW"},{label:"CHENG LONG",value:"CHENG LONG"},{label:"DONGFENG",value:"DONGFENG"},{label:"HYUNDAI HD17",value:"HYUNDAI HD17"},{label:"HENG TONG",value:"HENG TONG"},{label:"KIA",value:"KIA"},{label:"KIA 2700",value:"KIA 2700"},{label:"PEUGEOT EXPERT",value:"PEUGEOT EXPERT"},{label:"MERCEDES AXOR",value:"MERCEDES AXOR"},{label:"MITSUBISHI",value:"MITSUBISHI"},{label:"NISSAN",value:"NISSAN"},{label:"NISSAN TIDA",value:"NISSAN TIDA"},{label:"RENAULT MEGANE",value:"RENAULT MEGANE"},{label:"JAC",value:"JAC"},{label:"HYUNDAI HD 65",value:"HYUNDAI HD 65"},{label:"TOYOTA HIACE",value:"TOYOTA HIACE"},{label:"YOUNGMAN",value:"YOUNGMAN"},{label:"TOYOTA HILUX",value:"TOYOTA HILUX"},{label:"TOYOTA",value:"TOYOTA"},{label:"SSANG YONG",value:"SSANG YONG"},{label:"CITROEN BERLINGO",value:"CITROEN BERLINGO"},{label:"CHEVROLET COLORADO",value:"CHEVROLET COLORADO"},{label:"PEUGEOT BOXER",value:"PEUGEOT BOXER"},{label:"SKODA OCTAVIA",value:"SKODA OCTAVIA"},{label:"YUEJIN",value:"YUEJIN"},{label:"DFAC",value:"DFAC"},{label:"SHAANQI",value:"SHAANQI"},{label:"RENAULT MASTER",value:"RENAULT MASTER"},{label:"HYUNDAI H 100",value:"HYUNDAI H 100"},{label:"JINBEI",value:"JINBEI"},{label:"TATA",value:"TATA"},{label:"KIA ",value:"KIA "},{label:"HIGER",value:"HIGER"},{label:"MITSUBISHI FUSO",value:"MITSUBISHI FUSO"},{label:"CITROEN CI-ELYSEE",value:"CITROEN CI-ELYSEE"},{label:"HYUNDAI HD 160",value:"HYUNDAI HD 160"},{label:"HINO",value:"HINO"},{label:"TOYOTA COASTER ",value:"TOYOTA COASTER "},{label:"TOYOTA RAV4",value:"TOYOTA RAV4"},{label:"MERCEDES-BENZ GLC 250",value:"MERCEDES-BENZ GLC 250"},{label:"TOYOTA HILUX REVO",value:"TOYOTA HILUX REVO"},{label:"NEW INTERNATIONAL PAYSTAR",value:"NEW INTERNATIONAL PAYSTAR"},{label:"SCANIA",value:"SCANIA"},{label:"NISSAN NAVARA",value:"NISSAN NAVARA"},{label:"MERCEDES",value:"MERCEDES"},{label:"RANGE ROVER",value:"RANGE ROVER"},{label:"HYUNDAI HD 35",value:"HYUNDAI HD 35"},{label:"PEUGEOT 2008",value:"PEUGEOT 2008"},{label:"SKODA YETI",value:"SKODA YETI"},{label:"KIA RIO",value:"KIA RIO"},{label:"VANHOOL",value:"VANHOOL"},{label:"FRUEHAUF",value:"FRUEHAUF"},{label:"TRAILOR",value:"TRAILOR"},{label:"TROULLIET",value:"TROULLIET"},{label:"SNVI",value:"SNVI"},{label:"KRONE",value:"KRONE"},{label:"DPR TRAILER",value:"DPR TRAILER"},{label:"SCHMITZ",value:"SCHMITZ"},{label:"ACI",value:"ACI"},{label:"MAF-TRAILLER",value:"MAF-TRAILLER"}],z="Champ obligatoire",K=[{value:"EN PANNE PARC",label:"EN PANNE (PARC)"},{value:"EN PANNE ATELIER",label:"EN PANNE (ATELIER)"},{value:"OPERATIONNEL",label:"OPERATIONNEL"},{value:"ACCIDENTE",label:"ACCIDENTE"},{value:"VENDU",label:"VENDU"},{value:"VOLEE",label:"VOLEE"}],J=function(e){var t=e.title,a=e.subTitle,r=e.withBack,c=e.loading,l=e.selectedSiderKey,s=e.children,o=Object(O.useHistory)(),d=p().setSelectedSiderKey;return Object(n.useEffect)((function(){d(l||"")}),[]),Object(n.useEffect)((function(){document.title=t?t+" - "+pa.appName:pa.appName}),[t]),c?Object(i.jsxs)("div",{children:[Object(i.jsx)(H.a,{onBack:function(){return o.goBack()},backIcon:r?Object(i.jsx)(G.a,{}):null,title:t,subTitle:a}),",",Object(i.jsx)("div",{style:{padding:15},children:Object(i.jsx)(F.a,{})})]}):Object(i.jsxs)("div",{children:[Object(i.jsx)(H.a,{onBack:function(){return o.goBack()},backIcon:r?Object(i.jsx)(G.a,{}):null,title:t,subTitle:a}),Object(i.jsx)("div",{style:{padding:15},children:s})]})},W=a(220),X=a(219),Q=a(147),Z=a(443),$=a(1121),ee=function(e){var t=e.value,a=e.title,n=e.icon,r=(e.suffix,e.color),c=void 0===r?"#000":r;e.onClick;return Object(i.jsx)(Q.a,{span:8,children:Object(i.jsx)(Z.a,{children:Object(i.jsx)($.a,{value:t,precision:0,valueStyle:{color:c},prefix:n,suffix:" | "+a})})})};function te(){var e=p().api,t=Object(n.useState)({capacity_logistics_vl:1,operationel_vl:0,non_exploite_vl:0,affecte_vl:0,en_panne_vl:0,accedente_vl:0}),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!0),s=Object(u.a)(l,2),o=s[0],d=s[1],m=function(){e.get("/dashboard_vl").then((function(e){c(e.data.data),d(!1)}))};if(Object(n.useEffect)((function(){m();var e=setInterval(m,6e4);return function(){return clearInterval(e)}}),[]),o||!r)return Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})});var h=r.non_exploite_vl,O=r.affecte_vl,f=r.en_panne_vl,x=r.accedente_v,v=r.capacity_logistics_vl,g=r.operationel_vl,y=[{item:"NON EXPLOITE",count:r.non_exploite_vl/r.capacity_logistics_vl,percent:h,color:"#000"},{item:"AFFECTE",count:r.affecte_vl/r.capacity_logistics_vl,percent:O},{item:"EN PANNE",count:r.en_panne_vl/r.capacity_logistics_vl,percent:f},{item:"ACCEDENTE",count:r.accedente_v/r.capacity_logistics_vl,percent:x,color:"red"}];return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(X.a,{children:[Object(i.jsxs)(W.Chart,{height:350,data:y,autoFit:!0,children:[Object(i.jsx)(W.Coordinate,{type:"theta",radius:.75}),Object(i.jsx)(W.Tooltip,{showTitle:!0}),Object(i.jsx)(W.Axis,{visible:!1}),Object(i.jsx)(W.Interval,{position:"percent",adjust:"stack",color:"item",style:{lineWidth:1,stroke:"#fff"},state:{selected:{style:function(e){var t=Object(W.getTheme)().geometries.interval.rect.selected.style(e);return Object(j.a)(Object(j.a)({},t),{},{fill:"red"})}}}}),Object(i.jsx)(W.Interaction,{type:"element-single-selected"})]}),Object(i.jsx)(ee,{value:v,icon:Object(i.jsx)(B.b,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Capacit\xe9",color:"#000"}),Object(i.jsx)(ee,{value:g,icon:Object(i.jsx)(B.b,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Op\xe9rationel",color:"green"}),Object(i.jsx)(ee,{value:O,icon:Object(i.jsx)(B.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Affect\xe9",color:"blue"}),Object(i.jsx)(ee,{value:h,icon:Object(i.jsx)(B.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Non exploit\xe9",color:"#9c27b0"}),Object(i.jsx)(ee,{value:f,icon:Object(i.jsx)(B.d,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"En panne",color:"#faad14"}),Object(i.jsx)(ee,{value:x,icon:Object(i.jsx)(B.c,{style:{marginRight:10}}),suffix:"V\xe9hicules",title:"Accedent\xe9",color:"red"})]})})}for(var ae=function(){var e=p().api,t=(Object(n.useRef)(null),Object(n.useState)({capacity_logistics_vl:0,operationel_vl:0,non_exploite_vl:0,affecte_vl:0,en_panne_vl:0,accedente_vl:0})),a=Object(u.a)(t,2),r=(a[0],a[1]);return Object(n.useEffect)((function(){e.get("/dashboard_vl").then((function(e){r(e.data.data)}))}),[]),Object(i.jsxs)(J,{title:"Dashboard",children:[Object(i.jsx)(g.a,{orientation:"left",children:Object(i.jsx)("h1",{children:"VL"})}),Object(i.jsx)(te,{})]})},ie=a(20),ne=a.n(ie),re=a(73),ce=a(154),le=a(130),se=a(116),oe=a(142),de=a(678),ue=a(178),be=a(442),je=(a(320),a(1116)),me=function(e){var t=e.url,a=e.query_string,r=e.mapOptionToString,c=e.placeholder,l=e.onSelect,s=e.onChange,o=e.style,d=e.defaultOption,b=e.disabled,m=p().api,h=Object(n.useState)(""),O=Object(u.a)(h,2),f=(O[0],O[1],Object(n.useState)([])),x=Object(u.a)(f,2),v=x[0],g=x[1];return Object(i.jsx)(je.a,{options:v,defaultValue:function(){if(d)return r(d)},disabled:b,style:o,onSelect:l,onSearch:function(e){m.get("".concat(t,"?data=").concat(e,"&").concat(a)).then((function(e){var t=e.data.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:r(e)})}));g(t)}))},onChange:s,placeholder:c})},he=a(677),pe=function(e){var t=e.url,a=e.query_string,r=e.mapOptionToString,c=e.placeholder,l=(e.onSelect,e.onChange),s=e.style,o=e.defaultOption,d=e.disabled,b=e.optionLabelProp,m=p().api,h=Object(n.useState)([]),O=Object(u.a)(h,2),f=O[0],x=O[1],v=Object(n.useState)([]),g=Object(u.a)(v,2),y=g[0],_=g[1];return Object(i.jsx)(ce.a,{mode:"tags",options:y,optionLabelProp:b,defaultValue:function(){if(o)return o},showSearch:!1,disabled:d,style:s,onSearch:function(e){m.get("".concat(t,"?data=").concat(e,"&").concat(a)).then((function(e){var t=e.data.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:r(e)})}));_(t)}))},onChange:function(e,t){x(t),l(t)},tagRender:function(e){e.label;var t=e.value,a=e.closable,n=e.onClose;return Object(i.jsx)(he.a,{color:"blue",closable:a,onClose:n,style:{marginRight:3},children:t})},placeholder:c,value:f,labelInValue:!0})},Oe=a(680),fe=a(291),xe=a.n(fe),ve=function(e){var t=e.url,a=e.query_string,n=e.mapOptionToString,c=e.debounceTimeout,l=void 0===c?800:c,s=Object(Oe.a)(e,["url","query_string","mapOptionToString","debounceTimeout"]),o=p().api,d=r.a.useState(!1),m=Object(u.a)(d,2),h=m[0],O=m[1],f=r.a.useState([]),x=Object(u.a)(f,2),v=x[0],g=x[1],y=r.a.useRef(0),_=r.a.useMemo((function(){return xe()((function(e){y.current+=1;var i=y.current;g([]),O(!0),o.get("".concat(t,"?data=").concat(e,"&").concat(a)).then((function(e){var t=e.data;if(i===y.current){var a=t.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:n(e)})}));g(a),O(!1)}}))}),l)}),[l]);return Object(i.jsx)(ce.a,Object(j.a)(Object(j.a)({labelInValue:!0,filterOption:!1,onSearch:_,notFoundContent:h?Object(i.jsx)(b.a,{size:"small"}):null},s),{},{options:v}))},ge=a(385),ye=a(1133),_e=a(1134),Ie=function(e){var t=e.defaultValue,a=e.onChange,r=Object(n.useState)(0),c=Object(u.a)(r,2),l=c[0],s=c[1];Object(n.useEffect)((function(){t&&s(t)}),[]),Object(n.useEffect)((function(){a(l)}),[l]);return Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(i.jsx)(ge.a,{type:"circle",percent:l}),Object(i.jsxs)(I.a.Group,{style:{marginTop:5},children:[Object(i.jsx)(I.a,{onClick:function(){var e=l-10;e<0&&(e=0),s(e)},icon:Object(i.jsx)(ye.a,{})}),Object(i.jsx)(I.a,{onClick:function(){var e=l+10;e>100&&(e=100),s(e)},icon:Object(i.jsx)(_e.a,{})})]})]})},Se=ce.a.Option,Ee=le.a.TextArea,Ce=se.a.Item,Te=function(e,t,a){if("divider"===a.type)return Object(i.jsx)(g.a,{plain:!0,children:a.text});if("progress"===a.type)return Object(i.jsx)(Ce,{name:a.name,label:a.label,hasFeedback:!0,rules:a.rules,children:Object(i.jsx)(Ie,{defaultValue:t[a.name],onChange:function(t){e.setFieldsValue(a.name,t)}})});if("search"===a.type){a.renderValue;return Object(i.jsx)(Ce,{name:a.name,label:a.label,hasFeedback:!0,rules:a.rules,children:Object(i.jsx)(me,{url:a.url,query_string:a.query_string,defaultOption:t[a.defaultOptionName],mapOptionToString:a.mapOptionToString,onSelect:function(t,i){var n={};n[a.name]=i.id,e.setFieldsValue(n)},disabled:a.disabled,onChange:function(t,i){if(!i){var n={};n[a.name]=null,e.setFieldsValue(n)}},placeholder:a.label})})}if("search2"===a.type){a.renderValue;return Object(i.jsx)(Ce,{name:a.name,label:a.label,hasFeedback:!0,rules:a.rules,children:Object(i.jsx)(pe,{url:a.url,query_string:a.query_string,defaultOption:t[a.defaultOptionName],optionLabelProp:null===a||void 0===a?void 0:a.optionLabelProp,mapOptionToString:a.mapOptionToString,disabled:a.disabled,onChange:function(t){if(t){var i=[];t.map((function(e){e.id&&i.push(e.id)})),console.log({optionsId:i});var n={};n[a.name]=i,e.setFieldsValue(n)}},placeholder:a.label})})}if("debounceSelect"===a.type){a.renderValue;return Object(i.jsx)(Ce,{name:a.name,label:a.label,hasFeedback:!0,rules:a.rules,style:{flex:1},children:Object(i.jsx)(ve,{mode:"multiple",mapOptionToString:a.mapOptionToString,placeholder:a.label,url:a.url,query_string:a.query_string,onChange:function(t,i){var n={};n[a.name]=i,e.setFieldsValue(n)}})})}return"select"===a.type?Object(i.jsx)(Ce,{name:a.name,label:a.label,hasFeedback:!0,initialValue:a.initialValue,rules:a.rules,children:Object(i.jsx)(ce.a,{placeholder:"Selection\xe9",children:a.selects.map((function(e,t){return Object(i.jsxs)(Se,{value:e.value,children:[" ",e.label," "]},t)}))})}):"selectmultiple"===a.type?Object(i.jsx)(se.a.Item,{style:{flex:1,width:"100%"},label:a.label,name:a.name,rules:a.rules,children:Object(i.jsx)(ce.a,{mode:"tags",onChange:function(t){var i={};i[a.name]=t,e.setFieldsValue(i)},defaultValue:a.initialValue,children:null===a||void 0===a||null===(n=a.selects)||void 0===n?void 0:n.map((function(e,t){return Object(i.jsx)(Se,{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.label},t)}))})}):"text"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,rules:a.rules,children:Object(i.jsx)(le.a,Object(j.a)({},a.inputProp))}):"textarea"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,rules:a.rules,children:Object(i.jsx)(Ee,{})}):"password"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,rules:a.rules,children:Object(i.jsx)(le.a.Password,{})}):"checkbox"===a.type?Object(i.jsx)(Ce,{name:a.name,valuePropName:"checked",children:Object(i.jsxs)(oe.a,{children:[" ",a.label," "]})}):"boolean"===a.type?Object(i.jsx)(Ce,{name:a.name,children:Object(i.jsx)(de.a,{checkedChildren:a.checkedChildren,unCheckedChildren:a.unCheckedChildren,defaultChecked:!0,children:a.label})}):"date"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(ue.a,{format:"DD/MM/YYYY",disabledDate:function(t){if(a.disabledDate)return a.disabledDate(t,e)},onChange:function(t){return e.setFieldsValue(a.name,t)},style:{width:"100%"}})}):"date_picker_year"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(ue.a,{picker:"year",style:{width:"100%"}})}):"date_picker_quarter"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(ue.a,{picker:"quarter",style:{width:"100%"}})}):"date_picker_month"===a.type?(console.log("date_picker_month"),Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(ue.a,{picker:"month",style:{width:"100%"}})})):"date_picker_week"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(ue.a,{picker:"week",style:{width:"100%"}})}):"rate"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(be.a,{style:{backgroundColor:"white"},defaultValue:t[a.name]})}):"integer"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(le.a,Object(j.a)({type:"number",pattern:"[0-9]*",defaultValue:t[a.name],onChange:function(e){return console.log(e.target.value)}},a.inputProp))}):"number"===a.type?Object(i.jsx)(Ce,{label:a.label,name:a.name,children:Object(i.jsx)(le.a,Object(j.a)({type:"number",defaultValue:t[a.name]},a.inputProp))}):"render"===a.type?a.render(e):void 0;var n},Re=function(e){var t=e.formItems,a=e.initialValues,n=void 0===a?[]:a,r=e.onFinish,c=e.onFinishFailed,l=e.extra,s=void 0===l?function(){}:l,o=e.loading,d=e.full,b=void 0!==d&&d,m=se.a.useForm(),h=Object(u.a)(m,1)[0],p={};b||(p={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}});return Object(i.jsxs)(se.a,Object(j.a)(Object(j.a)({},p),{},{name:"basic",form:h,layout:"vertical",initialValues:n,onFinish:r,onFinishFailed:c,children:[t.map((function(e,t){return Te(h,n,e)})),s(h),Object(i.jsx)(Ce,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(I.a,{loading:o,type:"primary",htmlType:"submit",children:"Envoyer"})}))]}))},Ae=[{name:"username",label:"Nom d'utilisateur",rules:[{required:!0,message:z}],type:"text"},{name:"firstname",label:"Nom",rules:[{required:!0,message:z}],type:"text"},{name:"lastname",label:"Prenom",rules:[{required:!0,message:z}],type:"text"},{name:"mail",label:"Email",rules:[{required:!0,message:z}],type:"text"},{name:"password",label:"Mot de pass",rules:[{required:!0,message:z}],type:"password"},{name:"poste",label:"Poste",rules:[{required:!0,message:z}],type:"text",selects:[{value:"admin",label:"Administarateur"},{value:"ga",label:"Gestionnaire administaratif"},{value:"gm",label:"Gestionnaire mat\xe9riel"},{value:"com",label:"Commercial"}]},{name:"tel",label:"TEL",rules:[{required:!0,message:z}],type:"text"}],De=[{name:"name",label:"Designation",rules:[{required:!0,message:z}],type:"text"}],ke=a(672),Ne=a(90),Me=a(1135),Le=a(1136),Ue=a(1137),we=a(197),Pe=function(e,t){if("admin"===e.username)return!0;var a=!1;return e.roles.map((function(e,i){t===e.name&&(a=!0)})),a},Ve=function(e){var t=p().user;if("admin"===t.username)return!0;var a=!1;return t.roles.map((function(t,i){e===t.name&&(a=!0)})),a},Be=["JAN","FEV","MARS","AVRIL","MAI","JUIN","JUILLET","AOUT","SEP","OCT","NOV","DEC"],qe=function(e){var t=JSON.parse(e);return"month"==t.type?t.year+"["+Be[t.value]+"]":"quarter"==t.type?t.year+"[T"+t.value+"]":"day"==t.type?t.value:"week"==t.type?t.year+"[S"+t.value+"]":t.year},He=function(e){return"day"==e?"Journalier":"week"==e?"Hebdomadaire":"month"==e?"Mensuelle":"quarter"==e?"Trimestriel":"year"==e?"Annuel":""},Fe=[{id:1,value:"DIRECTION GENERALE"},{id:2,value:"MQHSE"},{id:3,value:"EXPLOITATION"},{id:4,value:"MAINTENANCE"},{id:5,value:"COMMERCIAL"},{id:6,value:"ACHATS"},{id:7,value:"RH"},{id:8,value:"FINANCES ET COMPTABILITE"},{id:9,value:"SYSTEME D'INFORMATION"}],Ge=function(e){var t=e.row,a=p(),n=a.api,c=(a.user,r.a.useState(!1)),l=Object(u.a)(c,2),s=l[0],o=l[1],d=r.a.useState(null),j=Object(u.a)(d,2),m=j[0],h=j[1];return Object(i.jsx)(_.a,{content:function(){return Object(i.jsxs)(i.Fragment,{children:[m&&Object(i.jsxs)(v.b,{children:[Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[PROPRI\xc9TAIRE]"})," ",m.prop]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[ANCIEN MATRICULE]"})," ",m.old_matricule]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[GENRE]"})," ",m.genre]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[TYPE]"})," ",m.type]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[PUISSANCE]"})," ",m.puissance]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[ENERGIE]"})," ",m.energie]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[CARROSSERIE]"})," ",m.carrosserie]}),Object(i.jsxs)(v.b.Item,{children:[Object(i.jsx)(ke.a.Text,{mark:!0,children:"[COULEUR]"})," ",m.color?m.color:"/"]})]}),!m&&Object(i.jsx)(b.a,{})]})},title:m?m.code_gps+" | "+m.matricule:"",trigger:"click",visible:s,onVisibleChange:function(e){return o(e)},children:Object(i.jsx)(I.a,{onClick:function(){n.get("/cars/"+t.id).then((function(e){h(e.data.data)}))},shape:"circle",icon:Object(i.jsx)(B.g,{})})})},Ye=[{name:"matricule",label:"Matricule",rules:[{required:!0,message:z}],type:"text"},{name:"prop",label:"Propri\xe9taire",rules:[{required:!0,message:z}],type:"text"},{name:"old_matricule",label:"Ancien matricule",rules:[{required:!0,message:z}],type:"text"},{name:"code_gps",label:"code GPS",rules:[{required:!0,message:z}],type:"text"},{name:"genre",label:"Genre",rules:[{required:!0,message:z}],type:"select",selects:[{label:"V P",value:"V P"},{label:"CAMION",value:"CAMION"},{label:"TRACTEUR",value:"TRACTEUR"},{label:"REMORQUE",value:"REMORQUE"},{label:"BUS",value:"BUS"},{label:"UTILITAIRE",value:"UTILITAIRE"},{label:"MICRO BUS",value:"MICRO BUS"},{label:"V H",value:"V H"},{label:"MOTO",value:"MOTO"},{label:"AMBULANCE",value:"AMBULANCE"},{label:"MOTOCYCLE",value:"MOTOCYCLE"},{label:"RETRO CHARGEUR",value:"RETRO CHARGEUR"},{label:"CHARIOT ELEVATEUR",value:"CHARIOT ELEVATEUR"},{label:"CHARIOT ELEVATEUR  1.6T-MAL",value:"CHARIOT ELEVATEUR  1.6T-MAL"},{label:"CHARIOT ELEVATEUR  2.5T",value:"CHARIOT ELEVATEUR  2.5T"},{label:"CHARIOT ELEVATEUR  2T-MAL",value:"CHARIOT ELEVATEUR  2T-MAL"},{label:"CHARIOT ELEVATEUR 03T",value:"CHARIOT ELEVATEUR 03T"},{label:"CHARIOT ELEVATEUR 5T-MAL",value:"CHARIOT ELEVATEUR 5T-MAL"},{label:"CHARIOT ELEVATEUR -MAL",value:"CHARIOT ELEVATEUR -MAL"},{label:"EXCAVATRICE",value:"EXCAVATRICE"},{label:"STAKAR",value:"STAKAR"},{label:"STATION D'EPURATION",value:"STATION D'EPURATION"},{label:"TANDEM VIBRATOIR",value:"TANDEM VIBRATOIR"},{label:"TRANSPALETTE ELECTRIQUE  1.6T ",value:"TRANSPALETTE ELECTRIQUE  1.6T "},{label:"TRANSPALETTE GERBEUR  1.4T-MAL",value:"TRANSPALETTE GERBEUR  1.4T-MAL"}]},{name:"marque",label:"Marque",rules:[{required:!0,message:z}],type:"text"},{name:"type",label:"Type",rules:[{required:!0,message:z}],type:"text"},{name:"puissance",label:"Puissance",rules:[{required:!0,message:z}],type:"text"},{name:"energie",label:"Energie",rules:[{required:!0,message:z}],type:"text"},{name:"carrosserie",label:"Carrosserie",rules:[{required:!0,message:z}],type:"text"},{name:"color",label:"Color",type:"text"},{name:"nb_places",label:"Nombre de places",type:"integer"}],ze=[{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:z}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"name",label:"Designation",type:"select",rules:[{required:!0,message:z}],selects:K},{name:"state_date",label:"Date",type:"date",rules:[{required:!0,message:z}]},{name:"observation",label:"Observation",type:"textarea"}],Ke=a(649),Je=[{name:"firstname",label:"Nom",rules:[{required:!0,message:z}],type:"text"},{name:"lastname",label:"Prenom",rules:[{required:!0,message:z}],type:"text"},{name:"tel",label:"tel",type:"text"},{name:"code_paie",label:"Code paie",type:"integer"},{name:"type",label:"Type",type:"select",selects:[{label:"Chauffeur SR ",value:"Chauffeur SR "},{label:"Chauffeur TC Bus",value:"Chauffeur TC Bus"},{label:"Chauffeur  VL ",value:"Chauffeur  VL "},{label:"Chauffeur  PL",value:"Chauffeur  PL"},{label:"Chauffeur Ambulancier",value:"Chauffeur Ambulancier"},{label:"AUTRE",value:"AUTRE"}]}],We=[{name:"code",label:"Code (SAP)",type:"text"},{name:"designation",label:"Designation",rules:[{required:!0,message:z}],type:"text"},{name:"localite",label:"Localit\xe9",type:"text"},{name:"tel",label:"TEL",type:"text"},{name:"client_id",label:"Client hi\xe9rarchique",type:"search",url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}}],Xe=a(118),Qe=a(34),Ze=a.n(Qe),$e=a(140),et=a(1123),tt=[{name:"client_id",label:"Client",type:"search",rules:[{required:!0,message:z}],url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:z}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"date_decharge",label:"Date d\xe9charge",rules:[{required:!0,message:z}],type:"date"},{name:"date_fin_prestation",label:"Date fin prestation",type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_decharge")}}],at=[{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:z}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"motif_restitition",label:"Motif de restitution",rules:[{required:!0,message:z}],type:"select",selects:[{value:"FIN DE CONTRAT",label:"FIN DE CONTRAT"},{value:"A LA DEMANDE DE CLIENT",label:"\xc0 LA DEMANDE DE CLIENT"},{value:"VEHICULE EN PANNE",label:"VEHICULE EN PANNE"}]},{name:"date_restitition",label:"Date restitution",rules:[{required:!0,message:z}],type:"date"},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:z}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:z}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"assurance_marchandises",label:"Assurance marchandises",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],it=a(59),nt=a(62),rt=a(78),ct=a(79),lt={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},st=function(e){Object(rt.a)(a,e);var t=Object(ct.a)(a);function a(){return Object(it.a)(this,a),t.apply(this,arguments)}return Object(nt.a)(a,[{key:"render",value:function(){var e,t,a,n=this.props.checklist;return Object(i.jsxs)("div",{style:lt.page,children:[Object(i.jsxs)("div",{style:lt.pageHeader,children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("img",{style:{width:"40mm"},src:"/logo.png"})}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(i.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(i.jsx)("div",{children:"DECHARGE"}),Object(i.jsx)("div",{children:"N\xb0".concat(n["decharges.id"]," DL/").concat(ne()(n["decharges.date_decharge"]).year())})]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(i.jsxs)("div",{style:lt.pageBody,children:[Object(i.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(i.jsx)("b",{children:"Client: "})," ",n["clients.designation"]," / ",n.clients_mother_designation]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Marque:"})," ",n["cars.marque"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Matricule:"})," ",n["cars.matricule"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",n["cars.code_gps"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Odometre:"})," ",null===n||void 0===n?void 0:n.odometre]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",n.cle_vehicule]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Niveau carburant:"})," ",n.niveau_carburant,"%"]})]})]}),Object(i.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsxs)("b",{children:["Date d\xe9charge le: ",ne()(n["decharges.date_decharge"]).format("DD-MM-Y")]}),Object(i.jsx)("br",{}),Object(i.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(i.jsxs)("b",{children:[" ",(null===(e=n["drivers.firstname"])||void 0===e?void 0:e.toUpperCase())+" "+(null===(t=n["drivers.lastname"])||void 0===t?void 0:t.toUpperCase())]}),", ",Object(i.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(i.jsx)("b",{children:n["drivers.tel"]}),Object(i.jsx)("br",{}),"Reconnais avoir ",Object(i.jsx)("u",{children:"re\xe7u"})," ce jour"," ",Object(i.jsx)("b",{children:null===(a=ne()(n.date_checklist))||void 0===a?void 0:a.format("DD-MM-Y")}),":",Object(i.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(i.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[" ",Object(i.jsx)(ot,{checklist:n,name:"carte_grise",title:"Carte grise"}),Object(i.jsx)(ot,{checklist:n,name:"assurance",title:"Assurance"}),Object(i.jsx)(ot,{checklist:n,name:"assurance_marchandises",title:"Assurance marchandises"}),Object(i.jsx)(ot,{checklist:n,name:"vignette",title:"Vignette"}),Object(i.jsx)(ot,{checklist:n,name:"scanner",title:"Scanner"}),Object(i.jsx)(ot,{checklist:n,name:"permis_circuler",title:"Permis circuler"}),Object(i.jsx)(ot,{checklist:n,name:"carnet_enter",title:"Carnet d'entretien"}),Object(i.jsx)(ot,{checklist:n,name:"carte_gpl",title:"Carte GPL"})]}),Object(i.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(i.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[Object(i.jsx)(ot,{checklist:n,name:"roue_secour",title:"Roue de secours"}),Object(i.jsx)(ot,{checklist:n,name:"cle_roue",title:"Cl\xe9 Roue"}),Object(i.jsx)(ot,{checklist:n,name:"gillet",title:"Gillet"}),Object(i.jsx)(ot,{checklist:n,name:"cric",title:"Cric"}),Object(i.jsx)(ot,{checklist:n,name:"poste_radio",title:"Poste radio"}),Object(i.jsx)(ot,{checklist:n,name:"extincteur",title:"Extincteur"}),Object(i.jsx)(ot,{checklist:n,name:"boite_pharm",title:"Boite pharmacie"}),Object(i.jsx)(ot,{checklist:n,name:"triangle",title:"Triangle"}),Object(i.jsx)(ot,{checklist:n,name:"pochette_cle",title:"Pochette cl\xe9s"})]})]}),Object(i.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{children:"Observations: "})})," ",n.observation_checklist?n.observation_checklist:"/"]})]}),Object(i.jsxs)("div",{style:lt.pageFooter,children:[Object(i.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(i.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(i.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+n["users.username"]," |"," ","Imprimer Le: ".concat(ne()().format("D-M-yy"))," | "," ",document.location.toString()]})]})]})}}]),a}(r.a.Component),ot=function(e){var t=e.checklist,a=e.name,n=e.title;return Object(i.jsxs)("div",{style:{margin:"2mm"},children:[Object(i.jsx)("input",{style:{marginRight:"2mm"},checked:1==t[a],type:"checkbox"}),Object(i.jsx)("b",{children:n})]})},dt=a(137),ut=et.a.Step,bt=a(1132),jt=a(1138),mt={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},ht=function(e){Object(rt.a)(a,e);var t=Object(ct.a)(a);function a(){return Object(it.a)(this,a),t.apply(this,arguments)}return Object(nt.a)(a,[{key:"render",value:function(){var e,t,a,n,r,c=this.props.decharge,l=null===c||void 0===c||null===(e=c.restitition)||void 0===e?void 0:e.checklist;return Object(i.jsxs)("div",{style:mt.page,children:[Object(i.jsxs)("div",{style:mt.pageHeader,children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("img",{style:{width:"40mm"},src:"/logo.png"})}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(i.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(i.jsx)("div",{children:"RESTITUTION (DECHARGE)"}),Object(i.jsx)("div",{children:"N\xb0".concat(c["decharges.id"]," DL/").concat(ne()(c["decharges.date_decharge"]).year())})]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(i.jsxs)("div",{style:mt.pageBody,children:[Object(i.jsxs)("div",{style:{fontSize:"6mm",marginBottom:"2mm"},children:[Object(i.jsx)("b",{children:"Client: "})," ",c["clients.designation"]," / ",c.clients_mother_designation]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Marque:"})," ",c["cars.marque"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Matricule:"})," ",c["cars.matricule"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",c["cars.code_gps"]]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Odometre:"})," ",null===l||void 0===l?void 0:l.odometre]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Nbs Cl\xe9s de V\xe9hicule:"})," ",l.cle_vehicule]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Niveau carburant:"})," ",l.niveau_carburant,"%"]})]})]}),Object(i.jsxs)("div",{style:{marginTop:"2mm",fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:"Je Soussign\xe9 Monsieur:"})," ",Object(i.jsxs)("b",{children:[" ",(null===(t=c["drivers.firstname"])||void 0===t?void 0:t.toUpperCase())+" "+(null===(a=c["drivers.lastname"])||void 0===a?void 0:a.toUpperCase())]}),", ",Object(i.jsx)("u",{children:"N\xb0 TEL:"})," ",Object(i.jsx)("b",{children:c["drivers.tel"]}),Object(i.jsx)("br",{}),"Reconnais avoir ",Object(i.jsx)("u",{children:"restitu\xe9"})," ce jour"," ",Object(i.jsx)("b",{children:null===(n=ne()(null===c||void 0===c||null===(r=c.restitition)||void 0===r?void 0:r.date_restitition))||void 0===n?void 0:n.format("D-M-yy")}),":",Object(i.jsxs)("div",{style:{marginTop:"4mm",fontSize:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["I - ",Object(i.jsx)("u",{children:"Les documents ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[" ",console.dir(l),Object(i.jsx)(pt,{checklist:l,name:"carte_grise",title:"Carte grise"}),Object(i.jsx)(pt,{checklist:l,name:"assurance",title:"Assurance"}),Object(i.jsx)(pt,{checklist:l,name:"assurance_marchandises",title:"Assurance marchandises"}),Object(i.jsx)(pt,{checklist:l,name:"vignette",title:"Vignette"}),Object(i.jsx)(pt,{checklist:l,name:"scanner",title:"scanner"}),Object(i.jsx)(pt,{checklist:l,name:"permis_circuler",title:"Permis circuler"}),Object(i.jsx)(pt,{checklist:l,name:"carnet_enter",title:"carnet_enter"}),Object(i.jsx)(pt,{checklist:l,name:"carte_gpl",title:"carte_gpl"})]}),Object(i.jsxs)("div",{style:{marginTop:"4.5mm",fontWeight:"bold",marginLeft:"5mm"},children:["II - ",Object(i.jsx)("u",{children:"Les equipments ci-apr\xe9s:"})]}),Object(i.jsxs)("div",{style:{marginLeft:"5mm",display:"flex",flexWrap:"wrap"},children:[Object(i.jsx)(pt,{checklist:l,name:"roue_secour",title:"Roue de secours"}),Object(i.jsx)(pt,{checklist:l,name:"cle_roue",title:"cl\xe9 Roue"}),Object(i.jsx)(pt,{checklist:l,name:"gillet",title:"Gillet"}),Object(i.jsx)(pt,{checklist:l,name:"cric",title:"Cric"}),Object(i.jsx)(pt,{checklist:l,name:"poste_radio",title:"Poste radio"}),Object(i.jsx)(pt,{checklist:l,name:"extincteur",title:"Extincteur"}),Object(i.jsx)(pt,{checklist:l,name:"boite_pharm",title:"Boite pharmacie"}),Object(i.jsx)(pt,{checklist:l,name:"triangle",title:"Triangle"}),Object(i.jsx)(pt,{checklist:l,name:"pochette_cle",title:"Pochette cl\xe9s"})]})]}),Object(i.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{children:"Observations: "})})," ",l.observation?l["checklists.observation"]:"/",Object(i.jsx)("br",{}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Les Documents non restituer"}),":"," ",1===c.carte_grise&&0===l.carte_grise&&"Carte grise, ",1===c.assurance&&0===l.assurance&&"Assurance, ",1===c.assurance_marchandises&&0===l.assurance_marchandises&&"Assurance, ",1===c.vignette&&0===l.vignette&&"Vignatte, ",1===c.scanner&&0===l.scanner&&"Scanner, ",1===c.permis_circuler&&0===l.permis_circuler&&"Permis circuler, ",1===c.carnet_enter&&0===l.carnet_enter&&"Carnet enter, ",1===c.carte_gpl&&0===l.carte_gpl&&"Carte_gpl, "]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Les Equipments non restituer"}),":"," ",1===c.roue_secour&&0===l.roue_secour&&"Roue secour, ",1===c.cle_roue&&0===l.cle_roue&&"Cl\xe9 Roue, ",1===c.gillet&&0===l.gillet&&"Gillet, ",1===c.cric&&0===l.cric&&"Cric, ",1===c.poste_radio&&0===l.poste_radio&&"Poste radio, ",1===c.extincteur&&0===l.extincteur&&"Extincteur, ",1===c.boite_pharm&&0===l.boite_pharm&&"Boite pharmacier, ",1===c.triangle&&0===l.triangle&&"Triangle, ",1===c.pochette_cle&&0===l.pochette_cle&&"Pochette des cl\xe9s, "]})]})]})]}),Object(i.jsxs)("div",{style:mt.pageFooter,children:[Object(i.jsxs)("div",{style:{display:"flex",flex:1,height:"10mm",border:".15mm solid black"},children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Administrative Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le Gestionnaire Mat\xe9riel Roulant"})}),Object(i.jsx)("div",{style:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",border:".15mm solid black"},children:Object(i.jsx)("b",{children:"Le B\xe9n\xe9ficiare"})})]}),Object(i.jsxs)("div",{style:{display:"flex",flex:1,minHeight:"25mm"},children:[Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}}),Object(i.jsx)("div",{style:{display:"flex",flex:1,border:".15mm solid black"}})]}),Object(i.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["username: "+c["users.username"]," |"," ","Imprimer Le: ".concat(ne()().format("D-M-yy"))," | "," ",document.location.toString()]})]})]})}}]),a}(r.a.Component),pt=function(e){var t=e.checklist,a=e.name,n=e.title;return Object(i.jsxs)("div",{style:{margin:"2mm"},children:[Object(i.jsx)("input",{style:{marginRight:"2mm"},checked:1==t[a],type:"checkbox"}),Object(i.jsx)("b",{children:n})]})},Ot=function(e){var t=e.component,a=e.onDelete,c=e.disabledDelete,l=Object(n.useRef)(null),s=Object(dt.useReactToPrint)({content:function(){return l.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(I.a,{icon:Object(i.jsx)(B.i,{}),onClick:s}),Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:a,onCancel:function(){},okText:"Oui",cancelText:"No",disabled:c,children:Object(i.jsx)(I.a,{icon:Object(i.jsx)(B.j,{}),disabled:c})}),r.a.cloneElement(t,{ref:l})]})},ft=(a(877),et.a.Step,a(180)),xt=a(1119),vt=[],gt=0;gt<20;gt++)vt.push({key:gt.toString(),matricule:"content".concat(gt+1),description:"description of content".concat(gt+1)});ce.a.Option;for(var yt=[],_t=0;_t<20;_t++)yt.push({key:_t.toString(),matricule:"content".concat(_t+1),description:"description of content".concat(_t+1)});var It=[{name:"code",label:"Code (SAP)",rules:[{required:!0,message:z}],type:"text"},{name:"designation",label:"Designation",rules:[{required:!0,message:z}],type:"text"},{name:"localite",label:"Localit\xe9",type:"text"},{name:"tel",label:"TEL",type:"text"},{name:"client_id",label:"Client hi\xe9rarchique",type:"search",url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}}],St=a(1139),Et=function(e){var t=e.mission,a=r.a.useState(t.missionvls_state),n=Object(u.a)(a,2),c=n[0],l=n[1],s=r.a.useState(!1),o=Object(u.a)(s,2),d=o[0],j=o[1],m=p(),h=m.api;m.user;return d?Object(i.jsx)(b.a,{}):Object(i.jsxs)(ce.a,{onChange:function(e){j(!0),h.post("/missionvls/change_state/"+t.id,{state:e}).then((function(){l(e),j(!1)})).catch((function(){j(!1)}))},style:{width:120},placeholder:"Selection\xe9",defaultValue:c,children:[Object(i.jsx)(ce.a.Option,{value:"EN ATTENTE",children:"EN ATTENTE"}),Object(i.jsx)(ce.a.Option,{value:"EN COURS",children:"EN COURS"}),Object(i.jsx)(ce.a.Option,{value:"ANNULE",children:"ANNULE"}),Object(i.jsx)(ce.a.Option,{value:"FIN MISSION",children:"FIN MISSION"})]})},Ct=a(1122),Tt=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"Calcule GPS",children:Object(i.jsx)(I.a,{onClick:function(){r(!0)},shape:"circle",icon:Object(i.jsx)(q.a,{})})}),Object(i.jsxs)(Ct.a,{title:"Basic Drawer",placement:"right",closable:!1,onClose:function(){r(!1)},visible:a,children:[Object(i.jsx)("p",{children:"Some contents..."}),Object(i.jsx)("p",{children:"Some contents..."}),Object(i.jsx)("p",{children:"Some contents..."})]})]})},Rt=a.p+"static/media/decompte.9043e45b.png",At={hide:{display:"none"},page:{display:"flex",flexDirection:"column",width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",margin:0,padding:0,border:"none",color:"black"},pageHeader:{display:"flex",justifyContent:"space-between",fontWeight:"bold",backgroundColor:"white",border:".15mm solid black",height:"25mm",margin:"5mm"},pageBody:{display:"flex",flex:1,backgroundColor:"white",padding:"5mm",paddingTop:"1mm",paddingBottom:"1mm",flexDirection:"column"},pageFooter:{display:"flex",flexDirection:"column",margin:"5mm",marginTop:"1mm",fontSize:"3.3mm",textAlign:"center"}},Dt=function(e){Object(rt.a)(a,e);var t=Object(ct.a)(a);function a(){return Object(it.a)(this,a),t.apply(this,arguments)}return Object(nt.a)(a,[{key:"render",value:function(){var e,t=this.props.mission;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{style:At.page,children:[Object(i.jsxs)("div",{style:At.pageHeader,children:[Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("img",{style:{width:"40mm"},src:"/logo.png"})}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,justifyContent:"center"},children:[Object(i.jsx)("div",{style:{fontSize:"5.5mm",textAlign:"center",fontWeight:"bold",border:".15mm solid black"},children:"SPA CONDOR LOGISTICS"}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flex:1,textAlign:"center",border:".15mm solid black",fontSize:"5mm"},children:[Object(i.jsx)("div",{children:"ORDRE DE MISSION"}),Object(i.jsx)("div",{children:"N\xb0".concat(t.id," M/").concat(ne()(t.date_depart_mission).year())})]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center",alignItems:"center",border:".15mm solid black",width:"45mm"},children:Object(i.jsx)("div",{style:{fontSize:"6mm"},children:"Version 01"})})]}),Object(i.jsxs)("div",{style:At.pageBody,children:[Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"Mission: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"N\xb0 Demande(commande):"})," ",t.numero?t.numero:"/"]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Destination:"})," ",Object(i.jsx)("u",{style:{fontSize:"6mm"},children:t.destinations})]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Client:"})," ",Object(i.jsx)("u",{children:t.client.designation})]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Date de D\xe9part:"})," ",ne()(t.date_depart_mission).format("DD-MM-Y")]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Date de Retour:"})," ",t.date_arrivee_mission?ne()(t.date_arrivee_mission).format("DD-MM-Y"):"/"]})]})]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm",marginTop:"1mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"V\xe9hicule: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",t.car.code_gps]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Marque:"})," ",t.car.marque]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Matricule:"})," ",t.car.matricule]}),(null===t||void 0===t||null===(e=t.remourque)||void 0===e?void 0:e.matricule)&&Object(i.jsxs)("li",{children:[Object(i.jsx)("b",{children:"Remorque:"})," ",t.remourque.matricule]})]})]}),Object(i.jsxs)("div",{style:{fontSize:"5mm",border:".15mm solid black",padding:"2mm",marginTop:"1mm"},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"6mm"},children:"Conducteurs: "})}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:t.driver1.firstname.toUpperCase()+" "+t.driver1.lastname.toUpperCase()+", C/P : "+t.driver1.code_paie}),t.driver2&&Object(i.jsx)("li",{children:t.driver2.firstname.toUpperCase()+" "+t.driver2.lastname.toUpperCase()+", C/P : "+t.driver2.code_paie})]})]}),Object(i.jsxs)("div",{style:{border:".2mm solid black",marginTop:"2mm",padding:"2mm",flex:1},children:[Object(i.jsx)("u",{children:Object(i.jsx)("b",{style:{fontSize:"5mm"},children:"Observation: "})})," ",t.observation?t.observation:"/"]})]}),Object(i.jsx)("div",{style:At.pageFooter,children:Object(i.jsxs)("div",{style:{border:".15mm solid black",padding:"1mm"},children:["Imprimer Le: ".concat(ne()().format("D-M-yy"))," | "," ",document.location.toString()]})})]}),Object(i.jsx)("div",{style:{width:"210mm",height:"297mm",fontSize:"4mm",backgroundColor:"white",border:"none",color:"black",textAlign:"center"},children:Object(i.jsx)("img",{style:{width:"100%"},src:Rt})})]})}}]),a}(r.a.Component),kt=function(){var e=p(),t=e.api,a=(e.user,Object(O.useHistory)(),n.useRef());return Object(i.jsx)(J,{title:"Liste des axes stratigique",children:Object(i.jsx)(re.a,{actionRef:a,size:"small",search:!0,columns:[{title:"ID",dataIndex:"id"},{title:"intitul\xe9",dataIndex:"name",copyable:!0,sorter:!0},{title:"Slog",dataIndex:"slog",sorter:!0,copyable:!0,hideInSearch:!1}],ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/smi_axes",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},Nt=function(){var e=p(),t=e.api,a=(e.user,Object(n.useState)(!1)),c=Object(u.a)(a,2),l=c[0],s=c[1],o=function(){s(!1)};r.a.useEffect((function(){}),[l]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"Nouvel \xe9l\xe9ment",children:Object(i.jsx)(I.a,{onClick:function(){s(!0)},icon:Object(i.jsx)(_e.a,{}),children:"Nouvel \xe9l\xe9ment"})}),Object(i.jsx)(Ct.a,{title:"Objectif op\xe9rationnel",placement:"right",closable:!1,onClose:o,visible:l,width:420,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"name",label:"intitul\xe9",type:"textarea"},{name:"axe_id",label:"Axe",type:"search",url:"smi_axes/search",rules:[{required:!0,message:z}],defaultOptionName:"axe",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.slog)+" | "+(null===e||void 0===e?void 0:e.name)}},{name:"processu_ids",optionLabelProp:"slog",label:"Processus",type:"debounceSelect",url:"smi_processus/search",rules:[{required:!0,message:z}],defaultOptionName:"processu",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.slog}}],initialValues:{},onFinish:function(e){e.processu_ids=e.processu_ids.map((function(e){return e.id})),t.post("/smi_objectifs",e).then((function(e){D.b.info("Bien ajouter"),o()}))}})})]})},Mt=function(){var e=p(),t=e.api,a=e.user,r=(Object(O.useHistory)(),n.useRef()),c=[{title:"intitul\xe9",dataIndex:"name",copyable:!0,hideInSearch:!1,sorter:!0},{title:"Axe",dataIndex:"axe.slog",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.axe)||void 0===n?void 0:n.slog}},{title:"Processus",dataIndex:"processus",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n="";return null===t||void 0===t||t.processus.map((function(e){n+=e.slog+", "})),n}},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,r,c){return[Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_OBJECTIF_OP")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/smi_objectifs/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),c.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})})]}}];return Object(i.jsxs)(J,{title:"Liste des objectifs op\xe9rationnels",children:[Pe(a,"AJOUTER_OBJECTIF_OP")&&Object(i.jsx)("div",{style:{marginBottom:15},children:Object(i.jsx)(Nt,{})}),Object(i.jsx)(re.a,{actionRef:r,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/smi_objectis",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:5}})]})},Lt=function(){var e=p(),t=e.api,a=(e.user,Object(O.useHistory)(),n.useRef());return Object(i.jsx)(J,{title:"Liste des processus",children:Object(i.jsx)(re.a,{actionRef:a,size:"small",search:!0,columns:[{title:"ID",dataIndex:"id"},{title:"intitul\xe9",dataIndex:"name",copyable:!0,sorter:!0},{title:"Slog",dataIndex:"slog",sorter:!0,copyable:!0,hideInSearch:!1}],ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/smi_processus",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:5}})})},Ut=a(1140),wt=a(1141),Pt=a(1142),Vt=function(e){var t=e.reload,a=p(),c=a.api,l=(a.user,Object(n.useState)(!1)),s=Object(u.a)(l,2),o=s[0],d=s[1],b=function(){d(!1)};r.a.useEffect((function(){}),[o]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"Nouvel \xe9l\xe9ment",children:Object(i.jsx)(I.a,{onClick:function(){d(!0)},icon:Object(i.jsx)(_e.a,{}),children:"Ajouter"})}),o&&Object(i.jsx)(Ct.a,{title:"Indicateur",placement:"right",closable:!1,onClose:b,visible:o,width:420,destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"name",label:"intitul\xe9",type:"textarea"},{name:"objectif_id",optionLabelProp:"slog",label:"Objectif operationnel",type:"search",url:"smi_objectifs/search",rules:[{required:!0,message:z}],defaultOptionName:"objectif",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.name}},{name:"processu_id",optionLabelProp:"slog",label:"Processus",type:"search",url:"smi_processus/search",rules:[{required:!0,message:z}],defaultOptionName:"processu",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.slog}},{name:"domaine",label:"Domaine",type:"selectmultipless",selects:[{label:"Qualit\xe9",value:"qualite"},{label:"Environnement",value:"environnement"},{label:"Sant\xe9 & Securit\xe9",value:"sante"}],rules:[{required:!0,message:z}]},{name:"description",label:"Description",type:"text",rules:[{required:!0,message:z}]},{name:"type",label:"intra processus",type:"boolean",unCheckedChildren:"Intra processus",checkedChildren:"Exta processus",rules:[{required:!0,message:z}]},{name:"mesure",label:"Unit\xe9 de mesure",type:"select",selects:[{label:"Heures",value:"heures"},{label:"Jours",value:"jours"},{label:"Nombre",value:"nombre"},{label:"Dinars",value:"dinars"},{label:"%",value:"%"}],rules:[{required:!0,message:z}]},{name:"seuil",label:"Crit\xe8re de performance",type:"number",rules:[{required:!0,message:z}]},{name:"indicateur_sueil",label:"Sens indicateur / Crit\xe8re de performance",type:"select",selects:[{label:">",value:">"},{label:"=",value:"="},{label:"<",value:"<"}],rules:[{required:!0,message:z}]},{name:"methode_calcul",label:"M\xe9thode de calcul",type:"text",rules:[{required:!0,message:z}]},{name:"frequence",label:"Frequence",type:"select",selects:[{label:"Journalier",value:"day"},{label:"Mensuelle",value:"month"},{label:"Trimestriel",value:"quarter"},{label:"Annuel",value:"year"}],rules:[{required:!0,message:z}]},{name:"mode_calcul",label:"Mode Calcul",type:"select",selects:[{label:"Somme",value:"somme"},{label:"Moyene",value:"moyene"},{label:"Resultat comul\xe9",value:"comule"}],rules:[{required:!0,message:z}]}],initialValues:{},onFinish:function(e){e.type=e.type?1:0,e.domaine="qualite",c.post("/smi_indicateurs",e).then((function(e){D.b.info("Bien ajouter"),b(),t()}))}})})]})},Bt=function(e){var t=e.title,a=e.reload,c=e.indicateur_id,l=e.frequence,s=p(),o=s.api,d=(s.user,Object(n.useState)(!1)),b=Object(u.a)(d,2),j=b[0],m=b[1],h=function(){m(!1),a()};r.a.useEffect((function(){}),[j]);var O="date";return"week"==l&&(O="date_picker_week"),"month"==l&&(O="date_picker_month"),"quarter"==l&&(O="date_picker_quarter"),"year"==l&&(O="date_picker_year"),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"Ajouter une valeur",children:Object(i.jsx)(I.a,{onClick:function(){m(!0)},shape:"circle",icon:Object(i.jsx)(_e.a,{})})}),j&&Object(i.jsx)(Ct.a,{title:t,placement:"right",closable:!1,onClose:h,visible:j,width:420,destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"date",label:"Date",type:O,rules:[{required:!0,message:z}]},{name:"valeur",label:"Valeur",type:"number",rules:[{required:!0,message:z}]},{name:"comment",label:"Commentaire",type:"textarea"}],initialValues:{},onFinish:function(e){e.date&&(e.indicateur_id=c,"day"==l&&(e.date={value:e.date.format("yy-M-D"),type:"day",year:e.date.year()}),"week"==l&&(e.date={value:e.date.week(),type:"week",year:e.date.year()}),"month"==l&&(e.date={value:e.date.month(),type:"month",year:e.date.year()}),"quarter"==l&&(e.date={value:e.date.quarter(),type:"quarter",year:e.date.year()}),"year"==l&&(e.date={value:e.date.year(),type:"year",year:e.date.year()}),e.date=JSON.stringify(e.date),o.post("/smi_indicateurs/create_valeur",e).then((function(e){D.b.info("Bien ajouter"),h(),a()})))}})})]})},qt=(a(1125),a(1124)),Ht=(ke.a.Text,function(e){var t=e.indicateur,a=e.children;return Object(i.jsx)(_.a,{placement:"topRight",content:Object(i.jsx)(qt.a,{bordered:!0,children:[{title:"Description",description:t.description},{title:"Methode de calcul",description:t.methode_calcul},{title:"Mode de calcul",description:t.mode_calcul},{title:"Domaine",description:t.domaine}].map((function(e){return Object(i.jsx)(qt.a.Item,{span:3,label:e.title,children:e.description})}))}),trigger:"click",children:a})}),Ft=function(e){var t=e.reload,a=e.addButton,c=e.indicateurv_id,l=p(),s=l.api,o=(l.user,Object(n.useState)(!1)),d=Object(u.a)(o,2),b=d[0],j=d[1],m=function(){j(!0)},h=function(){j(!1)};r.a.useEffect((function(){}),[b]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(Ne.a,{title:"Ajouter non-conformit\xe9",children:[a&&a(m),!a&&Object(i.jsx)(I.a,{onClick:m,icon:Object(i.jsx)(_e.a,{}),children:"Ajouter"})]}),b&&Object(i.jsx)(Ct.a,{title:"Non Conformit\xe9",placement:"right",closable:!1,onClose:h,visible:b,width:420,destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"name",label:"intitul\xe9",type:"text"},{name:"nature",label:"Nature de la non-conformit\xe9",type:"select",selects:[{label:"Produit/service achet\xe9",value:"Produit/service achete"},{label:"Reclamation client",value:"Reclamation client"},{label:"Plainte",value:"Plainte"},{label:"Accident/incident",value:"Accident/incident"},{label:"Impact environnemental",value:"Impact environnemental"},{label:"Non atteinte d'un objectif",value:"Non atteinte d'un objectif"},{label:"Inspection",value:"Inspection"},{label:"R\xe8glementation",value:"Reglementation"},{label:"Autres",value:"Autres"}],rules:[{required:!0,message:z}]},{name:"nature_label",label:"Libell\xe9 de la nature",type:"text",rules:[{required:!0,message:z}]},{name:"date",label:"Date non-conformit\xe9",type:"date",rules:[{required:!0,message:z}]},{name:"description",label:"Description",type:"textarea",rules:[{required:!0,message:z}]},{name:"processu_id",optionLabelProp:"slog",label:"Processus",type:"search",url:"smi_processus/search",rules:[{required:!0,message:z}],defaultOptionName:"processu",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.slog}},{name:"domaine",label:"Domaine",type:"selectmultiple",selects:[{label:"Qualit\xe9",value:"qualite"},{label:"Environnement",value:"environnement"},{label:"Sant\xe9 & Securit\xe9",value:"sante"}],rules:[{required:!0,message:z}]},{name:"date_prevu",label:"D\xe9lais pr\xe9vu",type:"date",rules:[{required:!0,message:z}]}],initialValues:{date:ne()(),date_prevu:ne()()},onFinish:function(e){e.indicateurv_id=c,e.domaine=JSON.stringify(e.domaine),e.date_prevu=e.date_prevu?e.date_prevu.format("yy-M-D"):ne()().format("yy-M-D"),e.date=e.date?e.date.format("yy-M-D"):ne()().format("yy-M-D"),s.post("/smi_conformites",e).then((function(e){D.b.info("Bien ajouter"),h(),t()}))}})})]})},Gt=function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=n.useRef(),l=n.useState(1),s=Object(u.a)(l,2),o=s[0],d=s[1],b=[{title:"Processus",dataIndex:"processus",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.processu)||void 0===n?void 0:n.slog}},{title:"Objectif",dataIndex:"objectif",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.objectif)||void 0===n?void 0:n.name}},{title:"Indicateur",dataIndex:"name",copyable:!1,hideInSearch:!1,sorter:!0},{title:"Crit\xe8re de performance",dataIndex:"seuil",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){return(null===t||void 0===t?void 0:t.indicateur_sueil)+" \xe0 "+(null===t||void 0===t?void 0:t.seuil)+" "+(null===t||void 0===t?void 0:t.mesure)}},{title:"Fr\xe9quence",dataIndex:"frequence",hideInSearch:!0,render:function(e,t,a,i){return He(t.frequence)}},{title:"R\xe9sultat",dataIndex:"valeur",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n,r;return 0!==(null===(n=t.valeurs)||void 0===n?void 0:n.length)?(null===t||void 0===t?void 0:t.valeurs[(null===(r=t.valeurs)||void 0===r?void 0:r.length)-1].valeur)+" "+(null===t||void 0===t?void 0:t.mesure):"-"}},{title:"Ecart",dataIndex:"valeur",sorter:!0,hideInSearch:!0,render:function(e,t,a,n){var r,c=function(e){var t,a,i;return 0!==(null===(t=e.valeurs)||void 0===t?void 0:t.length)?">"==e.indicateur_sueil?(null===e||void 0===e?void 0:e.valeurs[(null===(a=e.valeurs)||void 0===a?void 0:a.length)-1].valeur)-(null===e||void 0===e?void 0:e.seuil):(null===e||void 0===e?void 0:e.seuil)-(null===e||void 0===e?void 0:e.valeurs[(null===(i=e.valeurs)||void 0===i?void 0:i.length)-1].valeur):null}(t);return c?(c=c.toFixed(2))>0?Object(i.jsx)(I.a,{type:"text",block:!0,title:c,icon:Object(i.jsx)(Ut.a,{twoToneColor:"#52c41a"}),children:" "+c}):Object(i.jsx)(Ft,{indicateurv_id:null===t||void 0===t?void 0:t.valeurs[(null===(r=t.valeurs)||void 0===r?void 0:r.length)-1].id,reload:function(){},addButton:function(e){return Object(i.jsx)(I.a,{onClick:e,type:"text",block:!0,title:c,icon:Object(i.jsx)(wt.a,{twoToneColor:"#ff5722"}),children:" "+c})}}):"Acucun valeur"}},{title:"Date de la valeur",dataIndex:"date",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n,r;return 0!==(null===(n=t.valeurs)||void 0===n?void 0:n.length)?qe(null===t||void 0===t?void 0:t.valeurs[(null===(r=t.valeurs)||void 0===r?void 0:r.length)-1].date):"-"}},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[Object(i.jsx)(Ht,{indicateur:n,children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Pt.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"AJOUTER_VALEUR_INDICATEUR")&&Object(i.jsx)(Bt,{reload:function(){return l.reload()},title:n.name,frequence:n.frequence,indicateur_id:n.id})}),Object(i.jsx)(Ne.a,{title:"Historique des valeurs",children:Object(i.jsx)(I.a,{onClick:function(){return r.push("/smi/qualite/indicateurs/"+n.id)},shape:"circle",icon:Object(i.jsx)(Le.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_INDICATEUR")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/smi_indicateurs/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})})]}}];return Object(i.jsxs)(J,{title:"Indicateurs & valeurs",children:[Object(i.jsx)("div",{style:{marginBottom:15},children:Pe(a,"AJOUTER_INDICATEUR")&&Object(i.jsx)(Vt,{reload:function(){return c.current.reload()}})}),Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:b,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),e.processu_id=o,t.get("/smi_indicateurs",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:5},toolBarRender:function(e){return[Object(i.jsx)("div",{children:Object(i.jsx)(ce.a,{defaultValue:1,style:{width:220},onChange:function(t){d(t),e.reload()},children:Fe.map((function(e){return Object(i.jsx)(ce.a.Option,{value:e.id,children:e.value})}))})})]}})]})},Yt=a(1118),zt=a(384),Kt=function(e){var t=e.valeurs,a=r.a.useState([]),n=Object(u.a)(a,2),c=n[0],l=n[1];return r.a.useEffect((function(){var e=null===t||void 0===t?void 0:t.map((function(e){return{year:qe(e.date),value:null===e||void 0===e?void 0:e.valeur}}));l(e)}),[t]),Object(i.jsx)(zt.b,{xField:"year",yField:"value",point:{size:5,shape:"diamond"},data:c})},Jt=a(441),Wt=a.n(Jt),Xt=a(1143),Qt=a(1144),Zt=function(e){var t=e.lastValeur,a=e.beforeLastValeur,n=e.indicateur,r=e.loading,c={percent:(null===t||void 0===t?void 0:t.valeur)/100,range:{ticks:[0,1/3,2/3,1],color:"<"==n.indicateur_sueil?["#30BF78","#FAAD14","#F4664A"]:["#F4664A","#FAAD14","#30BF78"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{content:{style:{fontSize:"20px",lineHeight:"20px"}}}};return r?Object(i.jsx)(Z.a,{title:n.name,style:{width:250,height:250},children:Object(i.jsx)(b.a,{style:{alignSelf:"center"}})}):t?Object(i.jsxs)(Z.a,{title:n.name,style:{width:250,height:250},children:[Object(i.jsx)(zt.a,Object(j.a)({height:150,width:150},c)),Object(i.jsx)(Z.a.Meta,{title:Object(i.jsx)("a",{children:qe(t.date)}),description:Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(i.jsx)(Wt.a,{children:"Seuil: ".concat(n.seuil," ").concat(n.mesure,"  |  ").concat(He(JSON.parse(t.date).type))}),a&&Object(i.jsxs)("div",{style:{color:t.valeur-a.valeur>=0?"green":"red"},children:[Object(i.jsxs)(Wt.a,{style:{color:t.valeur-a.valeur>=0?"green":"red"},children:[Math.abs(t.valeur-a.valeur)," ",n.mesure," "]}),t.valeur-a.valeur>0?Object(i.jsx)(Xt.a,{}):t.valeur-a.valeur==0?Object(i.jsx)(ye.a,{}):Object(i.jsx)(Qt.a,{})]})]})})]}):Object(i.jsx)(Z.a,{title:n.name,style:{width:250,height:250},children:"Aucun valeur trouver"})},$t=Yt.a.Panel,ea=function(e){var t=e.indicateur,a=p(),n=a.api,c=(a.user,r.a.useState(!0)),l=Object(u.a)(c,2),s=l[0],o=l[1],d=r.a.useState([]),b=Object(u.a)(d,2),j=b[0],m=b[1];r.a.useEffect((function(){o(!0),n.get("smi_indicateurs/"+t.id).then((function(e){var t,a;m(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data),o(!1)}))}),[t]);var h=null;(null===j||void 0===j?void 0:j.length)>=1&&(h=j[(null===j||void 0===j?void 0:j.length)-1]);var O=null;return(null===j||void 0===j?void 0:j.length)>=2&&(O=j[(null===j||void 0===j?void 0:j.length)-2]),Object(i.jsx)(J,{children:Object(i.jsx)(Zt,{loading:s,beforeLastValeur:O,lastValeur:h,indicateur:t})})},ta=function(e){var t,a=e.p;return Object(i.jsx)(X.a,{gutter:18,children:null===a||void 0===a||null===(t=a.indicateurs)||void 0===t?void 0:t.map((function(e){return Object(i.jsx)(ea,{indicateur:e})}))})},aa=function(){var e=p(),t=e.api,a=(e.user,r.a.useState([])),n=Object(u.a)(a,2),c=n[0],l=n[1];return r.a.useEffect((function(){t.get("smi_processus").then((function(e){l(e.data.data)}))}),[]),Object(i.jsx)(J,{title:"Tableau de board QHSE",children:Object(i.jsx)(Yt.a,{defaultActiveKey:["0"],children:c.map((function(e,t){return Object(i.jsx)($t,{header:e.name,extra:Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:e.indicateurs.length})," INDICATEURS"]}),children:Object(i.jsx)(ta,{p:e})},t)}))})})},ia=function(){Object(O.useHistory)();var e=Object(O.useRouteMatch)().params,t=p(),a=t.api,n=t.user,c=r.a.useState(null),l=Object(u.a)(c,2),s=l[0],o=l[1],d=r.a.useState(!0),b=Object(u.a)(d,2),j=(b[0],b[1],r.a.useRef()),m=[{title:"Date",dataIndex:"date",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){return qe(t.date)}},{title:"Valeur",dataIndex:"valeur",sorter:!0,hideInSearch:!0},{title:"Comment",dataIndex:"comment",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"createdbys_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,t,r,c){return[Object(i.jsx)(i.Fragment,{children:Pe(n,"SUPPRIMER_INDICATEURV")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){a.post("/smi_indicateurvs/delete/"+t.id).then((function(){D.b.info("Bien Supprim\xe9"),c.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})})]}}];return Object(i.jsxs)(J,{withBack:!0,title:"Historique des valeurs",children:[s&&Object(i.jsx)("div",{style:{height:120},children:Object(i.jsx)(Kt,{valeurs:s})}),Object(i.jsx)("div",{children:Object(i.jsx)(re.a,{actionRef:j,size:"small",search:!0,columns:m,ellipsis:!0,request:function(t,i,n){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),n&&(t.filterBy=Object.keys(n)[0],t.filter=Object.values(n)),a.get("/smi_indicateurs/"+e.id,{params:t}).then((function(e){return console.log(e.data.data.data),o(e.data.data.data),e.data.data}))},pagination:{defaultCurrent:1,pageSize:5}})})]})},na=a(1145),ra=a(1131),ca=a(289),la=a.n(ca),sa=ke.a.Text,oa=function(e){e.title;var t=e.reload,a=(e.indicateur_id,e.frequence,e.row),c=p(),l=c.api,s=(c.user,Object(n.useState)(!1)),o=Object(u.a)(s,2),d=o[0],b=o[1];r.a.useEffect((function(){}),[d]);var m=function(e){console.log(e),e.correctives&&e.correctives.length>0&&(e.correctives=e.correctives.map((function(e){return{action:e.action,echeance:e.echeance.format("yy-M-D"),users:e.users}}))),l.post("/smi_conformites/correcte/"+a.id,e).then((function(e){D.b.info("Bien ajouter")}))};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"TRAITEMENT DU PROBL\xc8ME",children:Object(i.jsx)(I.a,{onClick:function(){b(!0)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})}),d&&Object(i.jsx)(Ct.a,{title:"TRAITEMENT DU PROBL\xc8ME",placement:"right",closable:!1,onClose:function(){b(!1),t()},visible:d,width:"50%",destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{type:"render",render:function(e){return Object(i.jsx)(se.a.List,{name:"corrections",initialValue:(null===a||void 0===a?void 0:a.corrections)?JSON.parse(null===a||void 0===a?void 0:a.corrections):[""],rules:[{validator:function(){var e=Object($e.a)(Ze.a.mark((function e(t,a){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!(a.length<1)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("At least 2 passengers")));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}],children:function(e,t,a){var n=t.add,r=t.remove,c=a.errors;return Object(i.jsxs)(i.Fragment,{children:[e.map((function(t,a){return Object(i.jsxs)(se.a.Item,{label:0===a?"Actions correction":"",required:!1,children:[Object(i.jsx)(se.a.Item,Object(j.a)(Object(j.a)({},t),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"Veuillez saisir la correction ou supprimer ce champ."}],noStyle:!0,children:Object(i.jsx)(la.a,{placeholder:"Action correction"})})),e.length>1?Object(i.jsx)(na.a,{style:{position:"absolute",right:-15,top:"50%",color:"#999"},onClick:function(){return r(t.name)}}):null]},t.key)})),Object(i.jsxs)(se.a.Item,{children:[Object(i.jsx)(I.a,{type:"dashed",onClick:function(){return n()},style:{width:"60%"},icon:Object(i.jsx)(_e.a,{}),children:"Ajouter une correction"}),Object(i.jsx)(se.a.ErrorList,{errors:c})]})]})}})}},{type:"render",render:function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(se.a.List,{name:"correctives",children:function(t,n,r){var c=n.add,l=n.remove,s=r.errors;return Object(i.jsxs)(i.Fragment,{children:[(0!==t.length||0!==a.actions.length)&&Te(e,[],{type:"render",render:function(){var e,t,n;if((null===a||void 0===a||null===(e=a.actions)||void 0===e?void 0:e.length)>0)return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(g.a,{plain:!0,children:"Il ya ".concat(null===a||void 0===a||null===(t=a.actions)||void 0===t?void 0:t.length," action(s) courrective(s)")}),Object(i.jsxs)("div",{style:{marginBottom:10},children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",backgroundColor:"#fafafa"},children:[Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:2},children:"Intitule"}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:"Date echeance"}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:"Responsables"}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:"Avancement"})]}),null===a||void 0===a||null===(n=a.actions)||void 0===n?void 0:n.map((function(e){return Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:2},children:e.name}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:e.date_echeance}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:e.users}),Object(i.jsx)("div",{style:{border:"1px lightgray solid",padding:3,flex:1},children:Object(i.jsx)(ge.a,{steps:5,percent:null===e||void 0===e?void 0:e.avancement})})]})})),Object(i.jsxs)("div",{children:[Object(i.jsx)(ra.a,{}),Object(i.jsx)(sa,{style:{marginLeft:5},type:"secondary",children:"On peut le g\xe9rer les AC dans la section Plan d'action."})]})]})]});g.a}}),t.map((function(a,n){return Object(i.jsx)(se.a.Item,{required:!1,children:Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",border:"1px lightgray dashed",padding:5,borderRadius:3,position:"relative"},children:[Object(i.jsx)("div",{children:Te(e,[],Object(j.a)(Object(j.a)({},a),{},{label:"Action propos\xe9es",name:[a.name,"action"],fieldKey:[a.fieldKey,"action"],type:"textarea"}))}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Te(e,[],Object(j.a)(Object(j.a)({},a),{},{label:"Ech\xe9ance",name:[a.name,"echeance"],fieldKey:[a.fieldKey,"echeance"],type:"date"})),Te(e,[],Object(j.a)(Object(j.a)({},a),{},{type:"selectmultiple",label:"Responsables",name:[a.name,"users"]}))]}),t.length>0?Object(i.jsx)(na.a,{style:{position:"absolute",right:-15,top:"50%",color:"#999"},onClick:function(){return l(a.name)}}):null]},a.key)},a.key)})),Object(i.jsxs)(se.a.Item,{children:[Object(i.jsx)(I.a,{type:"dashed",onClick:function(){return c()},style:{width:"60%"},icon:Object(i.jsx)(_e.a,{}),children:"Ajouter une action corrective (AC)"}),Object(i.jsx)(se.a.ErrorList,{errors:s})]})]})}})})}},{type:"render",render:function(e){var t;if(0!==(null===(t=e.getFieldValue("correctives"))||void 0===t?void 0:t.length)||0!==a.actions.length)return Te(e,[],{type:"render",render:function(e){return window.form=e,Te(e,[],{type:"textarea",name:"causes",label:"Analyse des causes(identification de la (des) cause(s)) si il ya AC"})}})}},{type:"divider",text:""},{name:"avancement",label:"Avancement",type:"progress",rules:[{required:!0,message:z}]},{name:"date_cloture",label:"Date cloture",type:"date"}],initialValues:{date_cloture:(null===a||void 0===a?void 0:a.date_cloture)?ie(null===a||void 0===a?void 0:a.date_cloture):null,avancement:null===a||void 0===a?void 0:a.avancement,causes:null===a||void 0===a?void 0:a.causes},onFinish:function(e){if(100==e.avancement&&e.date_cloture){var t;if((null===a||void 0===a||null===(t=a.actions)||void 0===t?void 0:t.length)>0){var i=!0;if(null===a||void 0===a||a.actions.forEach((function(e){e.avancement<100&&(i=!1)})),!i)return void D.b.warn("Aucune NC clotur\xe9e sans realiser les AC(s) ratach\xe9es")}return e.date_cloture=e.date_cloture.format("yy-M-D"),console.log("post data with date_cloture and avancemetn 100"),m(e)}if(!e.date_cloture&&100!=e.avancement&&0!=e.avancement)return e.date_cloture=null,console.log("post data with date_cloture of null"),m(e);D.b.warn("Error !")}})})]})},da=(ke.a.Text,function(e){var t=e.nonconformite,a=e.children;return Object(i.jsx)(_.a,{placement:"topRight",content:Object(i.jsx)(qt.a,{bordered:!0,children:[{title:"Description",description:t.description},{title:"Domaine",description:t.domaine}].map((function(e){return Object(i.jsx)(qt.a.Item,{span:3,label:e.title,children:e.description})}))}),trigger:"click",children:a})}),ua=function(){var e=p(),t=e.api,a=e.user,r=(Object(O.useHistory)(),n.useRef()),c=[{title:"ID",dataIndex:"id",hideInSearch:!0,sorter:!0},{title:"intitul\xe9",dataIndex:"name",copyable:!0,hideInSearch:!1,sorter:!0},{title:"Nature de la non-conformit\xe9",dataIndex:"nature",copyable:!0,hideInSearch:!0},{title:"Libell\xe9 de la nature",dataIndex:"nature_label",copyable:!0,hideInSearch:!0},{title:"description",dataIndex:"Description",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.objectif)||void 0===n?void 0:n.name}},{title:"Date non-conformit\xe9",dataIndex:"date",sorter:!0,hideInSearch:!0},{title:"Processus",dataIndex:"processus",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.processu)||void 0===n?void 0:n.slog}},{title:"Avancement",dataIndex:"avancement",hideInSearch:!0,render:function(e,t,a,n){return Object(i.jsx)(ge.a,{steps:5,percent:null===t||void 0===t?void 0:t.avancement})}},{title:"Cree par",dataIndex:"createdby",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.createdby)||void 0===n?void 0:n.username}},{title:"Accepter par",dataIndex:"acceptedb",sorter:!0,hideInSearch:!0,render:function(e,t,a,i){var n;return null===t||void 0===t||null===(n=t.acceptedb)||void 0===n?void 0:n.username}},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,r,c){return[Object(i.jsx)(da,{nonconformite:n,children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Pt.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"EDIT_NON_CONFORMITE")&&Object(i.jsx)(oa,{reload:function(){return c.reload()},title:n.name,frequence:n.frequence,indicateur_id:n.id,row:n})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_INDICATEUR")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/smi_conformites/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),c.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})})]}}];return Object(i.jsxs)(J,{title:"Liste des non-conformit\xe9s",children:[Object(i.jsx)("div",{style:{marginBottom:15},children:Pe(a,"AJOUTER_INDICATEUR")&&Object(i.jsx)(Ft,{reload:function(){return r.current.reload()}})}),Object(i.jsx)(re.a,{actionRef:r,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/smi_conformites",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:5}})]})},ba=(ke.a.Text,function(e){e.title;var t=e.reload,a=(e.indicateur_id,e.frequence,e.row),c=p(),l=c.api,s=(c.user,Object(n.useState)(!1)),o=Object(u.a)(s,2),d=o[0],b=o[1];r.a.useEffect((function(){}),[d]);var j=function(e){l.post("/smi_actions/correcte/"+a.id,e).then((function(e){D.b.info("Bien ajouter")}))};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"TRAITEMENT ACTION",children:Object(i.jsx)(I.a,{onClick:function(){b(!0)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})}),d&&Object(i.jsx)(Ct.a,{title:"TRAITEMENT ACTION",placement:"right",closable:!1,onClose:function(){b(!1),t()},visible:d,width:"50%",destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"avancement",label:"Avancement",type:"progress",rules:[{required:!0,message:z}]},{name:"date_cloture",label:"Date cloture",type:"date"},{name:"observation",label:"Observation",type:"textarea"},{name:"state",label:"Etat de action",type:"select",selects:[{label:"Anull\xe9e",value:"Anull\xe9e"}]}],initialValues:{date_cloture:(null===a||void 0===a?void 0:a.date_cloture)?ie(null===a||void 0===a?void 0:a.date_cloture):null,avancement:null===a||void 0===a?void 0:a.avancement,observation:null===a||void 0===a?void 0:a.observation},onFinish:function(e){return 100==e.avancement&&e.date_cloture?(e.date_cloture=e.date_cloture.format("yy-M-D"),console.log("post data with date_cloture and avancemetn 100"),j(e)):e.date_cloture||100==e.avancement||0==e.avancement?void D.b.warn("Error !"):(e.date_cloture=null,console.log("post data with date_cloture of null"),j(e))}})})]})}),ja=(ke.a.Text,function(e){e.title;var t=e.reload,a=(e.indicateur_id,e.frequence,e.row),c=p(),l=c.api,s=(c.user,Object(n.useState)(!1)),o=Object(u.a)(s,2),d=o[0],b=o[1],j=function(){b(!1),t()};r.a.useEffect((function(){}),[d]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ne.a,{title:"AJOUTER ACTION",children:Object(i.jsx)(I.a,{onClick:function(){b(!0)},icon:Object(i.jsx)(_e.a,{}),children:"Ajouter"})}),d&&Object(i.jsx)(Ct.a,{title:"AJOUTER ACTION",placement:"right",closable:!1,onClose:j,visible:d,width:"50%",destroyOnClose:!0,children:Object(i.jsx)(Re,{full:!0,formItems:[{name:"processu_id",optionLabelProp:"slog",label:"Processus",type:"search",url:"smi_processus/search",rules:[{required:!0,message:z}],defaultOptionName:"processu",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.slog}},{name:"action",label:"Intitul\xe9",type:"textarea",rules:[{required:!0,message:z}]},{name:"conformite_id",label:"Non-conformit\xe9 (AC)",type:"search",url:"smi_conformites/search",defaultOptionName:"conformite",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.name}},{name:"echeance",label:"Date echeance",type:"date"},{type:"selectmultiple",name:"users",label:"Responsables"}],initialValues:{echeance:(null===a||void 0===a?void 0:a.date_cloture)?ie(null===a||void 0===a?void 0:a.date_cloture):null,avancement:null===a||void 0===a?void 0:a.avancement,observation:null===a||void 0===a?void 0:a.observation},onFinish:function(e){return e.echeance=e.echeance?e.echeance.format("yy-M-D"):ie().format("yy-M-D"),function(e){l.post("/smi_actions/",e).then((function(e){D.b.info("Bien ajouter"),j(),t()}))}(e)}})})]})}),ma=function(){var e=p(),t=e.api,a=e.user,r=(Object(O.useHistory)(),n.useState(1)),c=Object(u.a)(r,2),l=c[0],s=c[1],o=n.useRef(),d=[{title:"ID",dataIndex:"id",hideInSearch:!0,sorter:!0},{title:"Intitul\xe9",dataIndex:"actions_name",copyable:!0,hideInSearch:!1,sorter:!0},{title:"Processus",dataIndex:"processus_slog",hideInSearch:!0,sorter:!0},{title:"Type",hideInSearch:!0,render:function(e,t,a,n){return t.conformites_name?Object(i.jsx)(Ne.a,{title:"NC: "+(null===t||void 0===t?void 0:t.conformites_name),children:Object(i.jsx)(he.a,{color:"blue",children:"AC"})}):Object(i.jsx)(he.a,{color:"green",children:"AA"})}},{title:"Date echeance",dataIndex:"actions_date_echeance",sorter:!0,hideInSearch:!0},{title:"Responsables",dataIndex:"actions_users",hideInSearch:!0,render:function(e,t,a,n){var r;return null===(r=JSON.parse(null===t||void 0===t?void 0:t.actions_users))||void 0===r?void 0:r.map((function(e,t){return Object(i.jsx)(he.a,{children:e})}))}},{title:"Avancement",dataIndex:"actions_avancement",hideInSearch:!0,render:function(e,t,a,n){return Object(i.jsx)(ge.a,{steps:5,percent:null===t||void 0===t?void 0:t.actions_avancement})}},{title:"Cree par",dataIndex:"createdbys_username",hideInSearch:!0},{title:"Accepter par",dataIndex:"acceptedbys_username",hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,r,c){return[Object(i.jsx)(i.Fragment,{children:Pe(a,"SMI_EDIT_ACTION")&&Object(i.jsx)(ba,{row:n,reload:function(){return c.reload()},title:n.name})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SMI_VALIDER_ACTION")&&Object(i.jsx)(Ke.a,{title:"Elle est efficase?",onConfirm:function(){t.post("/smi_actions/accepte/"+n.id).then((function(){D.b.info("Bien ajouter"),c.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(B.e,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SMI_SUPPRIMER_ACTION")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/smi_actions/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),c.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})})]}}];return Object(i.jsxs)(J,{title:"AC & AA",children:[Object(i.jsx)("div",{style:{marginBottom:15},children:Pe(a,"SMI_AJOUTER_ACTION")&&Object(i.jsx)(ja,{reload:function(){return o.current.reload()}})}),Object(i.jsx)(re.a,{actionRef:o,size:"small",search:!0,columns:d,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),e.processu_id=l,t.get("/smi_actions",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:5},toolBarRender:function(e){return[Object(i.jsx)("div",{children:Object(i.jsx)(ce.a,{defaultValue:1,style:{width:220},onChange:function(t){s(t),e.reload()},children:Fe.map((function(e){return Object(i.jsx)(ce.a.Option,{value:e.id,children:e.value})}))})})]}})]})},ha=C.a.SubMenu,pa={appName:"GPark v1.0.0",routes:[{path:"/",name:"dashboard",label:"Tableau de bord",role:"DASHBOARD",component:ae,icon:Object(i.jsx)(w.a,{}),authority:["dashboard"],hideInSide:!0,exact:!0},{path:"/dashboard",name:"dashboard",label:"Tableau de bord",role:"DASHBOARD",component:ae,icon:Object(i.jsx)(w.a,{}),authority:["dashboard"]},{path:"/notifications",name:"Notifications",label:"Notifications",component:function(){var e=p(),t=e.api,a=(e.user,Object(O.useHistory)()),r=[{title:"Designation",dataIndex:"title",sorter:!0,render:function(e,t,a,i){return t.title+" | "+t.sub_title}},{title:"Date Cre\xe9ation",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"<>",dataIndex:"is_read",hideInSearch:!0,sorter:!0,render:function(e,t,a,i){return t.is_read?"DEJA VU":"Non vu"}},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,r,c){return[Object(i.jsx)(I.a,{onClick:function(){t.post("/notifications/"+n.id).then((function(){a.push(n.url)}))},shape:"circle",icon:Object(i.jsx)(bt.a,{})})]}}],c=n.useRef();return window.actionRef=c,Object(i.jsx)(J,{title:"Notifications",selectedSiderKey:"list-notifiactions",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:r,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/notifications",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},icon:Object(i.jsx)(w.a,{}),authority:["dashboard"],hideInSide:!0},{name:"users",label:"Utilisateurs",icon:Object(i.jsx)(P.a,{}),role:"UTILISATEURS",routes:[{path:"/users/add",name:"add-user",label:"Ajouter utilisateur",component:function(){var e=p().api;return Object(i.jsx)(J,{title:"Nauveau Utilisateur",selectedSiderKey:"add-users",children:Object(i.jsx)(Re,{formItems:Ae,onFinish:function(t){e.post("/auth/users",t).then((function(e){D.b.info("Bien ajouter")}))}})})}},{path:"/users",name:"list-users",label:"Liste des utilisateurs",component:function(){var e=p().api,t=Object(O.useHistory)(),a=[{title:"Nom d'utilisateur",dataIndex:"username",copyable:!0,filters:!0,sorter:!0},{title:"Nom",dataIndex:"firstname",sorter:!0,hideInSearch:!0},{title:"Pr\xe9nom",dataIndex:"lastname",sorter:!0,hideInSearch:!0},{title:"Poste",dataIndex:"poste",sorter:!0,hideInSearch:!0},{title:"Email",dataIndex:"mail",valueType:"email",sorter:!0,hideInSearch:!0},{title:"Date Cre\xe9ation",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0},{title:"Tel",dataIndex:"tel",copyable:!0,sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(a,n,r,c){return[Object(i.jsx)("a",{onClick:function(){e.post("auth/users/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),c.reload()}))},children:"Supprimer"}),Object(i.jsx)("a",{onClick:function(){t.push("/users/edit/"+n.id)},children:"Modifier"})]}}],r=n.useRef();return window.actionRef=r,Object(i.jsx)(J,{title:"Utilisateurs",selectedSiderKey:"list-users",children:Object(i.jsx)(re.a,{actionRef:r,size:"small",search:!0,columns:a,ellipsis:!0,request:function(t,a,i){return console.log(a),a&&(t.sortBy=Object.keys(a)[0],t.sort=Object.values(a)[0]),e.get("/auth/users",{params:t,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/users/edit/:id",name:"edit-user",label:"Modifier l'utilisateur",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1];return Object(n.useEffect)((function(){t.get("/auth/users/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie l'utilisateur",selectedSiderKey:"list-users",children:Object(i.jsx)(Re,{formItems:Ae,initialValues:d,onFinish:function(a){t.put("/auth/users/"+e.id,a).then((function(e){D.b.info("Bien ajouter")}))}})})},hideInSide:!0},{path:"/users/cars",name:"user-cars-users",label:"utilisateurs <> v\xe9hicules",component:function(){var e=p().api,t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)({user_id:null,cars_id:[],loadingCars:!0,loadingUserCars:!1,carGroupe:"vh"}),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(n.useState)([]),m=Object(u.a)(b,2),h=m[0],O=m[1];window.data=o;var f=function(){o.user_id&&o.cars_id&&e.post("/auth/users/cars",{user_id:o.user_id,cars_id:o.cars_id}).then((function(e){D.b.info("Bien ajouter")}))};Object(n.useEffect)((function(){o.user_id&&(d(Object(j.a)(Object(j.a)({},o),{},{loadingUserCars:!0})),e.get("auth/users/cars/"+o.user_id).then((function(e){var t=e.data.data.map((function(e){return e.id}));d(Object(j.a)(Object(j.a)({},o),{},{cars_id:t,loadingUserCars:!1}))})))}),[o.user_id]),Object(n.useEffect)((function(){e.get("allcars").then((function(e){var t=e.data.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{id:Number.parseInt(e.id)})}));d(Object(j.a)(Object(j.a)({},o),{},{loadingCars:!1})),c(t)}))}),[o.carGroupe]);return Object(i.jsx)(J,{title:"Affect\xe9 des vehicules au utilisateur",selectedSiderKey:"user-cars-users",children:Object(i.jsxs)(se.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:f,children:[Object(i.jsx)(se.a.Item,{label:"Utilisateur",name:"user_id",children:Object(i.jsx)(me,{url:"auth/users/search",style:{width:200},mapOptionToString:function(e){return e.firstname+" "+e.lastname},onSelect:function(e,t){d(Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}))},onChange:function(e,t){d(t?Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}):Object(j.a)(Object(j.a)({},o),{},{user_id:null}))},placeholder:"Rechercher ..."})}),(o.loadingCars||o.loadingUserCars)&&Object(i.jsx)(F.a,{}),!(o.loadingCars||o.loadingUserCars)&&o.user_id&&Object(i.jsx)(se.a.Item,{label:"V\xe9hicules affect\xe9",name:"carsId",children:Object(i.jsx)(xt.a,{rowKey:function(e){return e.id},showSearch:!0,dataSource:r,titles:["Tout","Affect\xe9"],targetKeys:o.cars_id,selectedKeys:h,onChange:function(e,t,a){d(Object(j.a)(Object(j.a)({},o),{},{cars_id:e}))},onSelectChange:function(e,t){O([].concat(Object(ft.a)(e),Object(ft.a)(t)))},render:function(e){return e.code_gps+" | "+e.matricule},style:{marginBottom:16},listStyle:{width:250,height:300},disabled:!1})}),Object(i.jsx)(se.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(I.a,{type:"primary",onClick:f,children:"Envoyer"})}))]}))})},exact:!0},{path:"/roles/add",name:"add-roles",label:"Ajouter role",component:function(){var e=p().api,t=Object(O.useHistory)();return Object(i.jsx)(J,{title:"Nauveau Role",children:Object(i.jsx)(Re,{formItems:De,onFinish:function(a){a.name=a.name.toUpperCase(),e.post("/roles",a).then((function(e){D.b.info("Bien ajouter"),t.push("/roles")}))}})})},exact:!0},{path:"/roles",name:"list-roles",label:"Liste des roles",component:function(){var e=p().api,t=(Object(O.useHistory)(),[{title:"designantion",dataIndex:"name",copyable:!0,filters:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(t,a,n,r){return[Object(i.jsx)("a",{onClick:function(){e.post("roles/delete/"+a.id).then((function(){D.b.info("Bien Supprim\xe9"),r.reload()}))},children:"Supprimer"})]}}]);return Object(i.jsx)(J,{title:"Roles",children:Object(i.jsx)(re.a,{size:"small",search:!0,columns:t,ellipsis:!0,request:function(t,a,i){return console.log(a),a&&(t.sortBy=Object.keys(a)[0],t.sort=Object.values(a)[0]),e.get("roles",{params:t,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/users/roles",name:"users-roles",label:"Utilisateurs <> Roles",component:function(){var e=p().api;window.api=e;var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)({user_id:null,roles_id:[],loadingRoles:!0,loadingUserRoles:!1}),s=Object(u.a)(l,2),o=s[0],d=s[1],b=Object(n.useState)([]),m=Object(u.a)(b,2),h=m[0],O=m[1];window.data=o;Object(n.useEffect)((function(){e.get("roles").then((function(e){var t=e.data,a=t.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:e.id})}));d(Object(j.a)(Object(j.a)({},t),{},{loadingRoles:!1})),c(a)}))}),[]),Object(n.useEffect)((function(){o.user_id&&(d(Object(j.a)(Object(j.a)({},o),{},{loadingUserRoles:!0})),e.get("auth/users/"+o.user_id+"/roles/").then((function(e){var t=e.data.data.map((function(e){return e.id}));d(Object(j.a)(Object(j.a)({},o),{},{roles_id:t,loadingUserRoles:!1}))})))}),[o.user_id]);var f=function(e,t,a){d(Object(j.a)(Object(j.a)({},o),{},{roles_id:e}))},x=function(e,t){O([].concat(Object(ft.a)(e),Object(ft.a)(t)))};return Object(i.jsx)(J,{title:"Affect\xe9 des vehicules au utilisateur",selectedSiderKey:"user-roles-users",children:Object(i.jsxs)(se.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:function(){o.user_id&&o.roles_id&&e.post("/auth/users/roles",{user_id:o.user_id,roles_id:o.roles_id}).then((function(e){D.b.info("Bien ajouter")}))},children:[Object(i.jsx)(se.a.Item,{label:"Utilisateur",name:"user_id",children:Object(i.jsx)(me,{url:"auth/users/search",style:{width:200},mapOptionToString:function(e){return e.firstname+" "+e.lastname},onSelect:function(e,t){d(Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}))},onChange:function(e,t){d(t?Object(j.a)(Object(j.a)({},o),{},{user_id:t.id}):Object(j.a)(Object(j.a)({},o),{},{user_id:null}))},placeholder:"Rechercher un utilisateur ..."})}),o.user_id&&(o.loadingRoles||o.loadingUserRoles?Object(i.jsx)(F.a,{}):Object(i.jsx)(se.a.Item,{label:"Roles affect\xe9",name:"rolesId",children:Object(i.jsx)(xt.a,{showSearch:!0,dataSource:r,titles:["Tout","Affect\xe9"],targetKeys:o.roles_id,selectedKeys:h,onChange:f,onSelectChange:x,render:function(e){return e.name},style:{marginBottom:16},listStyle:{minWidth:250,height:300},disabled:!1})})),Object(i.jsx)(se.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Envoyer"})}))]}))})},exact:!0}]},{name:"cars",label:"V\xe9hicules",role:"LISTE_VEHICULES",icon:Object(i.jsx)(B.b,{style:{marginRight:10}}),routes:[{path:"/cars/add",name:"add-cars",label:"Ajouter v\xe9hicule",role:"AJOUTER_VEHICULE",component:function(){var e=p().api;return Object(i.jsx)(J,{title:"Nauveau v\xe9hicule",selectedSiderKey:"add-cars",children:Object(i.jsx)(Re,{formItems:Ye,onFinish:function(t){e.post("/cars",t).then((function(e){D.b.info("Bien ajouter")}))}})})}},{path:"/cars",name:"list-cars",label:"Liste des v\xe9hicules",component:function(){var e=p(),t=e.api,a=e.user,c=Object(O.useHistory)(),l=Object(n.useState)(null),s=Object(u.a)(l,2),o=(s[0],s[1]),d=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!1},{title:"Genre",dataIndex:"genre",sorter:!0,hideInSearch:!0,filters:[{text:"V P",value:"V P"},{text:"CAMION",value:"CAMION"},{text:"TRACTEUR",value:"TRACTEUR"},{text:"REMORQUE",value:"REMORQUE"},{text:"BUS",value:"BUS"},{text:"UTILITAIRE",value:"UTILITAIRE"},{text:"MICRO BUS",value:"MICRO BUS"},{text:"V H",value:"V H"},{text:"MOTO",value:"MOTO"},{text:"AMBULANCE",value:"AMBULANCE"},{text:"MOTOCYCLE",value:"MOTOCYCLE"}]},{title:"Groupe",dataIndex:"groupName",sorter:!0,hideInSearch:!0,filters:[{text:"LEGER",value:"LEGER"},{text:"LIVRAISON MARCHANDISE",value:"LIVRAISON MARCHANDISE"},{text:"LOURD",value:"LOURD"},{text:"TRANSPORT PERSONNEL",value:"TRANSPORT PERSONNEL"}]},{title:"Marque",dataIndex:"marque",sorter:!0,hideInSearch:!0,filters:Y.map((function(e){return{text:e.label,value:e.value}}))},{title:"Odometre",dataIndex:"odometre",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"client",copyable:!0,sorter:!0,hideInSearch:!1},{title:"Conducteur",dataIndex:"drivers_fullname",copyable:!0,sorter:!0,hideInSearch:!0,render:function(e,t,a,n){return Object(i.jsx)("span",{style:{color:t.client?"rgba(0,0,0,.85)":"red"},children:t.drivers_fullname})}},{title:"Status",dataIndex:"state",sorter:!0,hideInSearch:!0,filters:K.map((function(e){return{text:e.label,value:e.value}}))},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,r,l){return[Object(i.jsx)(Ne.a,{title:"Info",children:Object(i.jsx)(Ge,{row:n})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_VEHICULE")&&Object(i.jsx)(Ne.a,{title:"Modifier v\xe9hicule",children:Object(i.jsx)(I.a,{onClick:function(){c.push("/cars/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_STATUS_VEHICULE")&&Object(i.jsx)(Ne.a,{title:"Ajouter Status",children:Object(i.jsx)(I.a,{onClick:function(){c.push("/cars/stats/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(B.h,{})})})}),Object(i.jsx)(Ne.a,{title:"Historiques des d\xe9charges",children:Object(i.jsx)(I.a,{onClick:function(){c.push("/cars/decharges/"+n.id)},shape:"circle",icon:Object(i.jsx)(Le.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_VEHICULE")&&Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{onClick:function(){t.post("/cars/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})]}}],b=r.a.useRef();return window.actionRef=b,Object(i.jsx)(J,{title:"V\xe9hicules",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:b,toolBarRender:function(e){return[Object(i.jsx)(Ne.a,{title:"Exporter fiechier EXCEL",children:Object(i.jsx)("div",{style:{cursor:"pointer",marginTop:7},children:Object(i.jsx)(we.a,{size:20,onClick:function(){t.get("/cars?format=excel",{responseType:"blob",headers:{"Content-Disposition":"attachment; filename=etat_vehicules.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","etat_vehicules_"+ne()().format("DD_MM_YYYY__HH_MM")+".xlsx"),document.body.appendChild(a),a.click()}))}})})})]},search:!0,size:"small",columns:d,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),console.log(i),e.filters=i,e.format="json",o(e),t.get("/cars",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},role:"LISTE_VEHICULES",exact:!0},{path:"/cars/groups",name:"groups-cars",label:"Groupes <> vehicules",component:function(){var e=p().api;window.api=e;var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=(a[0],a[1],Object(n.useState)({group_id:null,cars_id:[],loadingCars:!0,loadingGroupCars:!1,carGroupe:"vh"})),c=Object(u.a)(r,2),l=c[0],s=c[1],o=Object(n.useState)([]),d=Object(u.a)(o,2),b=d[0],m=d[1];window.data=l;Object(n.useEffect)((function(){l.group_id&&(s(Object(j.a)(Object(j.a)({},l),{},{loadingGroupCars:!0})),e.get("groups/cars/"+l.group_id).then((function(e){var t=e.data.data.map((function(e){return e.id}));s(Object(j.a)(Object(j.a)({},l),{},{cars_id:t,loadingGroupCars:!1}))})))}),[l.group_id]),Object(n.useEffect)((function(){e.get("allcars").then((function(e){var t=e.data,a=t.data.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{key:Number.parseInt(e.id)})}));s(Object(j.a)(Object(j.a)({},t),{},{cars:a,loadingCars:!1}))}))}),[l.carGroupe]);var h=function(e,t,a){s(Object(j.a)(Object(j.a)({},l),{},{cars_id:e}))},O=function(e,t){m([].concat(Object(ft.a)(e),Object(ft.a)(t)))};return Object(i.jsx)(J,{title:"Affect\xe9 des vehicules au groupe",selectedSiderKey:"group-cars",children:Object(i.jsxs)(se.a,Object(j.a)(Object(j.a)({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}}}),{},{name:"basic",layout:"vertical",onFinish:function(t){console.log(t),e.post("/groups/cars/"+l.group_id,l).then((function(e){D.b.info("Bien ajouter")}))},children:[Object(i.jsx)(se.a.Item,{label:"Groupe",name:"group_id",children:Object(i.jsx)(me,{url:"groups/search",style:{width:200},mapOptionToString:function(e){return e.name},onSelect:function(e,t){s(Object(j.a)(Object(j.a)({},l),{},{group_id:t.id}))},onChange:function(e,t){s(t?Object(j.a)(Object(j.a)({},l),{},{group_id:t.id}):Object(j.a)(Object(j.a)({},l),{},{group_id:null}))},placeholder:"Rechercher ..."})}),l.group_id&&(l.loadingCars||l.loadingGroupCars?Object(i.jsx)(F.a,{}):Object(i.jsx)(se.a.Item,{label:"V\xe9hicules affect\xe9",name:"carsId",children:Object(i.jsx)(xt.a,{showSearch:!0,dataSource:l.cars,titles:["Tout","Affect\xe9"],targetKeys:l.cars_id,selectedKeys:b,onChange:h,onSelectChange:O,render:function(e){return e.code_gps+" | "+e.matricule},style:{marginBottom:16},listStyle:{width:250,height:300},disabled:!1})})),Object(i.jsx)(se.a.Item,Object(j.a)(Object(j.a)({},{}),{},{children:Object(i.jsx)(I.a,{type:"primary",htmlType:"submit",children:"Envoyer"})}))]}))})},role:"VEHICULES_GROUPES"},{path:"/cars_state",name:"status-cars",label:"v\xe9hicules > Status",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=[{title:"matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"code_gps",dataIndex:"code_gps",sorter:!0,hideInSearch:!1},{title:"Designation",dataIndex:"name",hideInSearch:!0,sorter:!0},{title:"Observation",dataIndex:"observation",hideInSearch:!0,sorter:!0},{title:"Date status",dataIndex:"state_date",hideInSearch:!0,sorter:!0},{title:"Cree par",dataIndex:"createdby",hideInSearch:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/cars_state/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_STATUS_VEHICULE")&&Object(i.jsx)(Ne.a,{title:"Modifier status v\xe9hicule",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/cars_state/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})})]}}],l=n.useRef();return window.actionRef=l,Object(i.jsx)(J,{title:"Status des v\xe9hicules",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:l,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/cars_state",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},role:"STATUS_VEHICULES",exact:!0},{path:"/cars_state/add",name:"add-status-cars",label:"Ajouter status",role:"MODIFIER_STATUS_VEHICULE",component:function(){var e=p().api,t=Object(O.useHistory)();return Object(i.jsx)(J,{title:"Changement statut de v\xe9hicule",children:Object(i.jsx)(Re,{formItems:ze,onFinish:function(a){a.state_date=a.state_date?a.state_date.format("YYYY-MM-DD HH:mm:ss"):null,e.post("/cars_state",a).then((function(e){D.b.info("Bien ajouter"),t.push("/cars_state")}))}})})},exact:!0},{path:"/cars_state/edit/:id",name:"edit-status-cars",label:"Modifier status d'une v\xe9hicule",role:"MODIFIER_STATUS_VEHICULE",component:function(){var e=p().api,t=(Object(O.useHistory)(),Object(O.useRouteMatch)().params),a=Object(n.useState)({}),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),d=o[0],j=o[1],m=Object(n.useState)(!0),h=Object(u.a)(m,2),f=h[0],x=h[1];return Object(n.useEffect)((function(){e.get("/cars_state/"+t.id).then((function(e){l(e.data.data),x(!1)}))}),[]),f||!c?Object(i.jsx)("div",{style:{height:200,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})}):Object(i.jsx)(J,{withBack:!0,title:"Modifier statut de v\xe9hicule",children:Object(i.jsx)(Re,{initialValues:{car_id:null===c||void 0===c?void 0:c.car_id,car:null===c||void 0===c?void 0:c.car,state_date:ie(null===c||void 0===c?void 0:c.state_date),name:null===c||void 0===c?void 0:c.name,observation:null===c||void 0===c?void 0:c.observation},formItems:[{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:z}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)},disabled:!0},{name:"name",label:"Designation",type:"select",rules:[{required:!0,message:z}],selects:K},{name:"state_date",label:"Date",type:"date",rules:[{required:!0,message:z}]},{name:"observation",label:"Observation",type:"textarea"}],onFinish:function(a){j(!0),a.state_date=a.state_date?a.state_date.format("YYYY-MM-DD HH:mm:ss"):null,e.put("/cars_state/"+t.id,a).then((function(e){D.b.info("Bien modifier"),j(!1)}))},loading:d})})},hideInSide:!0},{path:"/cars/stats/edit/:id",name:"edit-car-state",label:"Modifier Status v\xe9hicule",role:"MODIFIER_STATUS_VEHICULE",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(O.useHistory)();return Object(n.useEffect)((function(){t.get("/cars/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Ajouter Status : "+d.matricule,selectedSiderKey:"list-cars",children:Object(i.jsx)(Re,{formItems:[{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:z}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)},disabled:!0},{name:"name",label:"Designation",type:"select",rules:[{required:!0,message:z}],selects:K},{name:"state_date",label:"Date",type:"date",rules:[{required:!0,message:z}]},{name:"observation",label:"Observation",type:"textarea"}],initialValues:{car_id:d.id,car:d},onFinish:function(e){l(!0),e.state_date=e.state_date?e.state_date.format("YYYY-MM-DD HH:mm:ss"):null,t.post("/cars_state",e).then((function(e){j.push("/cars_state"),D.b.info("Bien ajouter")})).catch((function(){l(!1)}))}})})},hideInSide:!0},{path:"/cars/edit/:id",name:"edit-cars",label:"Modifier v\xe9hicule",role:"MODIFIER_VEHICULE",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1];return Object(n.useEffect)((function(){t.get("/cars/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie v\xe9hicule : "+d.matricule,selectedSiderKey:"list-cars",children:Object(i.jsx)(Re,{formItems:Ye,initialValues:d,onFinish:function(a){t.put("/cars/"+e.id,a).then((function(e){D.b.info("Bien modifier")}))}})})},hideInSide:!0},{path:"/cars/decharges/:car_id",name:"decharges-car",label:"Decharge",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(Xe.useRouteMatch)().params.car_id,r=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Restitution",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,a,n,r){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){t.push("/decharges/show/"+a.id)},shape:"circle",icon:Object(i.jsx)(bt.a,{})})})]}}],c=n.useRef();return Object(i.jsx)(J,{withBack:!0,title:"D\xe9charges",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:r,ellipsis:!0,request:function(t,i,n){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),n&&(t.filterBy=Object.keys(n)[0],t.filter=Object.values(n)),e.get("/cars/decharges/"+a,{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},hideInSide:!0}]},{name:"peremptions",label:"P\xe9remptions",icon:Object(i.jsx)(B.a,{style:{marginRight:10}}),role:"LISTE_PEREMPTIONS",routes:[{path:"/peremptions/add",name:"add-peremption",label:"Ajouter p\xe9remption",role:"AJOUTER_PEREMPTIONS",component:function(){var e=p().api,t=Object(O.useHistory)();return Object(i.jsx)(J,{title:"Nauveau client(Structure)",selectedSiderKey:"add-clients",children:Object(i.jsx)(Re,{formItems:It,onFinish:function(a){e.post("/clients",a).then((function(e){D.b.info("Bien ajouter"),t.push("/clients")}))}})})}},{path:"/peremptions/",name:"list-peremptions",label:"Liste p\xe9remptions",role:"LISTE_PEREMPTIONS",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=[{title:"Code (SAP)",dataIndex:"code",copyable:!0,sorter:!0},{title:"Designation",dataIndex:"designation",sorter:!0},{title:"Localit\xe9",dataIndex:"localite",sorter:!0,hideInSearch:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Client Hierachique",dataIndex:["client","designation"],sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_CLIENT")&&Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{onClick:function(){t.post("/clients/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_CLIENT")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/clients/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})})]}}],l=n.useRef();return window.actionRef=l,Object(i.jsx)(J,{title:"Clients",selectedSiderKey:"list-clients",children:Object(i.jsx)(re.a,{actionRef:l,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return console.log(a),a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),t.get("/clients",{params:e,sort:a}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})}},{path:"/peremptions/edit/:id",name:"edit-peremption",label:"Modifier p\xe9remption",role:"MODIFIER_PEREMPTIONS",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(Xe.useHistory)();return Object(n.useEffect)((function(){t.get("/clients/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie client",selectedSiderKey:"list-clients",children:Object(i.jsx)(Re,{formItems:It,initialValues:d,onFinish:function(a){t.put("/clients/"+e.id,a).then((function(e){D.b.info("Bien modifier"),j.push("/clients")}))}})})},hideInSide:!0}]},{name:"drivers",label:"Conducteurs",icon:Object(i.jsx)(q.c,{style:{marginRight:10}}),role:"LISTE_CONDUCTEURS",routes:[{path:"/drivers/add",name:"add-driver",label:"Ajouter conducteur",role:"AJOUTER_CONDUCTEUR",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(n.useState)(!1),r=Object(u.a)(a,2),c=r[0],l=r[1];return Object(i.jsx)(J,{title:"Nauveau conducteur",selectedSiderKey:"add-drivers",children:Object(i.jsx)(Re,{loading:c,formItems:Je,onFinish:function(a){l(!0),e.post("/drivers",a).then((function(e){D.b.info("Bien ajouter"),t.push("/drivers")})).catch((function(){l(!1)}))}})})}},{path:"/drivers",name:"list-drivers",label:"Liste des conducteurs",role:"LISTE_CONDUCTEURS",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=[{title:"Nom",dataIndex:"firstname",sorter:!0},{title:"Pr\xe9nom",dataIndex:"lastname",sorter:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Code paie",dataIndex:"code_paie",hideInSearch:!0,sorter:!0},{title:"Type",dataIndex:"type",sorter:!0,hideInSearch:!0},{title:"Date Cre\xe9ation",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[,Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_CONDUCTEUR")&&Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/drivers/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_CONDUCTEUR")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/drivers/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})})]}}],l=n.useRef();return window.actionRef=l,Object(i.jsx)(J,{title:"Conducteurs",selectedSiderKey:"list-drivers",children:Object(i.jsx)(re.a,{actionRef:l,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/drivers",{params:e}).then((function(e){return e.data.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/drivers/edit/:id",name:"edit-driver",label:"Modifier conducteur",role:"MODIFIER_CONDUCTEUR",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(O.useHistory)();return Object(n.useEffect)((function(){t.get("/drivers/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie conducteur",selectedSiderKey:"list-drivers",children:Object(i.jsx)(Re,{formItems:Je,initialValues:d,onFinish:function(a){t.put("/drivers/"+e.id,a).then((function(e){D.b.info("Bien modifier"),j.push("/drivers")}))}})})},hideInSide:!0}]},{name:"clients",label:"Clients",icon:Object(i.jsx)(B.l,{style:{marginRight:10}}),role:"LISTE_CLIENTS",routes:[{path:"/clients/add",name:"add-client",label:"Ajouter client",role:"AJOUTER_CLIENT",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(n.useState)(!1),r=Object(u.a)(a,2),c=r[0],l=r[1];return Object(i.jsx)(J,{title:"Nauveau client(Structure)",selectedSiderKey:"add-clients",children:Object(i.jsx)(Re,{loading:c,formItems:We,onFinish:function(a){l(!0),e.post("/clients",a).then((function(e){D.b.info("Bien ajouter"),t.push("/clients")})).catch((function(){l(!1)}))}})})}},{path:"/clients",name:"list-clients",label:"Liste des clients",role:"LISTE_CLIENTS",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=[{title:"Code (SAP)",dataIndex:"code",copyable:!0,hideInSearch:!0,sorter:!0},{title:"Designation",dataIndex:"designation",sorter:!0},{title:"Localit\xe9",dataIndex:"localite",sorter:!0,hideInSearch:!0},{title:"TEL",dataIndex:"tel",sorter:!0,hideInSearch:!0,copyable:!0},{title:"Client Hierachique",dataIndex:["client_h_designation"],sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_CLIENT")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/clients/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_CLIENT")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/clients/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})})]}}],l=n.useRef();return window.actionRef=l,Object(i.jsx)(J,{title:"Clients",selectedSiderKey:"list-clients",children:Object(i.jsx)(re.a,{actionRef:l,size:"small",search:!0,columns:c,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/clients",{params:e}).then((function(e){return e.data.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/mise_disposition_vl",name:"list-mise-a-disposition-vl",label:"Mise \xe0 disposition VL",role:"LISTE_MISE_DISPOSITION_VL",component:function(){var e=p(),t=e.api,a=(e.user,Object(O.useHistory)()),r=n.useRef(),c=n.useState(ne()().startOf("month")),l=Object(u.a)(c,2),s=l[0],o=l[1],d=n.useState(ne()()),b=Object(u.a)(d,2),j=b[0],m=b[1],h=[{title:"Matricule",dataIndex:"cars_matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"cars_code_gps",sorter:!0,hideInSearch:!1},{title:"Client",dataIndex:"clients_designation",copyable:!0,sorter:!0,hideInSearch:!1,render:function(e,t,a,i){return t.clients_mother_designation?t.clients_designation+" / "+t.clients_mother_designation:t.clients_designation}},{title:"Date D\xe9charge",dataIndex:"decharges_date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"decharges_date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Date restitution",dataIndex:"restititions_date_restitition",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"createdby_username",sorter:!0,hideInSearch:!0},{title:"Valider par",dataIndex:"acceptedby_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,t,n,r){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){a.push("/decharges/show/"+t.id)},shape:"circle",icon:Object(i.jsx)(bt.a,{})})})]}}];return Object(i.jsx)(J,{title:"Mise \xe0 disposition VL",children:Object(i.jsx)(re.a,{actionRef:r,size:"small",search:!0,columns:h,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),e.date1=s?s.format("yy-M-D"):ne()().format("yy-M-D"),e.date2=j?j.format("yy-M-D"):ne()().format("yy-M-D"),e.format="json",t.get("/mise_disposition_vl",{params:e}).then((function(e){return e.data}))},toolBarRender:function(e){return[Object(i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:[Object(i.jsx)(ue.a,{placeholder:"date1",format:"DD/MM/YYYY",onChange:function(t){o(t),e.reload()},value:s,style:{width:"100%"}}),Object(i.jsx)(ue.a,{placeholder:"date2",format:"DD/MM/YYYY",onChange:function(t){m(t),e.reload()},value:j,style:{width:"100%"}})]}),Object(i.jsx)("div",{style:{cursor:"pointer",marginTop:7},children:Object(i.jsx)(we.a,{size:20,onClick:function(){var e=s?s.format("yy-M-D"):ne()().format("yy-M-D"),a=j?j.format("yy-M-D"):ne()().format("yy-M-D");t.get("/mise_disposition_vl?format=excel&date1=".concat(e,"&date2=").concat(a),{responseType:"blob",headers:{"Content-Disposition":"attachment; filename=etat_vehicules.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","etat_vehicules_"+ne()().format("DD_MM_YYYY__HH_MM")+".xlsx"),document.body.appendChild(a),a.click()}))}})})]},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/clients/edit/:id",name:"edit-client",label:"Modifier client",role:"MODIFIER_CLIENT",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],j=Object(Xe.useHistory)();return Object(n.useEffect)((function(){t.get("/clients/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie client",selectedSiderKey:"list-clients",children:Object(i.jsx)(Re,{formItems:We,initialValues:d,onFinish:function(a){t.put("/clients/"+e.id,a).then((function(e){D.b.info("Bien modifier"),j.push("/clients")}))}})})},hideInSide:!0}]},{name:"decharges",label:"Decharges",icon:Object(i.jsx)(B.f,{style:{marginRight:10}}),role:"LISTE_DECHARGES",routes:[{path:"/decharges/add",name:"add-decharge",label:"Ajouter decharge",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(n.useState)({step:0}),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),d=o[0],b=o[1],m=Object(n.useRef)(null);Object(dt.useReactToPrint)({content:function(){return m.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(J,{title:"Nauveau decharge",children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(i.jsxs)(et.a,{current:c.step,children:[Object(i.jsx)(ut,{title:"Affectation client",description:""}),Object(i.jsx)(ut,{title:"Checklist Conducteur",description:""})]}),Object(i.jsx)("div",{children:Object(i.jsx)("hr",{})}),Object(i.jsxs)("div",{style:{flex:1},children:[0===c.step&&Object(i.jsx)(Re,{formItems:tt,initialValues:{date_decharge:ie()},onFinish:function(e){e.date_decharge=e.date_decharge?e.date_decharge.format("yy-M-D"):ie().format("yy-M-D"),e.date_fin_prestation=e.date_fin_prestation?e.date_fin_prestation.format("yy-M-D"):null,l(Object(j.a)(Object(j.a)({},c),{},{data:Object(j.a)(Object(j.a)({},c.data),e),step:1}))}}),1===c.step&&Object(i.jsx)(Re,{loading:d,formItems:[{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<ie(c.data.date_decharge)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:z}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:z}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:z}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"assurance_marchandises",label:"Assurance marchandises",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],onFinish:function(a){a.date_checklist=a.date_checklist?a.date_checklist.format("yy-M-D"):ie().format("yy-M-D");var i=Object(j.a)(Object(j.a)({},c.data),a);b(!0),e.post("/decharges",i).then((function(e){D.b.info("Bien ajouter"),t.push("/decharges/show/"+e.data.data.id)})).catch((function(){b(!1)}))},initialValues:{date_checklist:ie(c.data.date_decharge),assurance:!1,assurance_marchandises:!1,boite_pharm:!1,carnet_enter:!1,carte_gpl:!1,carte_grise:!1,cle_roue:!1,cle_vehicule:1,cric:!1,extincteur:!1,gillet:!1,niveau_carburant:0,odometre:0,permis_circuler:!1,pochette_cle:!1,poste_radio:!1,roue_secour:!1,scanner:!1,starts:5,triangle:!1,vignette:!1}})]})]}),","]})},role:"AJOUTER_DECHARGE"},{path:"/decharges",name:"list-decharges",label:"Etat d\xe9charges",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=n.useRef();window.actionRef=c;var l=[{title:"Matricule",dataIndex:"cars_matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!1},{title:"Client",dataIndex:"clients_designation",copyable:!0,sorter:!0,hideInSearch:!1,render:function(e,t,a,i){return t.clients_mother_designation?t.clients_designation+" / "+t.clients_mother_designation:t.clients_designation}},{title:"Conducteur",dataIndex:"drivers_fullname",sorter:!0,copyable:!0,hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"createdby_username",sorter:!0,hideInSearch:!0},{title:"Valider par",dataIndex:"acceptedby_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,l,s){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/decharges/show/"+n.id)},shape:"circle",icon:Object(i.jsx)(bt.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"VALIDER_DECHARGE")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir valider?",onConfirm:function(){t.post("/decharges/accepte/"+n.id).then((function(){D.b.success("Decharge valid\xe9e!"),c.current.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",disabled:n.acceptedby_username,children:Object(i.jsx)(Ne.a,{title:"Valider",children:Object(i.jsx)(I.a,{disabled:n.acceptedby_username,shape:"circle",icon:Object(i.jsx)(B.e,{})})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_DECHARGE")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/decharges/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"DECHARGE_CHANGER_CONDUCTEUR")&&Object(i.jsx)(Ne.a,{title:"Change conducteur",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/decharges/checklist/"+n.id)},shape:"circle",icon:Object(i.jsx)(B.k,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"RESTITUER_DECHARGE")&&Object(i.jsx)(Ne.a,{title:"Restitution",children:Object(i.jsx)(I.a,{disabled:n["restititions.id"],onClick:function(){r.push("/decharges/restitition/"+n.id)},shape:"circle",icon:Object(i.jsx)(jt.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_DECHARGE")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/decharges/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),s.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})]}}];return Object(i.jsx)(J,{title:"D\xe9charges",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:l,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),t.get("/decharges",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},exact:!0},{path:"/decharges/show/:id",name:"show-decharge",label:"Affiche decharge",component:function(){var e,t,a=p().api,r=Object(O.useRouteMatch)().params,c=Object(Xe.useHistory)(),l=Object(n.useState)({step:0}),s=Object(u.a)(l,2),o=s[0],d=s[1];window.allData=o,Object(n.useEffect)((function(){a.get("decharges/"+r.id).then((function(e){d(Object(j.a)(Object(j.a)({},o),{},{decharge:e.data.data}))}))}),[r]);var b=Object(n.useRef)(null),m=(Object(dt.useReactToPrint)({content:function(){return b.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Object(n.useRef)(null));Object(dt.useReactToPrint)({content:function(){return m.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsxs)(J,{withBack:!0,loading:!o.decharge,title:"Affiche decharge n\xb0 "+r.id,children:[(null===o||void 0===o||null===(e=o.decharge)||void 0===e?void 0:e.restitition)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(g.a,{orientation:"left",children:Object(i.jsx)("h1",{children:Object(i.jsx)("b",{children:"Restitution (Decharge)"})})}),Object(i.jsx)(Ot,{component:Object(i.jsx)(ht,{ref:m,decharge:null===o||void 0===o?void 0:o.decharge}),disabledDelete:!0})]}),null===o||void 0===o||null===(t=o.decharge)||void 0===t?void 0:t.checklists.reverse().map((function(e,t){var n;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(g.a,{orientation:"left",children:Object(i.jsxs)("h1",{children:[Object(i.jsx)("b",{children:"Chcklist Le:"})," ",e.date_checklist,":"]})}),Object(i.jsx)(Ot,{component:Object(i.jsx)(st,{checklist:Object(j.a)(Object(j.a)(Object(j.a)({},null===o||void 0===o?void 0:o.decharge),e),{},{"drivers.firstname":e.driver.firstname,"drivers.lastname":e.driver.lastname})}),onDelete:function(){a.post("decharges/checklist/delete/"+e.id).then((function(){c.push("/decharges"),D.b.info("Checklist est supprimer")}))},disabledDelete:t===(null===o||void 0===o||null===(n=o.decharge)||void 0===n?void 0:n.checklists.length)-1})]})}))]})},hideInSide:!0},{path:"/decharges/edit/:id",name:"edit-decharge",label:"Modifier d\xe9charge",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(n.useState)({step:0}),r=Object(u.a)(a,2),c=r[0],l=(r[1],Object(n.useState)(!1)),s=Object(u.a)(l,2),o=s[0],d=s[1],j=Object(O.useRouteMatch)().params,m=Object(n.useState)(null),h=Object(u.a)(m,2),f=h[0],x=h[1],v=Object(n.useState)(!0),g=Object(u.a)(v,2),y=g[0],_=g[1];Object(n.useEffect)((function(){e.get("/decharges/"+j.id).then((function(e){console.log(e.data),x(e.data.data),_(!1)}))}),[]);var I=Object(n.useRef)(null);Object(dt.useReactToPrint)({content:function(){return I.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return y||!f?Object(i.jsx)(J,{title:"Chargement ...",withBack:!0,children:Object(i.jsx)("div",{style:{marginTop:40,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})})}):Object(i.jsx)(J,{withBack:!0,title:"Modifier D\xe9charge N\xb0("+j.id+") | V\xe9hicule: "+f["cars.matricule"],children:Object(i.jsx)(Re,{loading:o,formItems:[{name:"client_id",label:"Client",type:"search",rules:[{required:!0,message:z}],url:"clients/search",defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"car_id",label:"V\xe9hicule",type:"search",rules:[{required:!0,message:z}],url:"cars/search",defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"date_decharge",label:"Date d\xe9charge",rules:[{required:!0,message:z}],type:"date"},{name:"date_fin_prestation",label:"Date fin prestation",type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_decharge")}},{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<ie(c.data.date_decharge)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:z}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:z}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:z}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},,{name:"assurance_marchandises",label:"Assurance marchandises",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"observation",type:"textarea"}],onFinish:function(a){d(!0),a.date_decharge=a.date_decharge?a.date_decharge.format("yy-M-D"):ie().format("yy-M-D"),a.date_fin_prestation=a.date_fin_prestation?a.date_fin_prestation.format("yy-M-D"):null,a.date_checklist=a.date_checklist?a.date_checklist.format("yy-M-D"):ie().format("yy-M-D"),e.put("/decharges/"+j.id,a).then((function(e){D.b.info("Bien modifier"),t.push("/decharges/")})).catch((function(){d(!1)}))},initialValues:{client_id:f.client_id,client:f.client,car_id:f.car_id,car:f.car,driver_id:f.driver_id,driver:f.driver,date_decharge:ie(f["decharges.date_decharge"]),date_checklist:ie(f.date_checklist),assurance:f.assurance,assurance_marchandises:f.assurance_marchandises,boite_pharm:f.boite_pharm,carnet_enter:f.carnet_enter,carte_gpl:f.carte_gpl,carte_grise:f.carte_grise,cle_roue:f.cle_roue,cle_vehicule:f.cle_vehicule,cric:f.cric,extincteur:f.extincteur,gillet:f.gillet,niveau_carburant:f.niveau_carburant,odometre:f.odometre,permis_circuler:f.permis_circuler,pochette_cle:f.pochette_cle,poste_radio:f.poste_radio,roue_secour:f.roue_secour,scanner:f.scanner,starts:f.starts,triangle:f.triangle,vignette:f.vignette,observation_checklist:f.observation_checklist}})})},hideInSide:!0},{path:"/decharges/restitition/:id",name:"restitition-decharge",label:"Restitution decharge",component:function(){var e=p().api,t=Object(O.useRouteMatch)().params,a=Object(Xe.useHistory)(),r=Object(n.useState)({decharge:null}),c=Object(u.a)(r,2),l=c[0],s=c[1];window.allData=l,Object(n.useEffect)((function(){e.get("decharges/"+t.id).then((function(e){var t={id:e.data.data["drivers.id"],firstname:e.data.data["drivers.firstname"],lastname:e.data.data["drivers.lastname"]};s(Object(j.a)(Object(j.a)({},l),{},{decharge:e.data.data,driver:t}))}))}),[]);return Object(i.jsxs)(J,{withBack:!0,loading:!l.decharge,title:"Restitition (D\xe9charge)",children:[Object(i.jsxs)(Z.a,{title:"Decharge N\xb0 ".concat(l.decharge&&l.decharge["decharges.id"],", Le ").concat(l.decharge&&ie(l.decharge["decharges.date_decharge"]).format("DD-MM-Y")),extra:Object(i.jsx)(f.b,{to:"/decharges/show/".concat(l.decharge&&l.decharge["decharges.id"]),children:"Plus d'info"}),children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Client:"})," ",l.decharge&&l.decharge["clients.designation"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Marque v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.marque"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Matricule v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.matricule"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",l.decharge&&l.decharge["cars.code_gps"]]})]}),Object(i.jsx)(g.a,{orientation:"left",children:Object(i.jsx)("h1",{children:"Chcklist de restitition:"})}),l.decharge&&Object(i.jsx)(Re,{formItems:at,onFinish:function(i){i.car_id=l.decharge["cars.id"],i.decharge_id=l.decharge["decharges.id"],i.date_restitition=i.date_restitition?i.date_restitition.format("yy-M-D"):ie().format("yy-M-D"),i.date_checklist=i.date_restitition,e.post("decharges/restitition/"+t.id,i).then((function(e){D.b.success("Bien Ajouter"),a.push("/decharges/show/"+t.id)}))},initialValues:{driver:l.driver,driver_id:l.driver&&l.driver.id,odometre:(null===l||void 0===l?void 0:l.decharge)&&l.decharge.odometre,date_restitition:ie(),assurance:l.decharge.assurance,assurance_marchandises:l.decharge.assurance_marchandises,boite_pharm:l.decharge.boite_pharm,carnet_enter:l.decharge.carnet_enter,carte_gpl:l.decharge.carte_gpl,carte_grise:l.decharge.carte_grise,cle_roue:l.decharge.cle_roue,cle_vehicule:l.decharge.cle_vehicule,cric:l.decharge.cric,extincteur:l.decharge.extincteur,gillet:l.decharge.gillet,niveau_carburant:l.decharge.niveau_carburant,permis_circuler:l.decharge.permis_circuler,pochette_cle:l.decharge.pochette_cle,poste_radio:l.decharge.poste_radio,roue_secour:l.decharge.roue_secour,scanner:l.decharge.scanner,starts:l.decharge.starts,triangle:l.decharge.triangle,vignette:l.decharge.vignette}})]})},hideInSide:!0},{path:"/decharges/restititions",name:"restititions-decharge",label:"D\xe9charges restituer",role:"LISTE_DECHARGES_RESTITUER",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=Object(Xe.useRouteMatch)(),l=[{title:"Matricule",dataIndex:"cars_matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!1},{title:"Client",dataIndex:"clients_designation",copyable:!0,sorter:!0,hideInSearch:!1,render:function(e,t,a,i){return t.clients_mother_designation?t.clients_designation+" / "+t.clients_mother_designation:t.clients_designation}},{title:"Conducteur",copyable:!0,dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Date Restitution",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,c,l){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){console.log(n),r.push("/decharges/show/"+n.id)},shape:"circle",icon:Object(i.jsx)(bt.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_DECHARGE_RESTIUER")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/decharges/restititions/delete/"+n["restititions.id"]).then((function(){D.b.info("Bien Supprim\xe9"),l.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})]}}],s=n.useRef();return Object(i.jsx)(J,{title:"D\xe9charges Restituer",children:Object(i.jsx)(re.a,{actionRef:s,size:"small",search:!0,columns:l,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),console.log(c),t.get("/decharges/restititions/",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})}},{path:"/decharges/history/:car_id",name:"history-decharge",label:"History decharge",component:function(){var e=p().api,t=Object(O.useHistory)(),a=Object(Xe.useRouteMatch)(),r=[{title:"Matricule",dataIndex:"matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"code_gps",sorter:!0,hideInSearch:!0},{title:"Client",dataIndex:"clients.designation",sorter:!0,hideInSearch:!0},{title:"Conducteur",dataIndex:"drivers_fullname",hideInSearch:!0},{title:"Date D\xe9charge",dataIndex:"date_decharge",sorter:!0,hideInSearch:!0},{title:"Date Fin Prestation",dataIndex:"date_fin_prestation",sorter:!0,hideInSearch:!0},{title:"Date Restitition",dataIndex:"restititions.date_restitition",sorter:!0,hideInSearch:!0},{title:"Cree par",dataIndex:"username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,a,n,r){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){t.push("/decharges/show/"+a.id)},shape:"circle",icon:Object(i.jsx)(bt.a,{})})}),Object(i.jsx)(Ne.a,{title:"Supprimer",children:Object(i.jsx)(I.a,{onClick:function(){},shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})]}}],c=n.useRef();return Object(i.jsx)(J,{withBack:!0,title:"Historique CheckList",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:r,ellipsis:!0,request:function(t,i,n){return i&&(t.sortBy=Object.keys(i)[0],t.sort=Object.values(i)[0]),n&&(t.filterBy=Object.keys(n)[0],t.filter=Object.values(n)),e.get("/decharges/history/"+a.params.car_id,{params:t}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10}})})},hideInSide:!0},{path:"/decharges/checklist/:id",name:"add-checklist-decharge",label:"Checklist decharge",component:function(){var e=p().api,t=Object(O.useRouteMatch)().params,a=Object(Xe.useHistory)(),r=Object(n.useState)({decharge:null}),c=Object(u.a)(r,2),l=c[0],s=c[1];window.allData=l,Object(n.useEffect)((function(){e.get("decharges/"+t.id).then((function(e){s(Object(j.a)(Object(j.a)({},l),{},{decharge:e.data.data}))}))}),[]);return Object(i.jsxs)(J,{withBack:!0,loading:!l.decharge,title:"Changement de conducteur",children:[Object(i.jsxs)(Z.a,{title:"Decharge N\xb0 ".concat(l.decharge&&l.decharge["decharges.id"],", Le ").concat(l.decharge&&ie(l.decharge["decharges.date_decharge"]).format("DD-MM-Y")),extra:Object(i.jsx)(f.b,{to:"/decharges/show/".concat(l.decharge&&l.decharge["decharges.id"]),children:"Plus d'info"}),children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Client:"})," ",l.decharge&&l.decharge["clients.designation"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Marque v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.marque"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Matricule v\xe9hicule:"})," ",l.decharge&&l.decharge["cars.matricule"]]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Code GPS:"})," ",l.decharge&&l.decharge["cars.code_gps"]]})]}),Object(i.jsx)(g.a,{orientation:"left",children:Object(i.jsx)("h1",{children:"Chcklist:"})}),l.decharge&&Object(i.jsx)(Re,{formItems:[{name:"date_checklist",label:"Date checklist",type:"date",disabledDate:function(e,t){return e&&e<ie(l.decharge.checklists[0].date_checklist)}},{name:"driver_id",label:"Conducteur",type:"search",rules:[{required:!0,message:z}],url:"drivers/search",defaultOptionName:"driver",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+e.lastname}},{name:"niveau_carburant",label:"Niveau carburant",rules:[{required:!0,message:z}],type:"progress"},{name:"odometre",label:"Odometre",rules:[{required:!0,message:z}],type:"integer",inputProp:{suffix:"KM"}},{name:"starts",label:"Etat de v\xe9hicule",type:"rate"},{name:"cle_vehicule",label:"Nbs cl\xe9s v\xe9hicule",type:"integer",inputProp:{suffix:"Cl\xe9(s)"}},{name:"carte_grise",label:"Carte grise",type:"checkbox"},{name:"assurance",label:"Assurance",type:"checkbox"},{name:"assurance_marchandises",label:"Assurance marchandises",type:"checkbox"},{name:"scanner",label:"Scanner",type:"checkbox"},{name:"permis_circuler",label:"Permis circuler",type:"checkbox"},{name:"carnet_enter",label:"Carnet entretien",type:"checkbox"},{name:"vignette",label:"Vignette",type:"checkbox"},{name:"carte_gpl",label:"Carte GPL",type:"checkbox"},{name:"gillet",label:"Gillet",type:"checkbox"},{name:"roue_secour",label:"Roue secour",type:"checkbox"},{name:"cric",label:"Cric",type:"checkbox"},{name:"cle_roue",label:"Cle roue",type:"checkbox"},{name:"poste_radio",label:"Poste radio",type:"checkbox"},{name:"extincteur",label:"Extincteur",type:"checkbox"},{name:"boite_pharm",label:"Boite pharmacie",type:"checkbox"},{name:"triangle",label:"Triangle de pr\xe9signalisation",type:"checkbox"},{name:"pochette_cle",label:"Pochette des cl\xe9s",type:"checkbox"},{name:"observation_checklist",label:"Observation",type:"textarea"}],onFinish:function(i){i.car_id=l.decharge["cars.id"],i.decharge_id=l.decharge["decharges.id"],i.date_checklist=i.date_checklist?i.date_checklist.format("yy-M-D"):ie().format("yy-M-D"),e.post("decharges/checklist/"+t.id,i).then((function(e){D.b.success("Bien Ajouter"),a.push("/decharges/show/"+t.id)}))},initialValues:{odometre:l.decharge.odometre,assurance:l.decharge.assurance,assurance_marchandises:l.decharge.assurance_marchandises,boite_pharm:l.decharge.boite_pharm,carnet_enter:l.decharge.carnet_enter,carte_gpl:l.decharge.carte_gpl,carte_grise:l.decharge.carte_grise,cle_roue:l.decharge.cle_roue,cle_vehicule:l.decharge.cle_vehicule,cric:l.decharge.cric,extincteur:l.decharge.extincteur,gillet:l.decharge.gillet,niveau_carburant:l.decharge.niveau_carburant,permis_circuler:l.decharge.permis_circuler,pochette_cle:l.decharge.pochette_cle,poste_radio:l.decharge.poste_radio,roue_secour:l.decharge.roue_secour,scanner:l.decharge.scanner,starts:l.decharge.starts,triangle:l.decharge.triangle,vignette:l.decharge.vignette}})]})},hideInSide:!0}]},{name:"missions",label:"Missions",role:"LISTE_MISSIONS",icon:Object(i.jsx)(q.b,{style:{marginRight:10}}),routes:[{path:"/missions_vl/add",name:"add-mission-vl",label:"Ajouter mission VL",role:"AJOUTER_MISSION_VL",component:function(){var e=p(),t=e.api;e.user;window.api=t;var a=Object(O.useHistory)();return Object(i.jsx)(J,{title:"Nouvelle mission VL",children:Object(i.jsx)(Re,{formItems:[{name:"numero",label:"Numero bon commande",type:"text"},{name:"date_bon_mission",label:"Date d'effet(Bon commande)",rules:[{required:!0,message:z}],type:"date"},{name:"car_id",label:"V\xe9hicule",type:"search",url:"cars/search",rules:[{required:!0,message:z}],defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"client_id",label:"Client",type:"search",url:"clients/search",rules:[{required:!0,message:z}],defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"depart_id",label:"D\xe9part",type:"search",url:"cities/search",rules:[{required:!0,message:z}],defaultOptionName:"depart",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.wilaya_name)+" - "+(null===e||void 0===e?void 0:e.daira_name)+" - "+(null===e||void 0===e?void 0:e.commune_name)}},{name:"destinations",label:"Destination",type:"text",rules:[{required:!0,message:z}]},{name:"driver1_id",label:"Conducteur 1",type:"search",url:"drivers/search",rules:[{required:!0,message:z}],defaultOptionName:"driver1",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"driver2_id",label:"Conducteur 2",type:"search",url:"drivers/search",defaultOptionName:"driver2",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"date_depart_mission",label:"Date depart",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_bon_mission")}},{name:"date_arrivee_mission",label:"Date arriv\xe9e",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_depart_mission")}},{name:"Observation",label:"observation",type:"textarea"}],initialValues:{date_bon_mission:ie(),date_depart_mission:ie(),depart_id:1158,depart:{id:1158,wilaya_name:"Bordj Bou Arreridj",daira_name:"Bordj Bou Arreridj",commune_name:"Bordj Bou Arreridj"}},onFinish:function(e){e.type="VL",e.date_bon_mission=e.date_bon_mission?e.date_bon_mission.format("yy-M-D"):null,e.date_depart_mission=e.date_depart_mission?e.date_depart_mission.format("yy-M-D"):null,e.date_arrivee_mission=e.date_arrivee_mission?e.date_arrivee_mission.format("yy-M-D"):null,t.post("/missionvls",e).then((function(e){var t;D.b.info("Bien ajouter"),a.push("/missions_vl/"+(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id))}))}})})}},{path:"/missions_vl/edit/:id",name:"edit-missions-vl",label:"Modifier mission",role:"MODIFIER_MISSION_VL",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],m=Object(O.useHistory)();return Object(n.useEffect)((function(){t.get("/missionvls/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie Mission VL",selectedSiderKey:"list-drivers",children:Object(i.jsx)(Re,{formItems:[{name:"numero",label:"Numero bon commande",type:"text"},{name:"date_bon_mission",label:"Date d'effet(Bon commande)",rules:[{required:!0,message:z}],type:"date"},{name:"car_id",label:"V\xe9hicule",type:"search",url:"cars/search",query_string:"groupe=leger",rules:[{required:!0,message:z}],defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"client_id",label:"Client",type:"search",url:"clients/search",rules:[{required:!0,message:z}],defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"depart_id",label:"D\xe9part",type:"search",url:"cities/search",rules:[{required:!0,message:z}],defaultOptionName:"depart",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.wilaya_name)+" - "+(null===e||void 0===e?void 0:e.daira_name)+" - "+(null===e||void 0===e?void 0:e.commune_name)}},{name:"destinations",label:"Destination",type:"text",rules:[{required:!0,message:z}]},{name:"driver1_id",label:"Conducteur 1",type:"search",url:"drivers/search",rules:[{required:!0,message:z}],defaultOptionName:"driver1",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"driver2_id",label:"Conducteur 2",type:"search",url:"drivers/search",defaultOptionName:"driver2",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"date_depart_mission",label:"Date depart",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_bon_mission")}},{name:"date_arrivee_mission",label:"Date arriv\xe9e",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_depart_mission")}},{name:"Observation",label:"observation",type:"textarea"}],initialValues:Object(j.a)(Object(j.a)({},d),{},{date_arrivee:ie(d.date_arrivee),date_arrivee_destination:ie(d.date_arrivee_destination),date_arrivee_mission:d.date_arrivee_mission?ie(d.date_arrivee_mission):null,date_bon_mission:ie(d.date_bon_mission),date_depart:ie(d.date_depart),date_depart_destination:ie(d.date_depart_destination),date_depart_mission:d.date_depart_mission?ie(d.date_depart_mission):null,created_at:ie(d.created_at),updated_at:ie(d.updated_at)}),onFinish:function(a){a.type="VL",a.date_arrivee=a.date_arrivee?a.date_arrivee.format("yy-M-D"):ie().format("yy-M-D"),a.date_arrivee_destination=a.date_arrivee_destination?a.date_arrivee_destination.format("yy-M-D"):ie().format("yy-M-D"),a.date_arrivee_mission=a.date_arrivee_mission?a.date_arrivee_mission.format("yy-M-D"):null,a.date_depart=a.date_depart?a.date_depart.format("yy-M-D"):ie().format("yy-M-D"),a.date_depart_destination=a.date_depart_destination?a.date_depart_destination.format("yy-M-D"):ie().format("yy-M-D"),a.date_depart_mission=a.date_depart_mission?a.date_depart_mission.format("yy-M-D"):ie().format("yy-M-D"),a.date_bon_mission=a.date_bon_mission?a.date_bon_mission.format("yy-M-D"):ie().format("yy-M-D"),t.put("/missionvls/"+e.id,a).then((function(e){D.b.info("Bien modifier"),m.push("/missions_vl")}))}})})},hideInSide:!0},{path:"/missions_md/add",name:"add-mission-md",label:"Ajouter mission MD",role:"AJOUTER_MISSION_MD",component:function(){var e=p(),t=e.api;e.user;window.api=t;var a=Object(O.useHistory)();return Object(i.jsx)(J,{title:"Nouvelle mission MD",children:Object(i.jsx)(Re,{formItems:[{name:"numero",label:"Numero bon commande",type:"text"},{name:"date_bon_mission",label:"Date d'effet(Bon commande)",rules:[{required:!0,message:z}],type:"date"},{name:"car_id",label:"Tracteur",type:"search",url:"cars/search",query_string:"groupe=LIVRAISON%20MARCHANDISE",rules:[{required:!0,message:z}],defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"remourque_id",label:"Remorque",type:"search",url:"cars/search",query_string:"genre=REMORQUE",rules:[{required:!0,message:z}],defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"client_id",label:"Client",type:"search",url:"clients/search",rules:[{required:!0,message:z}],defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"depart_id",label:"D\xe9part",type:"search",url:"cities/search",rules:[{required:!0,message:z}],defaultOptionName:"depart",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.wilaya_name)+" - "+(null===e||void 0===e?void 0:e.daira_name)+" - "+(null===e||void 0===e?void 0:e.commune_name)}},{name:"destinations",label:"Destination",type:"text",rules:[{required:!0,message:z}]},{name:"driver1_id",label:"Conducteur 1",type:"search",url:"drivers/search",rules:[{required:!0,message:z}],defaultOptionName:"driver1",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"driver2_id",label:"Conducteur 2",type:"search",url:"drivers/search",defaultOptionName:"driver2",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"date_depart_mission",label:"Date depart",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_bon_mission")}},{name:"date_arrivee_mission",label:"Date arriv\xe9e",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_depart_mission")}},{name:"Observation",label:"observation",type:"textarea"}],initialValues:{date_bon_mission:ie(),date_depart_mission:ie(),depart_id:1158,depart:{id:1158,wilaya_name:"Bordj Bou Arreridj",daira_name:"Bordj Bou Arreridj",commune_name:"Bordj Bou Arreridj"}},onFinish:function(e){e.type="MD",e.date_bon_mission=e.date_bon_mission?e.date_bon_mission.format("yy-M-D"):null,e.date_depart_mission=e.date_depart_mission?e.date_depart_mission.format("yy-M-D"):null,e.date_arrivee_mission=e.date_arrivee_mission?e.date_arrivee_mission.format("yy-M-D"):null,t.post("/missionvls",e).then((function(e){var t;D.b.info("Bien ajouter"),a.push("/missions_md/"+(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id))}))}})})}},{path:"/missions_md/edit/:id",name:"edit-missions-md",label:"Modifier mission MD",role:"MODIFIER_MISSION_MD",component:function(){var e=Object(O.useRouteMatch)().params,t=p().api,a=Object(n.useState)(!0),r=Object(u.a)(a,2),c=r[0],l=r[1],s=Object(n.useState)({}),o=Object(u.a)(s,2),d=o[0],b=o[1],m=Object(O.useHistory)();return Object(n.useEffect)((function(){t.get("/missionvls/"+e.id).then((function(e){var t=e.data;b(t.data),l(!1)}))}),[]),Object(i.jsx)(J,{withBack:!0,loading:c,title:"Modifie Mission VL",selectedSiderKey:"list-drivers",children:Object(i.jsx)(Re,{formItems:[{name:"numero",label:"Numero bon commande",type:"text"},{name:"date_bon_mission",label:"Date d'effet(Bon commande)",rules:[{required:!0,message:z}],type:"date"},{name:"car_id",label:"V\xe9hicule",type:"search",url:"cars/search",query_string:"groupe=leger",rules:[{required:!0,message:z}],defaultOptionName:"car",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.matricule)+" | "+(null===e||void 0===e?void 0:e.marque)}},{name:"client_id",label:"Client",type:"search",url:"clients/search",rules:[{required:!0,message:z}],defaultOptionName:"client",mapOptionToString:function(e){return null===e||void 0===e?void 0:e.designation}},{name:"depart_id",label:"D\xe9part",type:"search",url:"cities/search",rules:[{required:!0,message:z}],defaultOptionName:"depart",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.wilaya_name)+" - "+(null===e||void 0===e?void 0:e.daira_name)+" - "+(null===e||void 0===e?void 0:e.commune_name)}},{name:"destinations",label:"Destination",type:"text",rules:[{required:!0,message:z}]},{name:"driver1_id",label:"Conducteur 1",type:"search",url:"drivers/search",rules:[{required:!0,message:z}],defaultOptionName:"driver1",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"driver2_id",label:"Conducteur 2",type:"search",url:"drivers/search",defaultOptionName:"driver2",mapOptionToString:function(e){return(null===e||void 0===e?void 0:e.firstname)+" "+(null===e||void 0===e?void 0:e.lastname)+" | C/P: "+(null===e||void 0===e?void 0:e.code_paie)}},{name:"date_depart_mission",label:"Date depart",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_bon_mission")}},{name:"date_arrivee_mission",label:"Date arriv\xe9e",rules:[{required:!0,message:z}],type:"date",disabledDate:function(e,t){return e&&e<t.getFieldValue("date_depart_mission")}},{name:"Observation",label:"observation",type:"textarea"}],initialValues:Object(j.a)(Object(j.a)({},d),{},{date_arrivee:ie(d.date_arrivee),date_arrivee_destination:ie(d.date_arrivee_destination),date_arrivee_mission:d.date_arrivee_mission?ie(d.date_arrivee_mission):null,date_bon_mission:ie(d.date_bon_mission),date_depart:ie(d.date_depart),date_depart_destination:ie(d.date_depart_destination),date_depart_mission:d.date_depart_mission?ie(d.date_depart_mission):null,created_at:ie(d.created_at),updated_at:ie(d.updated_at)}),onFinish:function(a){a.type="VL",a.date_arrivee=a.date_arrivee?a.date_arrivee.format("yy-M-D"):ie().format("yy-M-D"),a.date_arrivee_destination=a.date_arrivee_destination?a.date_arrivee_destination.format("yy-M-D"):ie().format("yy-M-D"),a.date_arrivee_mission=a.date_arrivee_mission?a.date_arrivee_mission.format("yy-M-D"):null,a.date_depart=a.date_depart?a.date_depart.format("yy-M-D"):ie().format("yy-M-D"),a.date_depart_destination=a.date_depart_destination?a.date_depart_destination.format("yy-M-D"):ie().format("yy-M-D"),a.date_depart_mission=a.date_depart_mission?a.date_depart_mission.format("yy-M-D"):ie().format("yy-M-D"),a.date_bon_mission=a.date_bon_mission?a.date_bon_mission.format("yy-M-D"):ie().format("yy-M-D"),t.put("/missionvls/"+e.id,a).then((function(e){D.b.info("Bien modifier"),m.push("/missions_vl")}))}})})},hideInSide:!0},{path:"/missions_vl",name:"list-missions-vl",role:"LISTE_MISSIONS_VL",label:"List missions VL",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=n.useRef(),l=n.useState(ne()().startOf("month")),s=Object(u.a)(l,2),o=s[0],d=s[1],b=n.useState(ne()()),j=Object(u.a)(b,2),m=j[0],h=j[1],f=n.useState(!1),x=Object(u.a)(f,2),v=x[0],g=x[1],y=[{title:"Matricule",dataIndex:"cars_matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"cars_code_gps",sorter:!0,hideInSearch:!1},{title:"Client",dataIndex:"clients_designation",copyable:!0,sorter:!0,hideInSearch:!1,render:function(e,t,a,i){return t.clients_mother_designation?t.clients_designation+" / "+t.clients_mother_designation:t.clients_designation}},{title:"Conducteur",dataIndex:"driver1s_fullname",copyable:!0,sorter:!0,hideInSearch:!1},{title:"Depart",dataIndex:"driver1s_fullname",copyable:!0,sorter:!0,hideInSearch:!0,render:function(e,t,a,i){return t.departs_wilaya_name}},{title:"Destinations",dataIndex:"destinations",copyable:!0,sorter:!0,hideInSearch:!0},{title:"Date d\xe9part",dataIndex:"missions_date_depart_mission",sorter:!0,hideInSearch:!0},{title:"Date arrivee",dataIndex:"missions_date_arrivee_mission",sorter:!0,hideInSearch:!0},{title:"Status",dataIndex:"missionvls_state",sorter:!0,hideInSearch:!0,render:function(e,t,a,n){return Object(i.jsx)(Et,{mission:t})}},{title:"Cree par",dataIndex:"createdby_username",sorter:!0,hideInSearch:!0},{title:"Valider par",dataIndex:"acceptedby_username",sorter:!0,hideInSearch:!0},{title:"GPS par",dataIndex:"gpsby_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,l,s){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/missions_vl/show/"+n.id)},shape:"circle",icon:Object(i.jsx)(St.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_GPS_MISSION_VL")&&Object(i.jsx)(Tt,{})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"VALIDER_MISSION_VL")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir valider?",onConfirm:function(){t.post("/missionvls/accepte/"+n.id).then((function(){D.b.success("Mission valid\xe9e!"),c.current.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",disabled:n.acceptedby_username,children:Object(i.jsx)(Ne.a,{title:"Valider",children:Object(i.jsx)(I.a,{disabled:n.acceptedby_username,shape:"circle",icon:Object(i.jsx)(B.e,{})})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_MISSION_VL")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/missions_vl/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_MISSION_VL")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/missionvls/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),s.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})]}}];return Object(i.jsx)(J,{title:"Missions VL",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:y,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),e.date1=o?o.format("yy-M-D"):ne()().format("yy-M-D"),e.date2=m?m.format("yy-M-D"):ne()().format("yy-M-D"),t.get("/missionvls?type=VL",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10},toolBarRender:function(e){return[Object(i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:[Object(i.jsx)(ue.a,{placeholder:"date1",format:"DD/MM/YYYY",onChange:function(t){d(t),e.reload()},value:o,style:{width:"100%"}}),Object(i.jsx)(ue.a,{placeholder:"date2",format:"DD/MM/YYYY",onChange:function(t){h(t),e.reload()},value:m,style:{width:"100%"}})]}),Object(i.jsx)("div",{style:{cursor:"pointer",marginTop:7},children:Object(i.jsx)(I.a,{loading:v,type:"text",icon:Object(i.jsx)(we.a,{size:20}),onClick:function(){var e=o?o.format("yy-M-D"):ne()().format("yy-M-D"),a=m?m.format("yy-M-D"):ne()().format("yy-M-D");g(!0),t.get("/missionvls?format=excel&date1=".concat(e,"&date2=").concat(a),{responseType:"blob",headers:{"Content-Disposition":"attachment; filename=etat_vehicules.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","etat_missions_vl_"+ne()().format("DD_MM_YYYY__HH_MM")+".xlsx"),document.body.appendChild(a),a.click(),g(!1)}))}})})]}})})},exact:!0},{path:"/missions_md",name:"list-missions-md",role:"LISTE_MISSIONS_MD",label:"List missions MD",component:function(){var e=p(),t=e.api,a=e.user,r=Object(O.useHistory)(),c=n.useRef(),l=n.useState(ne()().startOf("month")),s=Object(u.a)(l,2),o=s[0],d=s[1],b=n.useState(ne()()),j=Object(u.a)(b,2),m=j[0],h=j[1],f=n.useState(!1),x=Object(u.a)(f,2),v=x[0],g=x[1],y=[{title:"Matricule",dataIndex:"cars_matricule",copyable:!0,sorter:!0},{title:"Code GPS",dataIndex:"cars_code_gps",sorter:!0,hideInSearch:!1},{title:"Client",dataIndex:"clients_designation",copyable:!0,sorter:!0,hideInSearch:!1,render:function(e,t,a,i){return t.clients_mother_designation?t.clients_designation+" / "+t.clients_mother_designation:t.clients_designation}},{title:"Conducteur",dataIndex:"driver1s_fullname",copyable:!0,sorter:!0,hideInSearch:!1},{title:"Depart",dataIndex:"driver1s_fullname",copyable:!0,sorter:!0,hideInSearch:!0,render:function(e,t,a,i){return t.departs_wilaya_name}},{title:"Destinations",dataIndex:"destinations",copyable:!0,sorter:!0,hideInSearch:!0},{title:"Date d\xe9part",dataIndex:"missions_date_depart_mission",sorter:!0,hideInSearch:!0},{title:"Date arrivee",dataIndex:"missions_date_arrivee_mission",sorter:!0,hideInSearch:!0},{title:"Status",dataIndex:"missionvls_state",sorter:!0,hideInSearch:!0,render:function(e,t,a,n){return Object(i.jsx)(Et,{mission:t})}},{title:"Cree par",dataIndex:"createdby_username",sorter:!0,hideInSearch:!0},{title:"Valider par",dataIndex:"acceptedby_username",sorter:!0,hideInSearch:!0},{title:"GPS par",dataIndex:"gpsby_username",sorter:!0,hideInSearch:!0},{title:"option",valueType:"option",dataIndex:"id",render:function(e,n,l,s){return[Object(i.jsx)(Ne.a,{title:"Afficher",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/missions_vl/show/"+n.id)},shape:"circle",icon:Object(i.jsx)(St.a,{})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_GPS_MISSION_MD")&&Object(i.jsx)(Tt,{})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"VALIDER_MISSION_MD")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir valider?",onConfirm:function(){t.post("/missionvls/accepte/"+n.id).then((function(){D.b.success("Mission valid\xe9e!"),c.current.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",disabled:n.acceptedby_username,children:Object(i.jsx)(Ne.a,{title:"Valider",children:Object(i.jsx)(I.a,{disabled:n.acceptedby_username,shape:"circle",icon:Object(i.jsx)(B.e,{})})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"MODIFIER_MISSION_MD")&&Object(i.jsx)(Ne.a,{title:"Modifier",children:Object(i.jsx)(I.a,{onClick:function(){r.push("/missions_vl/edit/"+n.id)},shape:"circle",icon:Object(i.jsx)(Me.a,{})})})}),Object(i.jsx)(i.Fragment,{children:Pe(a,"SUPPRIMER_MISSION_MD")&&Object(i.jsx)(Ke.a,{title:"\xcates-vous s\xfbr de vouloir supprimer?",onConfirm:function(){t.post("/missionvls/delete/"+n.id).then((function(){D.b.info("Bien Supprim\xe9"),s.reload()}))},onCancel:function(){},okText:"Oui",cancelText:"No",children:Object(i.jsx)(I.a,{shape:"circle",icon:Object(i.jsx)(Ue.a,{})})})})]}}];return Object(i.jsx)(J,{title:"Missions MD",selectedSiderKey:"list-cars",children:Object(i.jsx)(re.a,{actionRef:c,size:"small",search:!0,columns:y,ellipsis:!0,request:function(e,a,i){return a&&(e.sortBy=Object.keys(a)[0],e.sort=Object.values(a)[0]),i&&(e.filterBy=Object.keys(i)[0],e.filter=Object.values(i)),e.date1=o?o.format("yy-M-D"):ne()().format("yy-M-D"),e.date2=m?m.format("yy-M-D"):ne()().format("yy-M-D"),t.get("/missionvls?type=MD",{params:e}).then((function(e){return e.data}))},pagination:{defaultCurrent:1,pageSize:10},toolBarRender:function(e){return[Object(i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:[Object(i.jsx)(ue.a,{placeholder:"date1",format:"DD/MM/YYYY",onChange:function(t){d(t),e.reload()},value:o,style:{width:"100%"}}),Object(i.jsx)(ue.a,{placeholder:"date2",format:"DD/MM/YYYY",onChange:function(t){h(t),e.reload()},value:m,style:{width:"100%"}})]}),Object(i.jsx)("div",{style:{cursor:"pointer",marginTop:7},children:Object(i.jsx)(I.a,{loading:v,type:"text",icon:Object(i.jsx)(we.a,{size:20}),onClick:function(){var e=o?o.format("yy-M-D"):ne()().format("yy-M-D"),a=m?m.format("yy-M-D"):ne()().format("yy-M-D");g(!0),t.get("/missionvls?format=excel&date1=".concat(e,"&date2=").concat(a,"&type=MD"),{responseType:"blob",headers:{"Content-Disposition":"attachment; filename=etat_vehicules.xlsx","Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","etat_missions_vl_"+ne()().format("DD_MM_YYYY__HH_MM")+".xlsx"),document.body.appendChild(a),a.click(),g(!1)}))}})})]}})})},exact:!0},{path:"/missions_vl/show/:id",name:"show-missions-vl",label:"Show missions VL",component:function(){var e=p().api,t=Object(O.useRouteMatch)().params,a=Object(Xe.useHistory)(),r=Object(n.useState)({step:0}),c=Object(u.a)(r,2),l=c[0],s=c[1];Object(n.useEffect)((function(){e.get("missionvls/"+t.id).then((function(e){s(e.data.data)}))}),[t]);var o=Object(n.useRef)(null),d=(Object(dt.useReactToPrint)({content:function(){return o.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Object(n.useRef)(null));Object(dt.useReactToPrint)({content:function(){return d.current},onBeforeGetContent:function(){var e=Object($e.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});return Object(i.jsx)(J,{withBack:!0,loading:!l,title:"Affiche mission n\xb0 "+t.id,children:l.car&&Object(i.jsx)(Ot,{disabledDelete:!0,component:Object(i.jsx)(Dt,{mission:l}),onDelete:function(){e.post("missionvls/delete/"+l.id).then((function(){a.push("/mission"),D.b.info("Checklist est supprimer")}))}})})},hideInSide:!0}]},{name:"smi",label:"SMI",role:"SMI",icon:Object(i.jsx)(V.a,{style:{marginRight:10}}),routes:[{path:"/smi/qualite",name:"qualite",label:"Portail Qualit\xe9",role:"SMI_QUALITE",component:function(){var e=Object(O.useHistory)(),t=r.a.useState("mail"),a=Object(u.a)(t,2),n=a[0],c=a[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(C.a,{onClick:function(t){c(t.key),e.push("/smi/qualite/"+t.key)},selectedKeys:[n],mode:"horizontal",style:{position:"fixed",zIndex:10,width:"100%",boxShadow:"0 1px 4px rgba(0,21,41,.08)"},children:[Ve("SMI_ANNUAIRE")&&Object(i.jsxs)(ha,{title:"Annuaire",children:[Ve("SMI_AXES")&&Object(i.jsx)(C.a.Item,{children:"Les axes strat\xe9giques"},"axes_strategiques"),Ve("SMI_OBJECTIFS_OP")&&Object(i.jsx)(C.a.Item,{children:"Les objectifs op\xe9rationnels"},"objectifs_operationnel"),Ve("SMI_PROCESSUS")&&Object(i.jsx)(C.a.Item,{children:"Les processus"},"processus")]},"annuaire"),Object(i.jsxs)(ha,{title:"Pilotage",children:[Ve("SMI_DASHBOARD")&&Object(i.jsx)(C.a.Item,{children:"Tableau de bord"},"dashboard"),Ve("SMI_INDICATEURS")&&Object(i.jsx)(C.a.Item,{children:"Indicateurs & valeurs"},"indicateurs"),Ve("SMI_RMA")&&Object(i.jsx)(C.a.Item,{children:"RMA"},"rma")]},"pilotage"),Object(i.jsxs)(ha,{title:"Am\xe9lioration",children:[Object(i.jsx)(C.a.Item,{children:"Plan d'actions"},"plans_actions"),Object(i.jsx)(C.a.Item,{children:"Non-conformit\xe9s"},"non_conformites")]},"amelioration"),Object(i.jsxs)(ha,{title:"Documentation",children:[Object(i.jsx)(C.a.Item,{children:"Documentation en vigueur"},"documentation_vigueur"),Object(i.jsx)(C.a.Item,{children:"Gestion documentaire"},"gestion_documentaire")]},"documentation")]}),Object(i.jsxs)("div",{style:{paddingTop:50},children:[Object(i.jsx)(O.Route,{path:"/smi/qualite/axes_strategiques",children:Object(i.jsx)(kt,{})}),Object(i.jsx)(O.Route,{path:"/smi/qualite/objectifs_operationnel",children:Object(i.jsx)(Mt,{})}),Object(i.jsx)(O.Route,{path:"/smi/qualite/processus",children:Object(i.jsx)(Lt,{})}),Object(i.jsx)(O.Route,{exact:!0,path:"/smi/qualite/indicateurs",children:Object(i.jsx)(Gt,{})}),Object(i.jsx)(O.Route,{exact:!0,path:"/smi/qualite/indicateurs/:id",children:Object(i.jsx)(ia,{})}),Object(i.jsx)(O.Route,{path:"/smi/qualite/dashboard",children:Object(i.jsx)(aa,{})}),Object(i.jsx)(O.Route,{exact:!0,path:"/smi/qualite/non_conformites",children:Object(i.jsx)(ua,{})}),Object(i.jsx)(O.Route,{exact:!0,path:"/smi/qualite/plans_actions",children:Object(i.jsx)(ma,{})})]})]})}}]}]},Oa=x.a.Sider,fa=C.a.SubMenu,xa=function(){var e=Object(O.useHistory)(),t=p().user,a=p().selectedSiderKey;return Object(i.jsx)(Oa,{width:200,style:{overflow:"auto",height:"calc(100vh - 32px)",marginTop:32,position:"fixed",left:0},children:Object(i.jsx)(C.a,{theme:"dark",mode:"inline",defaultSelectedKeys:a,children:pa.routes.map((function(a,n){return a.role?a.routes?Pe(t,a.role)?Object(i.jsx)(fa,{icon:a.icon,title:a.label,children:a.routes.map((function(a,n){return a.role?Pe(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name):null:a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name)}))},a.name):null:Pe(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},icon:a.icon,children:a.label},a.name):null:a.routes?Object(i.jsx)(fa,{icon:a.icon,title:a.label,children:a.routes.map((function(a,n){return a.role?Pe(t,a.role)?a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name):null:a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},children:a.label},a.name)}))},a.name):a.hideInSide?void 0:Object(i.jsx)(C.a.Item,{onClick:function(){return e.push(a.path)},icon:a.icon,children:a.label},a.name)}))})})},va=x.a.Content,ga=function(){for(var e=p().user,t=[],a=0;a<100;a++)t.push(a);var n=function(t){return Object(i.jsx)(O.Switch,{children:t.map((function(t,a){return t.role?Pe(e,t.role)?Object(i.jsx)(O.Route,{exact:t.exact,component:t.component,path:t.path},a):null:Object(i.jsx)(O.Route,{exact:t.exact,component:t.component,path:t.path},a)}))})};return Object(i.jsx)(f.a,{children:Object(i.jsxs)(x.a,{children:[Object(i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:200,height:32,backgroundColor:"white",padding:5,textAlign:"center",paddingBottom:5,display:"flex",alignItems:"center"},children:Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1},children:Object(i.jsx)(f.b,{to:"/"})})}),Object(i.jsx)(xa,{}),Object(i.jsxs)(x.a,{style:{marginLeft:200,overflowY:"scroll"},children:[Object(i.jsx)(U,{}),Object(i.jsx)(va,{style:{paddingTop:32},children:pa.routes.map((function(t,a){return t.role?Pe(e,t.role)?Object(i.jsx)(O.Switch,{children:t.routes?n(t.routes):Object(i.jsx)(O.Route,{exact:t.exact,component:t.component,path:t.path})}):null:Object(i.jsx)(O.Switch,{children:t.routes?n(t.routes):Object(i.jsx)(O.Route,{exact:t.exact,component:t.component,path:t.path})})}))})]})]})})};function ya(){Object(O.useHistory)();var e=M(),t=e.api,a=e.setToken,r=Object(n.useState)(!1),c=Object(u.a)(r,2),l=c[0],s=c[1];return Object(i.jsx)("div",{className:"login",children:Object(i.jsxs)(se.a,{layout:"vertical",name:"basic",initialValues:{},onFinish:function(e){s(!0),t.post("auth/login",e).then((function(e){var t=e.data;a(t.data.token),document.location.reload()})).catch((function(e){s(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},style:{width:400,padding:20,borderRadius:5},children:[Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(i.jsx)("img",{alt:"Gpark",style:{height:72,width:72},src:"gpark_logo.png"})}),Object(i.jsx)(g.a,{}),Object(i.jsx)("h1",{style:{fontSize:30,fontWeight:700},children:"Se connecter \xe0 G P A R K"}),Object(i.jsx)(se.a.Item,{label:"Nom d'utilisateur",name:"username",rules:[{required:!0,message:z}],children:Object(i.jsx)(le.a,{})}),Object(i.jsx)(se.a.Item,{label:"Mot de pass",name:"password",rules:[{required:!0,message:z}],children:Object(i.jsx)(le.a.Password,{})}),Object(i.jsx)(g.a,{}),Object(i.jsx)(se.a.Item,{children:Object(i.jsx)(I.a,{loading:l,type:"primary",style:{width:"100%"},htmlType:"submit",children:"Connect\xe9"})})]})})}function _a(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(u.a)(c,2),s=l[0],o=l[1],d=M(),j=d.api,m=d.setToken,p=d.token,O=Object(n.useState)(""),f=Object(u.a)(O,2),x=f[0],v=f[1];return Object(n.useEffect)((function(){var e=!0;return r(!0),j.get("/auth/me").then((function(t){var a=t.data;e&&(o(a.data),r(!1))})).catch((function(){e&&(o(null),r(!1))})),function(){return e=!1}}),[p]),a?Object(i.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(b.a,{size:"large"})}):Object(i.jsx)(h,{value:{user:s,setUser:o,api:j,setToken:m,selectedSiderKey:x,setSelectedSiderKey:v},children:s?Object(i.jsx)(ga,{}):Object(i.jsx)(ya,{})})}var Ia=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1149)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),i(e),n(e),r(e),c(e)}))};l.a.render(Object(i.jsx)(s.b,{locale:d.a,children:Object(i.jsx)(_a,{})}),document.getElementById("root")),Ia()},721:function(e,t,a){}},[[1102,1,2]]]);
//# sourceMappingURL=main.7c1019f2.chunk.js.map